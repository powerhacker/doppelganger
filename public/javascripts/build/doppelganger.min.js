var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,i,r,o,s,a,c,l,u,h,d=t&&t.split("/"),f=g.map,p=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=d.concat(e.split("/")),l=0;l<e.length;l+=1)if(h=e[l],"."===h)e.splice(l,1),l-=1;else if(".."===h){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||p)&&f){for(n=e.split("/"),l=n.length;l>0;l-=1){if(i=n.slice(0,l).join("/"),d)for(u=d.length;u>0;u-=1)if(r=f[d.slice(0,u).join("/")],r&&(r=r[i])){o=r,s=l;break}if(o)break;!a&&p&&p[i]&&(a=p[i],c=l)}!o&&a&&(o=a,s=c),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function i(t,n){return function(){return u.apply(e,y.call(arguments,0).concat([t,n]))}}function r(e){return function(t){return n(t,e)}}function o(e){return function(t){f[e]=t}}function s(n){if(t(p,n)){var i=p[n];delete p[n],m[n]=!0,l.apply(e,i)}if(!t(f,n)&&!t(m,n))throw new Error("No "+n);return f[n]}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return g&&g.config&&g.config[e]||{}}}var l,u,h,d,f={},p={},g={},m={},v=Object.prototype.hasOwnProperty,y=[].slice;h=function(e,t){var i,o=a(e),c=o[0];return e=o[1],c&&(c=n(c,t),i=s(c)),c?e=i&&i.normalize?i.normalize(e,r(t)):n(e,t):(e=n(e,t),o=a(e),c=o[0],e=o[1],c&&(i=s(c))),{f:c?c+"!"+e:e,n:e,pr:c,p:i}},d={require:function(e){return i(e)},exports:function(e){var t=f[e];return"undefined"!=typeof t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:c(e)}}},l=function(n,r,a,c){var l,u,g,v,y,b,w=[];if(c=c||n,"function"==typeof a){for(r=!r.length&&a.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=h(r[y],c),u=v.f,"require"===u)w[y]=d.require(n);else if("exports"===u)w[y]=d.exports(n),b=!0;else if("module"===u)l=w[y]=d.module(n);else if(t(f,u)||t(p,u)||t(m,u))w[y]=s(u);else{if(!v.p)throw new Error(n+" missing "+u);v.p.load(v.n,i(c,!0),o(u),{}),w[y]=f[u]}g=a.apply(f[n],w),n&&(l&&l.exports!==e&&l.exports!==f[n]?f[n]=l.exports:g===e&&b||(f[n]=g))}else n&&(f[n]=a)},requirejs=require=u=function(t,n,i,r,o){return"string"==typeof t?d[t]?d[t](n):s(h(t,n).f):(t.splice||(g=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},"function"==typeof i&&(i=r,r=o),r?l(e,t,n,i):setTimeout(function(){l(e,t,n,i)},4),u)},u.config=function(e){return g=e,g.deps&&u(g.deps,g.callback),u},requirejs._defined=f,define=function(e,n,i){n.splice||(i=n,n=[]),t(f,e)||t(p,e)||(p[e]=[e,n,i])},define.amd={jQuery:!0}}(),define("vendor/almond",function(){}),function(){var e={};e.Point=function(e,t){this.X=e,this.Y=t},e.Rectangle=function(e,t,n,i){this.X=e,this.Y=t,this.Width=n,this.Height=i},e.Line=function(e,t,n,i){this.X1=e,this.Y1=t,this.X2=n,this.Y2=i},e.Hexagon=function(t,n,i){this.Points=[];var r=null,o=null;e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?(r=(e.Hexagon.Static.WIDTH-e.Hexagon.Static.SIDE)/2,o=e.Hexagon.Static.HEIGHT/2,this.Points.push(new e.Point(r+n,i)),this.Points.push(new e.Point(r+e.Hexagon.Static.SIDE+n,i)),this.Points.push(new e.Point(e.Hexagon.Static.WIDTH+n,o+i)),this.Points.push(new e.Point(r+e.Hexagon.Static.SIDE+n,e.Hexagon.Static.HEIGHT+i)),this.Points.push(new e.Point(r+n,e.Hexagon.Static.HEIGHT+i)),this.Points.push(new e.Point(n,o+i))):(r=e.Hexagon.Static.WIDTH/2,o=(e.Hexagon.Static.HEIGHT-e.Hexagon.Static.SIDE)/2,this.Points.push(new e.Point(r+n,i)),this.Points.push(new e.Point(e.Hexagon.Static.WIDTH+n,o+i)),this.Points.push(new e.Point(e.Hexagon.Static.WIDTH+n,o+e.Hexagon.Static.SIDE+i)),this.Points.push(new e.Point(r+n,e.Hexagon.Static.HEIGHT+i)),this.Points.push(new e.Point(n,o+e.Hexagon.Static.SIDE+i)),this.Points.push(new e.Point(n,o+i))),this.Id=t,this.x=n,this.y=i,this.x1=r,this.y1=o,this.TopLeftPoint=new e.Point(this.x,this.y),this.BottomRightPoint=new e.Point(this.x+e.Hexagon.Static.WIDTH,this.y+e.Hexagon.Static.HEIGHT),this.MidPoint=new e.Point(this.x+e.Hexagon.Static.WIDTH/2,this.y+e.Hexagon.Static.HEIGHT/2),this.P1=new e.Point(n+r,i+o),this.selected=!1},e.Hexagon.prototype.draw=function(e,t,n){e.beginPath(),e.moveTo(this.Points[0].X,this.Points[0].Y);for(var i=1;i<this.Points.length;i++){var r=this.Points[i];e.lineTo(r.X,r.Y)}e.closePath(),e.lineWidth=2,e.strokeStyle=t||"#0c2731",(this.selected||n)&&(e.fillStyle=n||"rgba(0, 0, 0, 0.15)",e.fill()),t!==!1&&e.stroke()},e.Hexagon.prototype.isInBounds=function(t,n){return this.Contains(new e.Point(t,n))},e.Hexagon.prototype.isInHexBounds=function(e){return this.TopLeftPoint.X<e.X&&this.TopLeftPoint.Y<e.Y&&e.X<this.BottomRightPoint.X&&e.Y<this.BottomRightPoint.Y?!0:!1},e.Hexagon.prototype.Contains=function(e){var t=!1;if(this.isInHexBounds(e)){var n,i=0;for(n=0,i=this.Points.length-1;n<this.Points.length;i=n++){var r=this.Points[n],o=this.Points[i];(r.Y<=e.Y&&e.Y<o.Y||o.Y<=e.Y&&e.Y<r.Y)&&e.X<(o.X-r.X)*(e.Y-r.Y)/(o.Y-r.Y)+r.X&&(t=!t)}}return t},e.Hexagon.prototype.isOnScreen=function(e,t){var n=this.MidPoint,i=n.X+(e||0),r=n.Y+(t||0);return 0>i||i>window.innerWidth?!1:0>r||r>window.innerHeight?!1:!0},e.Hexagon.Orientation={Normal:0,Rotated:1},e.Hexagon.Static={HEIGHT:173.20508075688775,WIDTH:200,SIDE:100,ORIENTATION:e.Hexagon.Orientation.Normal,DRAWSTATS:!1},window.HT=e}(),define("vendor/hex/tools",function(){}),function(e){window.findHexWithSideLengthZAndRatio=function(t,n){t=t||50,n=n||1.1547;var i=Math.pow(n,2),r=(1+i)/i,o=t/i,s=(1-4*i)/(4*i)*Math.pow(t,2),a=(-o+Math.sqrt(Math.pow(o,2)-4*r*s))/(2*r),c=(2*a+t)/(2*n),l=2*a+t,u=2*c;e.Hexagon.Static.WIDTH=l,e.Hexagon.Static.HEIGHT=u,e.Hexagon.Static.SIDE=t},window.findHexWithWidthAndHeight=function(t,n){t=t||100,n=n||86.60254037844388;var i=-3,r=-2*t,o=Math.pow(t,2)+Math.pow(n,2),s=(-r-Math.sqrt(Math.pow(r,2)-4*i*o))/(2*i);e.Hexagon.Static.WIDTH=t,e.Hexagon.Static.HEIGHT=n,e.Hexagon.Static.SIDE=s}}(window.HT),define("vendor/hex/calculations",function(){}),function(e){e.Grid=function(t,n){this.Hexes=[],this.width=t,this.height=n;for(var i={},r=0,o=0;o+e.Hexagon.Static.HEIGHT<=n;){var s=0,a=0;1===r%2&&(a=e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?(e.Hexagon.Static.WIDTH-e.Hexagon.Static.SIDE)/2+e.Hexagon.Static.SIDE:e.Hexagon.Static.WIDTH/2,s=1);for(var c=a;c+e.Hexagon.Static.WIDTH<=t;){var l=this.GetHexId(r,s),u=new e.Hexagon(l,c,o),h=s;e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?u.PathCoOrdX=s:(u.PathCoOrdY=r,h=r),this.Hexes.push(u),i[h]||(i[h]=[]),i[h].push(u),s+=2,c+=e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?e.Hexagon.Static.WIDTH+e.Hexagon.Static.SIDE:e.Hexagon.Static.WIDTH}r++,o+=e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?e.Hexagon.Static.HEIGHT/2:(e.Hexagon.Static.HEIGHT-e.Hexagon.Static.SIDE)/2+e.Hexagon.Static.SIDE}for(var d in i){var f=i[d],p=Math.floor(d/2)+d%2;for(var g in f){var m=f[g];e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?m.PathCoOrdY=p++:m.PathCoOrdX=p++}}},e.Grid.Static={Letters:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},e.Grid.prototype.GetHexId=function(t,n){for(var i=t,r="";i>25;)r=e.Grid.Static.Letters[i%26]+r,i-=26;return e.Grid.Static.Letters[i]+r+(n+1)},e.Grid.prototype.GetHexAt=function(e){for(var t in this.Hexes)if(this.Hexes[t].Contains(e))return this.Hexes[t];return null},e.Grid.prototype.GetHexDistance=function(e,t){var n=e.PathCoOrdX-t.PathCoOrdX,i=e.PathCoOrdY-t.PathCoOrdY;return(Math.abs(n)+Math.abs(i)+Math.abs(n-i))/2},e.Grid.prototype.GetHexById=function(e){for(var t in this.Hexes)if(this.Hexes[t].Id===e)return this.Hexes[t];return null},e.Grid.prototype.GetHexByCartesian=function(e,t){for(var n in this.Hexes)if(this.Hexes[n].PathCoOrdX===e&&this.Hexes[n].PathCoOrdY===t)return this.Hexes[n];return null},e.Grid.prototype.Cache=function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.width,e.height=this.height;for(var n in this.Hexes)this.Hexes[n].draw(t);return this.selected&&this.selected.draw(t),e},e.Grid.prototype.select=function(e){for(var t in this.Hexes)this.Hexes[t].selected=!1;e.selected=!0,this.selected=e},e.Grid.prototype.each=function(e,t){var n=0,i=this.Hexes.length;for(i;i>n;n++)e.call(t||this,this.Hexes[n]);return this},e.Grid.prototype.eachOnScreen=function(e,t,n,i){var r=0,o=this.Hexes.length;for(o;o>r;r++)this.Hexes[r].isOnScreen(e,t)&&n.call(i||this,this.Hexes[r])}}(window.HT),define("hex",["vendor/hex/tools","vendor/hex/calculations"],function(){}),function(){function e(e,t,n){for(var i=(n||0)-1,r=e?e.length:0;++i<r;)if(e[i]===t)return i;return-1}function t(t,n){var i=typeof n;if(t=t.cache,"boolean"==i||null==n)return t[n]?0:-1;"number"!=i&&"string"!=i&&(i="object");var r="number"==i?n:w+n;return t=(t=t[i])&&t[r],"object"==i?t&&e(t,n)>-1?0:-1:t?0:-1}function n(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var i="number"==n?e:w+e,r=t[n]||(t[n]={});"object"==n?(r[i]||(r[i]=[])).push(e):r[i]=!0}}function i(e){return e.charCodeAt(0)}function r(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||"undefined"==typeof n)return 1;if(i>n||"undefined"==typeof i)return-1}return e.index-t.index}function o(e){var t=-1,i=e.length,r=e[0],o=e[0|i/2],s=e[i-1];if(r&&"object"==typeof r&&o&&"object"==typeof o&&s&&"object"==typeof s)return!1;var a=c();a["false"]=a["null"]=a["true"]=a.undefined=!1;var l=c();for(l.array=e,l.cache=a,l.push=n;++t<i;)l.push(e[t]);return l}function s(e){return"\\"+et[e]}function a(){return m.pop()||[]}function c(){return v.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function u(){}function h(e){e.length=0,m.length<_&&m.push(e)}function d(e){var t=e.cache;t&&d(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,v.length<_&&v.push(e)}function f(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var i=-1,r=n-t||0,o=Array(0>r?0:r);++i<r;)o[i]=e[t+i];return o}function p(n){function m(e){return e&&"object"==typeof e&&!cr(e)&&Pi.call(e,"__wrapped__")?e:new v(e)}function v(e,t){this.__chain__=!!t,this.__wrapped__=e}function _(e,t,n,i,r){if(n){var o=n(e);if("undefined"!=typeof o)return o}var s=Ot(e);if(!s)return e;var c=Fi.call(e);if(!Y[c]||!or.nodeClass&&l(e))return e;var u=ir[c];switch(c){case F:case W:return new u(+e);case B:case X:return new u(e);case G:return o=u(e.source,M.exec(e)),o.lastIndex=e.lastIndex,o}var d=cr(e);if(t){var p=!i;i||(i=a()),r||(r=a());for(var g=i.length;g--;)if(i[g]==e)return r[g];o=d?u(e.length):{}}else o=d?f(e):br({},e);return d&&(Pi.call(e,"index")&&(o.index=e.index),Pi.call(e,"input")&&(o.input=e.input)),t?(i.push(e),r.push(o),(d?yr:_r)(e,function(e,s){o[s]=_(e,t,n,i,r)}),p&&(h(i),h(r)),o):o}function et(e,t,n){if("function"!=typeof e)return Qn;if("undefined"==typeof t)return e;var i=e.__bindData__||or.funcNames&&!e.name;if("undefined"==typeof i){var r=P&&Ai.call(e);or.funcNames||!r||I.test(r)||(i=!0),(or.funcNames||!i)&&(i=!or.funcDecomp||P.test(r),ar(e,i))}if(i!==!0&&i&&1&i[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return Dn(e,t)}function nt(e,t,n,i){for(var r=(i||0)-1,o=e?e.length:0,s=[];++r<o;){var a=e[r];if(a&&"object"==typeof a&&"number"==typeof a.length&&(cr(a)||mt(a))){t||(a=nt(a,t,n));var c=-1,l=a.length,u=s.length;for(s.length+=l;++c<l;)s[u++]=a[c]}else n||s.push(a)}return s}function it(e,t,n,i,r,o){if(n){var s=n(e,t);if("undefined"!=typeof s)return!!s}if(e===t)return 0!==e||1/e==1/t;var c=typeof e,u=typeof t;if(!(e!==e||e&&Z[c]||t&&Z[u]))return!1;if(null==e||null==t)return e===t;var d=Fi.call(e),f=Fi.call(t);if(d==L&&(d=U),f==L&&(f=U),d!=f)return!1;switch(d){case F:case W:return+e==+t;case B:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case G:case X:return e==xi(t)}var p=d==z;if(!p){if(Pi.call(e,"__wrapped__ ")||Pi.call(t,"__wrapped__"))return it(e.__wrapped__||e,t.__wrapped__||t,n,i,r,o);if(d!=U||!or.nodeClass&&(l(e)||l(t)))return!1;var g=!or.argsObject&&mt(e)?bi:e.constructor,m=!or.argsObject&&mt(t)?bi:t.constructor;if(g!=m&&!(At(g)&&g instanceof g&&At(m)&&m instanceof m))return!1}var v=!r;r||(r=a()),o||(o=a());for(var y=r.length;y--;)if(r[y]==e)return o[y]==t;var b=0;if(s=!0,r.push(e),o.push(t),p){if(y=e.length,b=t.length,s=b==e.length,!s&&!i)return s;for(;b--;){var w=y,x=t[b];if(i)for(;w--&&!(s=it(e[w],x,n,i,r,o)););else if(!(s=it(e[b],x,n,i,r,o)))break}return s}return xr(t,function(t,a,c){return Pi.call(c,a)?(b++,s=Pi.call(e,a)&&it(e[a],t,n,i,r,o)):void 0}),s&&!i&&xr(e,function(e,t,n){return Pi.call(n,t)?s=--b>-1:void 0}),v&&(h(r),h(o)),s}function ot(e,t,n,i,r){(cr(t)?Qt:_r)(t,function(t,o){var s,a,c=t,l=e[o];if(t&&((a=cr(t))||Cr(t))){for(var u=i.length;u--;)if(s=i[u]==t){l=r[u];break}if(!s){var h;n&&(c=n(l,t),(h="undefined"!=typeof c)&&(l=c)),h||(l=a?cr(l)?l:[]:Cr(l)?l:{}),i.push(t),r.push(l),h||ot(l,t,n,i,r)}}else n&&(c=n(l,t),"undefined"==typeof c&&(c=t)),"undefined"!=typeof c&&(l=c);e[o]=l})}function at(n,i,r){var s=-1,c=ft(),l=n?n.length:0,u=[],f=!i&&l>=x&&c===e,p=r||f?a():u;if(f){var g=o(p);g?(c=t,p=g):(f=!1,p=r?p:(h(p),u))}for(;++s<l;){var m=n[s],v=r?r(m,s,n):m;(i?!s||p[p.length-1]!==v:c(p,v)<0)&&((r||f)&&p.push(v),u.push(m))}return f?(h(p.array),d(p)):r&&h(p),u}function ct(e){return function(t,n,i){var r={};if(n=m.createCallback(n,i,3),cr(t))for(var o=-1,s=t.length;++o<s;){var a=t[o];e(r,a,n(a,o,t),t)}else yr(t,function(t,i,o){e(r,t,n(t,i,o),o)});return r}}function lt(e,t,n,i,r,o){var s=1&t,a=2&t,c=4&t,l=8&t,u=16&t,h=32&t,d=e;if(!a&&!At(e))throw new _i;u&&!n.length&&(t&=-17,u=n=!1),h&&!i.length&&(t&=-33,h=i=!1);var f=e&&e.__bindData__;if(f)return!s||1&f[1]||(f[4]=r),!s&&1&f[1]&&(t|=8),!c||4&f[1]||(f[5]=o),u&&Di.apply(f[2]||(f[2]=[]),n),h&&Di.apply(f[3]||(f[3]=[]),i),f[1]|=t,lt.apply(null,f);if(!s||a||c||h||!(or.fastBind||$i&&u))g=function(){var f=arguments,p=s?r:this;if((c||u||h)&&(f=er.call(f),u&&Wi.apply(f,n),h&&Di.apply(f,i),c&&f.length<o))return t|=16,lt(e,l?t:-4&t,f,null,r,o);if(a&&(e=p[d]),this instanceof g){p=ht(e.prototype);var m=e.apply(p,f);return Ot(m)?m:p}return e.apply(p,f)};else{if(u){var p=[r];Di.apply(p,n)}var g=u?$i.apply(e,p):$i.call(e,r)}return ar(g,er.call(arguments)),g}function ut(){Q.shadowedProps=j,Q.array=Q.bottom=Q.loop=Q.top="",Q.init="iterable",Q.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)Q[n]=e[n];var i=Q.args;Q.firstArg=/^[^,]+/.exec(i)[0];var r=mi("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+i+") {\n"+sr(Q)+"\n}");return r(et,q,Ei,Pi,b,mt,cr,Vt,Q.keys,Si,Z,rr,X,ki,Fi)}function ht(e){return Ot(e)?Bi(e):{}}function dt(e){return pr[e]}function ft(){var t=(t=m.indexOf)===wn?e:t;return t}function pt(e){var t,n;return!e||Fi.call(e)!=U||(t=e.constructor,At(t)&&!(t instanceof t))||!or.argsClass&&mt(e)||!or.nodeClass&&l(e)?!1:or.ownLast?(xr(e,function(e,t,i){return n=Pi.call(i,t),!1}),n!==!1):(xr(e,function(e,t){n=t}),"undefined"==typeof n||Pi.call(e,n))}function gt(e){return gr[e]}function mt(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Fi.call(e)==L||!1}function vt(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=t,t=!1),_(e,t,"function"==typeof n&&et(n,i,1))}function yt(e,t,n){return _(e,!0,"function"==typeof t&&et(t,n,1))}function bt(e,t,n){var i;return t=m.createCallback(t,n,3),_r(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i}function wt(e,t,n){var i;return t=m.createCallback(t,n,3),_t(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i}function xt(e,t,n){var i=[];xr(e,function(e,t){i.push(t,e)});var r=i.length;for(t=et(t,n,3);r--&&t(i[r--],i[r],e)!==!1;);return e}function _t(e,t,n){var i=ur(e),r=i.length;for(t=et(t,n,3);r--;){var o=i[r];if(t(e[o],o,e)===!1)break}return e}function Ct(e){var t=[];return xr(e,function(e,n){At(e)&&t.push(n)}),t.sort()}function Et(e,t){return e?Pi.call(e,t):!1}function St(e){for(var t=-1,n=ur(e),i=n.length,r={};++t<i;){var o=n[t];r[e[o]]=o}return r}function kt(e){return e===!0||e===!1||Fi.call(e)==F}function Tt(e){return e?"object"==typeof e&&Fi.call(e)==W:!1}function Ht(e){return e?1===e.nodeType:!1}function Mt(e){var t=!0;if(!e)return t;var n=Fi.call(e),i=e.length;return n==z||n==X||(or.argsClass?n==L:mt(e))||n==U&&"number"==typeof i&&At(e.splice)?!i:(_r(e,function(){return t=!1}),t)}function It(e,t,n,i){return it(e,t,"function"==typeof n&&et(n,i,2))}function Rt(e){return Gi(e)&&!Xi(parseFloat(e))}function At(e){return"function"==typeof e}function Ot(e){return!(!e||!Z[typeof e])}function Pt(e){return Dt(e)&&e!=+e}function Nt(e){return null===e}function Dt(e){return"number"==typeof e||Fi.call(e)==B}function jt(e){return e&&Z[typeof e]?Fi.call(e)==G:!1}function Vt(e){return"string"==typeof e||Fi.call(e)==X}function Lt(e){return"undefined"==typeof e}function zt(e){var t=arguments,n=2;if(!Ot(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var i=et(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(i=t[--n]);for(var r=er.call(arguments,1,n),o=-1,s=a(),c=a();++o<n;)ot(e,r[o],i,s,c);return h(s),h(c),e}function Ft(e,t,n){var i=ft(),r="function"==typeof t,o={};if(r)t=m.createCallback(t,n,3);else var s=nt(arguments,!0,!1,1);return xr(e,function(e,n,a){(r?!t(e,n,a):i(s,n)<0)&&(o[n]=e)}),o}function Wt(e){for(var t=-1,n=ur(e),i=n.length,r=di(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r}function qt(e,t,n){var i={};if("function"!=typeof t)for(var r=-1,o=nt(arguments,!0,!1,1),s=Ot(e)?o.length:0;++r<s;){var a=o[r];a in e&&(i[a]=e[a])}else t=m.createCallback(t,n,3),xr(e,function(e,n,r){t(e,n,r)&&(i[n]=e)});return i}function $t(e,t,n,i){var r=cr(e);if(t=et(t,i,4),null==n)if(r)n=[];else{var o=e&&e.constructor,s=o&&o.prototype;n=ht(s)}return(r?yr:_r)(e,function(e,i,r){return t(n,e,i,r)}),n}function Bt(e){for(var t=-1,n=ur(e),i=n.length,r=di(i);++t<i;)r[t]=e[n[t]];return r}function Ut(e){var t=arguments,n=-1,i=nt(t,!0,!1,1),r=t[2]&&t[2][t[1]]===e?1:i.length,o=di(r);for(or.unindexedChars&&Vt(e)&&(e=e.split(""));++n<r;)o[n]=e[i[n]];return o}function Gt(e,t,n){var i=-1,r=ft(),o=e?e.length:0,s=!1;return n=(0>n?Ji(0,o+n):n)||0,cr(e)?s=r(e,t,n)>-1:"number"==typeof o?s=(Vt(e)?e.indexOf(t,n):r(e,t,n))>-1:yr(e,function(e){return++i>=n?!(s=e===t):void 0}),s}function Xt(e,t,n){var i=!0;if(t=m.createCallback(t,n,3),cr(e))for(var r=-1,o=e.length;++r<o&&(i=!!t(e[r],r,e)););else yr(e,function(e,n,r){return i=!!t(e,n,r)});return i}function Yt(e,t,n){var i=[];if(t=m.createCallback(t,n,3),cr(e))for(var r=-1,o=e.length;++r<o;){var s=e[r];t(s,r,e)&&i.push(s)}else yr(e,function(e,n,r){t(e,n,r)&&i.push(e)});return i}function Jt(e,t,n){if(t=m.createCallback(t,n,3),!cr(e)){var i;return yr(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}for(var r=-1,o=e.length;++r<o;){var s=e[r];if(t(s,r,e))return s}}function Kt(e,t,n){var i;return t=m.createCallback(t,n,3),Zt(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}function Qt(e,t,n){if(t&&"undefined"==typeof n&&cr(e))for(var i=-1,r=e.length;++i<r&&t(e[i],i,e)!==!1;);else yr(e,t,n);return e}function Zt(e,t,n){var i=e,r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:et(t,n,3),cr(e))for(;r--&&t(e[r],r,e)!==!1;);else{if("number"!=typeof r){var o=ur(e);r=o.length}else or.unindexedChars&&Vt(e)&&(i=e.split(""));yr(e,function(e,n,s){return n=o?o[--r]:--r,t(i[n],n,s)})}return e}function en(e,t){var n=er.call(arguments,2),i=-1,r="function"==typeof t,o=e?e.length:0,s=di("number"==typeof o?o:0);return Qt(e,function(e){s[++i]=(r?t:e[t]).apply(e,n)}),s}function tn(e,t,n){var i=-1,r=e?e.length:0,o=di("number"==typeof r?r:0);if(t=m.createCallback(t,n,3),cr(e))for(;++i<r;)o[i]=t(e[i],i,e);else yr(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function nn(e,t,n){var r=-1/0,o=r;if(!t&&cr(e))for(var s=-1,a=e.length;++s<a;){var c=e[s];c>o&&(o=c)}else t=!t&&Vt(e)?i:m.createCallback(t,n,3),yr(e,function(e,n,i){var s=t(e,n,i);s>r&&(r=s,o=e)});return o}function rn(e,t,n){var r=1/0,o=r;if(!t&&cr(e))for(var s=-1,a=e.length;++s<a;){var c=e[s];o>c&&(o=c)}else t=!t&&Vt(e)?i:m.createCallback(t,n,3),yr(e,function(e,n,i){var s=t(e,n,i);r>s&&(r=s,o=e)});return o}function on(e,t,n,i){var r=arguments.length<3;if(t=et(t,i,4),cr(e)){var o=-1,s=e.length;for(r&&(n=e[++o]);++o<s;)n=t(n,e[o],o,e)}else yr(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)});return n}function sn(e,t,n,i){var r=arguments.length<3;return t=et(t,i,4),Zt(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function an(e,t,n){return t=m.createCallback(t,n,3),Yt(e,function(e,n,i){return!t(e,n,i)})}function cn(e,t,n){var i=e?e.length:0;if("number"!=typeof i?e=Bt(e):or.unindexedChars&&Vt(e)&&(e=e.split("")),null==t||n)return e?e[ti(i-1)]:g;var r=ln(e);return r.length=Ki(Ji(0,t),r.length),r}function ln(e){var t=-1,n=e?e.length:0,i=di("number"==typeof n?n:0);return Qt(e,function(e){var n=ti(++t);i[t]=i[n],i[n]=e}),i}function un(e){var t=e?e.length:0;return"number"==typeof t?t:ur(e).length}function hn(e,t,n){var i;if(t=m.createCallback(t,n,3),cr(e))for(var r=-1,o=e.length;++r<o&&!(i=t(e[r],r,e)););else yr(e,function(e,n,r){return!(i=t(e,n,r))});return!!i}function dn(e,t,n){var i=-1,o=e?e.length:0,s=di("number"==typeof o?o:0);for(t=m.createCallback(t,n,3),Qt(e,function(e,n,r){var o=s[++i]=c();o.criteria=t(e,n,r),o.index=i,o.value=e}),o=s.length,s.sort(r);o--;){var a=s[o];s[o]=a.value,d(a)}return s}function fn(e){return e&&"number"==typeof e.length?or.unindexedChars&&Vt(e)?e.split(""):f(e):Bt(e)}function pn(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}function gn(n){var i=-1,r=ft(),s=n?n.length:0,a=nt(arguments,!0,!0,1),c=[],l=s>=x&&r===e;if(l){var u=o(a);u?(r=t,a=u):l=!1}for(;++i<s;){var h=n[i];r(a,h)<0&&c.push(h)}return l&&d(a),c}function mn(e,t,n){var i=-1,r=e?e.length:0;for(t=m.createCallback(t,n,3);++i<r;)if(t(e[i],i,e))return i;return-1}function vn(e,t,n){var i=e?e.length:0;for(t=m.createCallback(t,n,3);i--;)if(t(e[i],i,e))return i;return-1}function yn(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=m.createCallback(t,n,3);++o<r&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[0]:g;return f(e,0,Ki(Ji(0,i),r))}function bn(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=i&&i[t]===e?null:t,t=!1),null!=n&&(e=tn(e,n,i)),nt(e,t)}function wn(t,n,i){if("number"==typeof i){var r=t?t.length:0;i=0>i?Ji(0,r+i):i||0}else if(i){var o=Mn(t,n);return t[o]===n?o:-1}return e(t,n,i)}function xn(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else i=null==t||n?1:t||i;return f(e,0,Ki(Ji(0,r-i),r))}function _n(n){for(var i=arguments,r=i.length,s=-1,c=a(),l=-1,u=ft(),f=n?n.length:0,p=[],g=a();++s<r;){var m=i[s];c[s]=u===e&&(m?m.length:0)>=x&&o(s?i[s]:g)}e:for(;++l<f;){var v=c[0];if(m=n[l],(v?t(v,m):u(g,m))<0){for(s=r,(v||g).push(m);--s;)if(v=c[s],(v?t(v,m):u(i[s],m))<0)continue e;p.push(m)}}for(;r--;)v=c[r],v&&d(v);return h(c),h(g),p}function Cn(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[r-1]:g;return f(e,Ji(0,r-i))}function En(e,t,n){var i=e?e.length:0;for("number"==typeof n&&(i=(0>n?Ji(0,i+n):Ki(n,i-1))+1);i--;)if(e[i]===t)return i;return-1}function Sn(e){for(var t=arguments,n=0,i=t.length,r=e?e.length:0;++n<i;)for(var o=-1,s=t[n];++o<r;)e[o]===s&&(zi.call(e,o--,1),r--);return e}function kn(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var i=-1,r=Ji(0,Mi((t-e)/(n||1))),o=di(r);++i<r;)o[i]=e,e+=n;return o}function Tn(e,t,n){var i=-1,r=e?e.length:0,o=[];for(t=m.createCallback(t,n,3);++i<r;){var s=e[i];t(s,i,e)&&(o.push(s),zi.call(e,i--,1),r--)}return o}function Hn(e,t,n){if("number"!=typeof t&&null!=t){var i=0,r=-1,o=e?e.length:0;for(t=m.createCallback(t,n,3);++r<o&&t(e[r],r,e);)i++}else i=null==t||n?1:Ji(0,t);return f(e,i)}function Mn(e,t,n,i){var r=0,o=e?e.length:r;for(n=n?m.createCallback(n,i,1):Qn,t=n(t);o>r;){var s=r+o>>>1;n(e[s])<t?r=s+1:o=s}return r}function In(){return at(nt(arguments,!0,!0))}function Rn(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=i&&i[t]===e?null:t,t=!1),null!=n&&(n=m.createCallback(n,i,3)),at(e,t,n)}function An(e){return gn(e,er.call(arguments,1))}function On(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?nn(Tr(e,"length")):0,i=di(0>n?0:n);++t<n;)i[t]=Tr(e,t);return i}function Pn(e,t){for(var n=-1,i=e?e.length:0,r={};++n<i;){var o=e[n];t?r[o]=t[n]:o&&(r[o[0]]=o[1])}return r}function Nn(e,t){if(!At(t))throw new _i;return function(){return--e<1?t.apply(this,arguments):void 0}}function Dn(e,t){return arguments.length>2?lt(e,17,er.call(arguments,2),null,t):lt(e,1,null,null,t)}function jn(e){for(var t=arguments.length>1?nt(arguments,!0,!1,1):Ct(e),n=-1,i=t.length;++n<i;){var r=t[n];e[r]=lt(e[r],1,null,null,e)}return e}function Vn(e,t){return arguments.length>2?lt(t,19,er.call(arguments,2),null,e):lt(t,3,null,null,e)}function Ln(){for(var e=arguments,t=e.length;t--;)if(!At(e[t]))throw new _i;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function zn(e,t,n){var i=typeof e;if(null==e||"function"==i)return et(e,t,n);if("object"!=i)return function(t){return t[e]};var r=ur(e),o=r[0],s=e[o];return 1!=r.length||s!==s||Ot(s)?function(t){for(var n=r.length,i=!1;n--&&(i=it(t[r[n]],e[r[n]],null,!0)););return i}:function(e){var t=e[o];return s===t&&(0!==s||1/s==1/t)}}function Fn(e,t){return t="number"==typeof t?t:+t||e.length,lt(e,4,null,null,null,t)}function Wn(e,t,n){var i,r,o,s,a,c,l,u=0,h=!1,d=!0;if(!At(e))throw new _i;if(t=Ji(0,t)||0,n===!0){var f=!0;d=!1}else Ot(n)&&(f=n.leading,h="maxWait"in n&&(Ji(t,n.maxWait)||0),d="trailing"in n?n.trailing:d);var p=function(){var n=t-(Ni()-s);if(0>=n){r&&Ii(r);var h=l;r=c=l=g,h&&(u=Ni(),o=e.apply(a,i))}else c=Li(p,n)},m=function(){c&&Ii(c),r=c=l=g,(d||h!==t)&&(u=Ni(),o=e.apply(a,i))};return function(){if(i=arguments,s=Ni(),a=this,l=d&&(c||!f),h===!1)var n=f&&!c;else{r||f||(u=s);var g=h-(s-u);0>=g?(r&&(r=Ii(r)),u=s,o=e.apply(a,i)):r||(r=Li(m,g))}return c||t===h||(c=Li(p,t)),n&&(o=e.apply(a,i)),o}}function qn(e){if(!At(e))throw new _i;var t=er.call(arguments,1);return Li(function(){e.apply(g,t)},1)}function $n(e,t){if(!At(e))throw new _i;var n=er.call(arguments,2);return Li(function(){e.apply(g,n)},t)}function Bn(e,t){if(!At(e))throw new _i;var n=function(){var i=n.cache,r=t?t.apply(this,arguments):w+arguments[0];return Pi.call(i,r)?i[r]:i[r]=e.apply(this,arguments)};return n.cache={},n}function Un(e){var t,n;if(!At(e))throw new _i;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Gn(e){return lt(e,16,er.call(arguments,1))}function Xn(e){return lt(e,32,null,er.call(arguments,1))}function Yn(e,t,n){var i=!0,r=!0;if(!At(e))throw new _i;n===!1?i=!1:Ot(n)&&(i="leading"in n?n.leading:i,r="trailing"in n?n.trailing:r),J.leading=i,J.maxWait=t,J.trailing=r;var o=Wn(e,t,J);return o}function Jn(e,t){if(!At(t))throw new _i;return function(){var n=[e];return Di.apply(n,arguments),t.apply(this,n)}}function Kn(e){return null==e?"":xi(e).replace(vr,dt)}function Qn(e){return e}function Zn(e,t){var n=e,i=!t||At(n);t||(n=v,t=e,e=m),Qt(Ct(t),function(r){var o=e[r]=t[r];i&&(n.prototype[r]=function(){var t=this.__wrapped__,i=[t];Di.apply(i,arguments);var r=o.apply(e,i);return t&&"object"==typeof t&&t===r?this:(r=new n(r),r.__chain__=this.__chain__,r)})})}function ei(){return n._=Ti,this}function ti(e,t,n){var i=null==e,r=null==t;null==n&&("boolean"==typeof e&&r?(n=e,e=1):r||"boolean"!=typeof t||(n=t,r=!0)),i&&r&&(t=1),e=+e||0,r?(t=e,e=0):t=+t||0;var o=Zi();return n||e%1||t%1?Ki(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t):e+Ri(o*(t-e+1))}function ni(e,t){if(e){var n=e[t];return At(n)?e[t]():n}}function ii(e,t,n){var i=m.templateSettings;e||(e=""),n=wr({},n,i);var r,o=wr({},n.imports,i.imports),a=ur(o),c=Bt(o),l=0,u=n.interpolate||O,h="__p += '",d=wi((n.escape||O).source+"|"+u.source+"|"+(u===R?H:O).source+"|"+(n.evaluate||O).source+"|$","g");e.replace(d,function(t,n,i,o,a,c){return i||(i=o),h+=e.slice(l,c).replace(N,s),n&&(h+="' +\n__e("+n+") +\n'"),a&&(r=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=c+t.length,t}),h+="';\n";var f=n.variable,p=f;p||(f="obj",h="with ("+f+") {\n"+h+"\n}\n"),h=(r?h.replace(E,""):h).replace(S,"$1").replace(T,"$1;"),h="function("+f+") {\n"+(p?"":f+" || ("+f+" = {});\n")+"var __t, __p = '', __e = _.escape"+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+V++ +"]")+"\n*/";try{var y=mi(a,"return "+h+v).apply(g,c)}catch(b){throw b.source=h,b}return t?y(t):(y.source=h,y)}function ri(e,t,n){e=(e=+e)>-1?e:0;var i=-1,r=di(e);for(t=et(t,n,1);++i<e;)r[i]=t(i);return r}function oi(e){return null==e?"":xi(e).replace(mr,gt)}function si(e){var t=++y;return xi(null==e?"":e)+t}function ai(e){return e=new v(e),e.__chain__=!0,e}function ci(e,t){return t(e),e}function li(){return this.__chain__=!0,this}function ui(){return xi(this.__wrapped__)}function hi(){return this.__wrapped__}n=n?st.defaults(tt.Object(),n,st.pick(tt,D)):tt;var di=n.Array,fi=n.Boolean,pi=n.Date,gi=n.Error,mi=n.Function,vi=n.Math,yi=n.Number,bi=n.Object,wi=n.RegExp,xi=n.String,_i=n.TypeError,Ci=[],Ei=gi.prototype,Si=bi.prototype,ki=xi.prototype,Ti=n._,Hi=wi("^"+xi(Si.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Mi=vi.ceil,Ii=n.clearTimeout,Ri=vi.floor,Ai=mi.prototype.toString,Oi=Hi.test(Oi=bi.getPrototypeOf)&&Oi,Pi=Si.hasOwnProperty,Ni=Hi.test(Ni=pi.now)&&Ni||function(){return+new pi},Di=Ci.push,ji=Si.propertyIsEnumerable,Vi=n.setImmediate,Li=n.setTimeout,zi=Ci.splice,Fi=Si.toString,Wi=Ci.unshift,qi=function(){try{var e={},t=Hi.test(t=bi.defineProperty)&&t,n=t(e,e,e)&&t}catch(i){}return n}(),$i=Hi.test($i=Fi.bind)&&$i,Bi=Hi.test(Bi=bi.create)&&Bi,Ui=Hi.test(Ui=di.isArray)&&Ui,Gi=n.isFinite,Xi=n.isNaN,Yi=Hi.test(Yi=bi.keys)&&Yi,Ji=vi.max,Ki=vi.min,Qi=n.parseInt,Zi=vi.random,er=Ci.slice,tr=Hi.test(n.attachEvent),nr=$i&&!/\n|true/.test($i+tr),ir={};ir[z]=di,ir[F]=fi,ir[W]=pi,ir[$]=mi,ir[U]=bi,ir[B]=yi,ir[G]=wi,ir[X]=xi;var rr={};rr[z]=rr[W]=rr[B]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},rr[F]=rr[X]={constructor:!0,toString:!0,valueOf:!0},rr[q]=rr[$]=rr[G]={constructor:!0,toString:!0},rr[U]={constructor:!0},function(){for(var e=j.length;e--;){var t=j[e];for(var n in rr)Pi.call(rr,n)&&!Pi.call(rr[n],t)&&(rr[n][t]=!1)}}(),v.prototype=m.prototype;var or=m.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},i=[];e.prototype={valueOf:1,y:1};for(var r in new e)i.push(r);for(r in arguments);or.argsClass=Fi.call(arguments)==L,or.argsObject=arguments.constructor==bi&&!(arguments instanceof di),or.enumErrorProps=ji.call(Ei,"message")||ji.call(Ei,"name"),or.enumPrototypes=ji.call(e,"prototype"),or.fastBind=$i&&!nr,or.funcDecomp=!Hi.test(n.WinRTError)&&P.test(p),or.funcNames="string"==typeof mi.name,or.nonEnumArgs=0!=r,or.nonEnumShadows=!/valueOf/.test(i),or.ownLast="x"!=i[0],or.spliceObjects=(Ci.splice.call(t,0,1),!t[0]),or.unindexedChars="xx"!="x"[0]+bi("x")[0];try{or.nodeClass=!(Fi.call(document)==U&&!({toString:0}+""))}catch(o){or.nodeClass=!0}}(1),m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:R,variable:"",imports:{_:m}};var sr=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",or.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):or.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),or.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),or.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");
var n=[];if(or.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),or.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",or.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||or.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"};Bi||(ht=function(e){if(Ot(e)){u.prototype=e;var t=new u;u.prototype=null}return t||{}});var ar=qi?function(e,t){K.value=t,qi(e,"__bindData__",K)}:u;or.argsClass||(mt=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Pi.call(e,"callee")||!1});var cr=Ui||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Fi.call(e)==z||!1},lr=ut({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),ur=Yi?function(e){return Ot(e)?or.enumPrototypes&&"function"==typeof e||or.nonEnumArgs&&e.length&&mt(e)?lr(e):Yi(e):[]}:lr,hr={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:ur,loop:"if (callback(iterable[index], index, collection) === false) return result"},dr={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:ur,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},fr={top:"if (!objectTypes[typeof iterable]) return result;\n"+hr.top,array:!1},pr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gr=St(pr),mr=wi("("+ur(gr).join("|")+")","g"),vr=wi("["+ur(pr).join("")+"]","g"),yr=ut(hr),br=ut(dr,{top:dr.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),wr=ut(dr),xr=ut(hr,fr,{useHas:!1}),_r=ut(hr,fr);At(/x/)&&(At=function(e){return"function"==typeof e&&Fi.call(e)==$});var Cr=Oi?function(e){if(!e||Fi.call(e)!=U||!or.argsClass&&mt(e))return!1;var t=e.valueOf,n="function"==typeof t&&(n=Oi(t))&&Oi(n);return n?e==n||Oi(e)==n:pt(e)}:pt,Er=ct(function(e,t,n){Pi.call(e,n)?e[n]++:e[n]=1}),Sr=ct(function(e,t,n){(Pi.call(e,n)?e[n]:e[n]=[]).push(t)}),kr=ct(function(e,t,n){e[n]=t}),Tr=tn,Hr=Yt;nr&&rt&&"function"==typeof Vi&&(qn=function(e){if(!At(e))throw new _i;return Vi.apply(n,arguments)});var Mr=8==Qi(C+"08")?Qi:function(e,t){return Qi(Vt(e)?e.replace(A,""):e,t||0)};return m.after=Nn,m.assign=br,m.at=Ut,m.bind=Dn,m.bindAll=jn,m.bindKey=Vn,m.chain=ai,m.compact=pn,m.compose=Ln,m.countBy=Er,m.createCallback=zn,m.curry=Fn,m.debounce=Wn,m.defaults=wr,m.defer=qn,m.delay=$n,m.difference=gn,m.filter=Yt,m.flatten=bn,m.forEach=Qt,m.forEachRight=Zt,m.forIn=xr,m.forInRight=xt,m.forOwn=_r,m.forOwnRight=_t,m.functions=Ct,m.groupBy=Sr,m.indexBy=kr,m.initial=xn,m.intersection=_n,m.invert=St,m.invoke=en,m.keys=ur,m.map=tn,m.max=nn,m.memoize=Bn,m.merge=zt,m.min=rn,m.omit=Ft,m.once=Un,m.pairs=Wt,m.partial=Gn,m.partialRight=Xn,m.pick=qt,m.pluck=Tr,m.pull=Sn,m.range=kn,m.reject=an,m.remove=Tn,m.rest=Hn,m.shuffle=ln,m.sortBy=dn,m.tap=ci,m.throttle=Yn,m.times=ri,m.toArray=fn,m.transform=$t,m.union=In,m.uniq=Rn,m.values=Bt,m.where=Hr,m.without=An,m.wrap=Jn,m.zip=On,m.zipObject=Pn,m.collect=tn,m.drop=Hn,m.each=Qt,m.eachRight=Zt,m.extend=br,m.methods=Ct,m.object=Pn,m.select=Yt,m.tail=Hn,m.unique=Rn,m.unzip=On,Zn(m),m.clone=vt,m.cloneDeep=yt,m.contains=Gt,m.escape=Kn,m.every=Xt,m.find=Jt,m.findIndex=mn,m.findKey=bt,m.findLast=Kt,m.findLastIndex=vn,m.findLastKey=wt,m.has=Et,m.identity=Qn,m.indexOf=wn,m.isArguments=mt,m.isArray=cr,m.isBoolean=kt,m.isDate=Tt,m.isElement=Ht,m.isEmpty=Mt,m.isEqual=It,m.isFinite=Rt,m.isFunction=At,m.isNaN=Pt,m.isNull=Nt,m.isNumber=Dt,m.isObject=Ot,m.isPlainObject=Cr,m.isRegExp=jt,m.isString=Vt,m.isUndefined=Lt,m.lastIndexOf=En,m.mixin=Zn,m.noConflict=ei,m.parseInt=Mr,m.random=ti,m.reduce=on,m.reduceRight=sn,m.result=ni,m.runInContext=p,m.size=un,m.some=hn,m.sortedIndex=Mn,m.template=ii,m.unescape=oi,m.uniqueId=si,m.all=Xt,m.any=hn,m.detect=Jt,m.findWhere=Jt,m.foldl=on,m.foldr=sn,m.include=Gt,m.inject=on,_r(m,function(e,t){m.prototype[t]||(m.prototype[t]=function(){var t=[this.__wrapped__],n=this.__chain__;Di.apply(t,arguments);var i=e.apply(m,t);return n?new v(i,n):i})}),m.first=yn,m.last=Cn,m.sample=cn,m.take=yn,m.head=yn,_r(m,function(e,t){var n="sample"!==t;m.prototype[t]||(m.prototype[t]=function(t,i){var r=this.__chain__,o=e(this.__wrapped__,t,i);return r||null!=t&&(!i||n&&"function"==typeof t)?new v(o,r):o})}),m.VERSION="2.2.1",m.prototype.chain=li,m.prototype.toString=ui,m.prototype.value=hi,m.prototype.valueOf=hi,yr(["join","pop","shift"],function(e){var t=Ci[e];m.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new v(n,e):n}}),yr(["push","reverse","sort","unshift"],function(e){var t=Ci[e];m.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),yr(["concat","slice","splice"],function(e){var t=Ci[e];m.prototype[e]=function(){return new v(t.apply(this.__wrapped__,arguments),this.__chain__)}}),or.spliceObjects||yr(["pop","shift","splice"],function(e){var t=Ci[e],n="splice"==e;m.prototype[e]=function(){var e=this.__chain__,i=this.__wrapped__,r=t.apply(i,arguments);return 0===i.length&&delete i[0],e||n?new v(r,e):r}}),m}var g,m=[],v=[],y=0,b={},w=+new Date+"",x=75,_=40,C=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",E=/\b__p \+= '';/g,S=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,M=/\w*$/,I=/^function[ \n\r\t]+\w/,R=/<%=([\s\S]+?)%>/g,A=RegExp("^["+C+"]*0+(?=.$)"),O=/($^)/,P=/\bthis\b/,N=/['\n\r\t\u2028\u2029\\]/g,D=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],j=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],V=0,L="[object Arguments]",z="[object Array]",F="[object Boolean]",W="[object Date]",q="[object Error]",$="[object Function]",B="[object Number]",U="[object Object]",G="[object RegExp]",X="[object String]",Y={};Y[$]=!1,Y[L]=Y[z]=Y[F]=Y[W]=Y[B]=Y[U]=Y[G]=Y[X]=!0;var J={leading:!1,maxWait:0,trailing:!1},K={configurable:!1,enumerable:!1,value:null,writable:!1},Q={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},Z={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},et={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},tt=Z[typeof window]&&window||this,nt=Z[typeof exports]&&exports&&!exports.nodeType&&exports,it=Z[typeof module]&&module&&!module.nodeType&&module,rt=it&&it.exports===nt&&nt,ot=Z[typeof global]&&global;!ot||ot.global!==ot&&ot.window!==ot||(tt=ot);var st=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(tt._=st,define("lodash",[],function(){return st})):nt&&it?rt?(it.exports=st)._=st:nt._=st:tt._=st}.call(this),function(e,t){function n(e){var t=e.length,n=B.type(e);return B.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=it[e]={};return B.each(e.match(G)||[],function(e,n){t[n]=!0}),t}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=B.expando+Math.random()}function o(e,n,i){var r;if(i===t&&1===e.nodeType)if(r="data-"+n.replace(at,"-$1").toLowerCase(),i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:st.test(i)?JSON.parse(i):i}catch(o){}rt.set(e,n,i)}else i=t;return i}function s(){return!0}function a(){return!1}function c(){try{return R.activeElement}catch(e){}}function l(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e,t,n){if(B.isFunction(t))return B.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return B.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(vt.test(t))return B.filter(t,e,n);t=B.filter(t,e)}return B.grep(e,function(e){return F.call(t,e)>=0!==n})}function h(e,t){return B.nodeName(e,"table")&&B.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Ht.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function p(e,t){for(var n=e.length,i=0;n>i;i++)ot.set(e[i],"globalEval",!t||ot.get(t[i],"globalEval"))}function g(e,t){var n,i,r,o,s,a,c,l;if(1===t.nodeType){if(ot.hasData(e)&&(o=ot.access(e),s=ot.set(t,o),l=o.events)){delete s.handle,s.events={};for(r in l)for(n=0,i=l[r].length;i>n;n++)B.event.add(t,r,l[r][n])}rt.hasData(e)&&(a=rt.access(e),c=B.extend({},a),rt.set(t,c))}}function m(e,n){var i=e.getElementsByTagName?e.getElementsByTagName(n||"*"):e.querySelectorAll?e.querySelectorAll(n||"*"):[];return n===t||n&&B.nodeName(e,n)?B.merge([e],i):i}function v(e,t){var n=t.nodeName.toLowerCase();"input"===n&&St.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function y(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=Wt.length;r--;)if(t=Wt[r]+n,t in e)return t;return i}function b(e,t){return e=t||e,"none"===B.css(e,"display")||!B.contains(e.ownerDocument,e)}function w(t){return e.getComputedStyle(t,null)}function x(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=ot.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&b(i)&&(o[s]=ot.access(i,"olddisplay",S(i.nodeName)))):o[s]||(r=b(i),(n&&"none"!==n||!r)&&ot.set(i,"olddisplay",r?n:B.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function _(e,t,n){var i=Nt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function C(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=B.css(e,n+Ft[o],!0,r)),i?("content"===n&&(s-=B.css(e,"padding"+Ft[o],!0,r)),"margin"!==n&&(s-=B.css(e,"border"+Ft[o]+"Width",!0,r))):(s+=B.css(e,"padding"+Ft[o],!0,r),"padding"!==n&&(s+=B.css(e,"border"+Ft[o]+"Width",!0,r)));return s}function E(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=w(e),s=B.support.boxSizing&&"border-box"===B.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=Rt(e,t,o),(0>r||null==r)&&(r=e.style[t]),Dt.test(r))return r;i=s&&(B.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+C(e,t,n||(s?"border":"content"),i,o)+"px"}function S(e){var t=R,n=Vt[e];return n||(n=k(e,t),"none"!==n&&n||(At=(At||B("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(At[0].contentWindow||At[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=k(e,t),At.detach()),Vt[e]=n),n}function k(e,t){var n=B(t.createElement(e)).appendTo(t.body),i=B.css(n[0],"display");return n.remove(),i}function T(e,t,n,i){var r;if(B.isArray(t))B.each(t,function(t,r){n||$t.test(e)?i(e,r):T(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==B.type(t))i(e,t);else for(r in t)T(e+"["+r+"]",t[r],n,i)}var H,M,I=typeof t,R=(e.location,e.document),A=R.documentElement,O=e.jQuery,P=e.$,N={},D=[],j="2.0.3 -sizzle,-wrap,-ajax,-ajax/script,-ajax/jsonp,-ajax/xhr,-effects,-offset,-dimensions,-deprecated",V=D.concat,L=D.push,z=D.slice,F=D.indexOf,W=N.toString,q=N.hasOwnProperty,$=j.trim,B=function(e,t){return new B.fn.init(e,t,H)},U=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,G=/\S+/g,X=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Y=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,J=/^-ms-/,K=/-([\da-z])/gi,Q=function(e,t){return t.toUpperCase()},Z=function(){R.removeEventListener("DOMContentLoaded",Z,!1),e.removeEventListener("load",Z,!1),B.ready()};B.fn=B.prototype={jquery:j,constructor:B,init:function(e,n,i){var r,o;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:X.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1]){if(n=n instanceof B?n[0]:n,B.merge(this,B.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:R,!0)),Y.test(r[1])&&B.isPlainObject(n))for(r in n)B.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return o=R.getElementById(r[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=R,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):B.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),B.makeArray(e,this))},selector:"",length:0,toArray:function(){return z.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=B.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return B.each(this,e,t)},ready:function(e){return B.ready.promise().done(e),this},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(B.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:L,sort:[].sort,splice:[].splice},B.fn.init.prototype=B.fn,B.extend=B.fn.extend=function(){var e,n,i,r,o,s,a=arguments[0]||{},c=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},c=2),"object"==typeof a||B.isFunction(a)||(a={}),l===c&&(a=this,--c);l>c;c++)if(null!=(e=arguments[c]))for(n in e)i=a[n],r=e[n],a!==r&&(u&&r&&(B.isPlainObject(r)||(o=B.isArray(r)))?(o?(o=!1,s=i&&B.isArray(i)?i:[]):s=i&&B.isPlainObject(i)?i:{},a[n]=B.extend(u,s,r)):r!==t&&(a[n]=r));return a},B.extend({expando:"jQuery"+(j+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===B&&(e.$=P),t&&e.jQuery===B&&(e.jQuery=O),B},isReady:!1,readyWait:1,holdReady:function(e){e?B.readyWait++:B.ready(!0)},ready:function(e){(e===!0?--B.readyWait:B.isReady)||(B.isReady=!0,e!==!0&&--B.readyWait>0||(M.resolveWith(R,[B]),B.fn.trigger&&B(R).trigger("ready").off("ready")))},isFunction:function(e){return"function"===B.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?N[W.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==B.type(e)||e.nodeType||B.isWindow(e))return!1;try{if(e.constructor&&!q.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||R;var i=Y.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=B.buildFragment([e],t,r),r&&B(r).remove(),B.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var n,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,n=i.parseFromString(e,"text/xml")}catch(r){n=t}return(!n||n.getElementsByTagName("parsererror").length)&&B.error("Invalid XML: "+e),n},noop:function(){},globalEval:function(e){var t,n=eval;e=B.trim(e),e&&(1===e.indexOf("use strict")?(t=R.createElement("script"),t.text=e,R.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(J,"ms-").replace(K,Q)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":$.call(e)},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?B.merge(i,"string"==typeof e?[e]:e):L.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:F.call(t,e,n)},merge:function(e,n){var i=n.length,r=e.length,o=0;if("number"==typeof i)for(;i>o;o++)e[r++]=n[o];else for(;n[o]!==t;)e[r++]=n[o++];return e.length=r,e},grep:function(e,t,n){var i,r=[],o=0,s=e.length;for(n=!!n;s>o;o++)i=!!t(e[o],o),n!==i&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),c=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&(c[c.length]=r);else for(o in e)r=t(e[o],o,i),null!=r&&(c[c.length]=r);return V.apply([],c)},guid:1,proxy:function(e,n){var i,r,o;return"string"==typeof n&&(i=e[n],n=e,e=i),B.isFunction(e)?(r=z.call(arguments,2),o=function(){return e.apply(n||this,r.concat(z.call(arguments)))},o.guid=e.guid=e.guid||B.guid++,o):t},access:function(e,n,i,r,o,s,a){var c=0,l=e.length,u=null==i;if("object"===B.type(i)){o=!0;for(c in i)B.access(e,n,c,i[c],!0,s,a)}else if(r!==t&&(o=!0,B.isFunction(r)||(a=!0),u&&(a?(n.call(e,r),n=null):(u=n,n=function(e,t,n){return u.call(B(e),n)})),n))for(;l>c;c++)n(e[c],i,a?r:r.call(e[c],c,n(e[c],i)));return o?e:u?n.call(e):l?n(e[0],i):s},now:Date.now,swap:function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r}}),B.ready.promise=function(t){return M||(M=B.Deferred(),"complete"===R.readyState?setTimeout(B.ready):(R.addEventListener("DOMContentLoaded",Z,!1),e.addEventListener("load",Z,!1))),M.promise(t)},B.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){N["[object "+t+"]"]=t.toLowerCase()}),H=B(R);var et,tt=A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector,nt=function(e,t){if(e===t)return et=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n?e===R||B.contains(R,e)?-1:t===R||B.contains(R,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1};B.extend({find:function(e,t,n,i){var r,o,s=0;if(n=n||[],t=t||R,!e||"string"!=typeof e)return n;if(1!==(o=t.nodeType)&&9!==o)return[];if(i)for(;r=i[s++];)B.find.matchesSelector(r,e)&&n.push(r);else B.merge(n,t.querySelectorAll(e));return n},unique:function(e){var t,n=[],i=0,r=0;if(et=!1,e.sort(nt),et){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},text:function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r)return e.textContent;if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=B.text(t);return n},contains:function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!n.contains(i))},isXMLDoc:function(e){return"HTML"!==(e.ownerDocument||e).documentElement.nodeName},expr:{attrHandle:{},match:{bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]/}}}),B.extend(B.find,{matches:function(e,t){return B.find(e,null,null,t)},matchesSelector:function(e,t){return tt.call(e,t)},attr:function(e,t){return e.getAttribute(t)}});var it={};B.Callbacks=function(e){e="string"==typeof e?it[e]||i(e):B.extend({},e);var n,r,o,s,a,c,l=[],u=!e.once&&[],h=function(t){for(n=e.memory&&t,r=!0,c=s||0,s=0,a=l.length,o=!0;l&&a>c;c++)if(l[c].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}o=!1,l&&(u?u.length&&h(u.shift()):n?l=[]:d.disable())},d={add:function(){if(l){var t=l.length;!function i(t){B.each(t,function(t,n){var r=B.type(n);"function"===r?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),o?a=l.length:n&&(s=t,h(n))}return this},remove:function(){return l&&B.each(arguments,function(e,t){for(var n;(n=B.inArray(t,l,n))>-1;)l.splice(n,1),o&&(a>=n&&a--,c>=n&&c--)}),this},has:function(e){return e?B.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=n=t,this},disabled:function(){return!l},lock:function(){return u=t,n||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||r&&!u||(t=t||[],t=[e,t.slice?t.slice():t],o?u.push(t):h(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},B.extend({Deferred:function(e){var t=[["resolve","done",B.Callbacks("once memory"),"resolved"],["reject","fail",B.Callbacks("once memory"),"rejected"],["notify","progress",B.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return B.Deferred(function(n){B.each(t,function(t,o){var s=o[0],a=B.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&B.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?B.extend(e,i):i}},r={};return i.pipe=i.then,B.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=z.call(arguments),s=o.length,a=1!==s||e&&B.isFunction(e.promise)?s:0,c=1===a?e:B.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?z.call(arguments):r,i===t?c.notifyWith(n,i):--a||c.resolveWith(n,i)}};if(s>1)for(t=Array(s),n=Array(s),i=Array(s);s>r;r++)o[r]&&B.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(c.reject).progress(l(r,n,t)):--a;return a||c.resolveWith(i,o),c.promise()}}),B.support=function(t){var n=R.createElement("input"),i=R.createDocumentFragment(),r=R.createElement("div"),o=R.createElement("select"),s=o.appendChild(R.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=s.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!s.disabled,n=R.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),t.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===r.style.backgroundClip,B(function(){var n,i,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=R.getElementsByTagName("body")[0];s&&(n=R.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",B.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===r.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(r,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(R.createElement("div")),i.style.cssText=r.style.cssText=o,i.style.marginRight=i.style.width="0",r.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),s.removeChild(n))}),t):t}({});var rt,ot,st=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,at=/([A-Z])/g;r.uid=1,r.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},r.prototype={key:function(e){if(!r.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=r.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,B.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(B.isEmptyObject(o))B.extend(this.cache[r],t);else for(i in t)o[i]=t[i];return o},get:function(e,n){var i=this.cache[this.key(e)];return n===t?i:i[n]},access:function(e,n,i){var r;return n===t||n&&"string"==typeof n&&i===t?(r=this.get(e,n),r!==t?r:this.get(e,B.camelCase(n))):(this.set(e,n,i),i!==t?i:n)},remove:function(e,n){var i,r,o,s=this.key(e),a=this.cache[s];if(n===t)this.cache[s]={};else{B.isArray(n)?r=n.concat(n.map(B.camelCase)):(o=B.camelCase(n),n in a?r=[n,o]:(r=o,r=r in a?[r]:r.match(G)||[])),i=r.length;for(;i--;)delete a[r[i]]}},hasData:function(e){return!B.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},rt=new r,ot=new r,B.extend({acceptData:r.accepts,hasData:function(e){return rt.hasData(e)||ot.hasData(e)},data:function(e,t,n){return rt.access(e,t,n)},removeData:function(e,t){rt.remove(e,t)},_data:function(e,t,n){return ot.access(e,t,n)},_removeData:function(e,t){ot.remove(e,t)}}),B.fn.extend({data:function(e,n){var i,r,s=this[0],a=0,c=null;if(e===t){if(this.length&&(c=rt.get(s),1===s.nodeType&&!ot.get(s,"hasDataAttrs"))){for(i=s.attributes;i.length>a;a++)r=i[a].name,0===r.indexOf("data-")&&(r=B.camelCase(r.slice(5)),o(s,r,c[r]));ot.set(s,"hasDataAttrs",!0)}return c}return"object"==typeof e?this.each(function(){rt.set(this,e)}):B.access(this,function(n){var i,r=B.camelCase(e);if(s&&n===t){if(i=rt.get(s,e),i!==t)return i;if(i=rt.get(s,r),i!==t)return i;if(i=o(s,r,t),i!==t)return i}else this.each(function(){var i=rt.get(this,r);rt.set(this,r,n),-1!==e.indexOf("-")&&i!==t&&rt.set(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){rt.remove(this,e)})}}),B.extend({queue:function(e,n,i){var r;return e?(n=(n||"fx")+"queue",r=ot.get(e,n),i&&(!r||B.isArray(i)?r=ot.access(e,n,B.makeArray(i)):r.push(i)),r||[]):t},dequeue:function(e,t){t=t||"fx";var n=B.queue(e,t),i=n.length,r=n.shift(),o=B._queueHooks(e,t),s=function(){B.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ot.get(e,n)||ot.access(e,n,{empty:B.Callbacks("once memory").add(function(){ot.remove(e,[t+"queue",n])})})}}),B.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),i>arguments.length?B.queue(this[0],e):n===t?this:this.each(function(){var t=B.queue(this,e,n);B._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&B.dequeue(this,e)})},dequeue:function(e){return this.each(function(){B.dequeue(this,e)})},delay:function(e,t){return e=B.fx?B.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,o=B.Deferred(),s=this,a=this.length,c=function(){--r||o.resolveWith(s,[s])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)i=ot.get(s[a],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(c));return c(),o.promise(n)}});var ct,lt,ut=/[\t\r\n\f]/g,ht=/\r/g,dt=/^(?:input|select|textarea|button)$/i;B.fn.extend({attr:function(e,t){return B.access(this,B.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){B.removeAttr(this,e)})},prop:function(e,t){return B.access(this,B.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[B.propFix[e]||e]})},addClass:function(e){var t,n,i,r,o,s=0,a=this.length,c="string"==typeof e&&e;if(B.isFunction(e))return this.each(function(t){B(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(G)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ut," "):" ")){for(o=0;r=t[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=B.trim(i)}return this},removeClass:function(e){var t,n,i,r,o,s=0,a=this.length,c=0===arguments.length||"string"==typeof e&&e;if(B.isFunction(e))return this.each(function(t){B(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(G)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ut," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=e?B.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):B.isFunction(e)?this.each(function(n){B(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=B(this),o=e.match(G)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===I||"boolean"===n)&&(this.className&&ot.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ot.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ut," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,o=this[0];return arguments.length?(r=B.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=r?e.call(this,i,B(this).val()):e,null==o?o="":"number"==typeof o?o+="":B.isArray(o)&&(o=B.map(o,function(e){return null==e?"":e+""})),n=B.valHooks[this.type]||B.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))})):o?(n=B.valHooks[o.type]||B.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(ht,""):null==i?"":i)):void 0}}),B.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,c=0>r?a:o?r:0;a>c;c++)if(n=i[c],!(!n.selected&&c!==r||(B.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&B.nodeName(n.parentNode,"optgroup"))){if(t=B(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=B.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=B.inArray(B(i).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,i){var r,o,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?typeof e.getAttribute===I?B.prop(e,n,i):(1===s&&B.isXMLDoc(e)||(n=n.toLowerCase(),r=B.attrHooks[n]||(B.expr.match.bool.test(n)?lt:ct)),i===t?r&&"get"in r&&null!==(o=r.get(e,n))?o:(o=B.find.attr(e,n),null==o?t:o):null!==i?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):(B.removeAttr(e,n),t)):void 0
},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(G);if(o&&1===e.nodeType)for(;n=o[r++];)i=B.propFix[n]||n,B.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!B.support.radioValue&&"radio"===t&&B.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,i){var r,o,s,a=e.nodeType;return e&&3!==a&&8!==a&&2!==a?(s=1!==a||!B.isXMLDoc(e),s&&(n=B.propFix[n]||n,o=B.propHooks[n]),i!==t?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]):void 0},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||dt.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),lt={set:function(e,t,n){return t===!1?B.removeAttr(e,n):e.setAttribute(n,n),n}},B.each(B.expr.match.bool.source.match(/\w+/g),function(e,n){var i=B.expr.attrHandle[n]||B.find.attr;B.expr.attrHandle[n]=function(e,n,r){var o=B.expr.attrHandle[n],s=r?t:(B.expr.attrHandle[n]=t)!=i(e,n,r)?n.toLowerCase():null;return B.expr.attrHandle[n]=o,s}}),B.support.optSelected||(B.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),B.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){B.propFix[this.toLowerCase()]=this}),B.each(["radio","checkbox"],function(){B.valHooks[this]={set:function(e,n){return B.isArray(n)?e.checked=B.inArray(B(e).val(),n)>=0:t}},B.support.checkOn||(B.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ft=/^key/,pt=/^(?:mouse|contextmenu)|click/,gt=/^(?:focusinfocus|focusoutblur)$/,mt=/^([^.]*)(?:\.(.+)|)$/;B.event={global:{},add:function(e,n,i,r,o){var s,a,c,l,u,h,d,f,p,g,m,v=ot.get(e);if(v){for(i.handler&&(s=i,i=s.handler,o=s.selector),i.guid||(i.guid=B.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(e){return typeof B===I||e&&B.event.triggered===e.type?t:B.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=(n||"").match(G)||[""],u=n.length;u--;)c=mt.exec(n[u])||[],p=m=c[1],g=(c[2]||"").split(".").sort(),p&&(d=B.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=B.event.special[p]||{},h=B.extend({type:p,origType:m,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&B.expr.match.needsContext.test(o),namespace:g.join(".")},s),(f=l[p])||(f=l[p]=[],f.delegateCount=0,d.setup&&d.setup.call(e,r,g,a)!==!1||e.addEventListener&&e.addEventListener(p,a,!1)),d.add&&(d.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),o?f.splice(f.delegateCount++,0,h):f.push(h),B.event.global[p]=!0);e=null}},remove:function(e,t,n,i,r){var o,s,a,c,l,u,h,d,f,p,g,m=ot.hasData(e)&&ot.get(e);if(m&&(c=m.events)){for(t=(t||"").match(G)||[""],l=t.length;l--;)if(a=mt.exec(t[l])||[],f=g=a[1],p=(a[2]||"").split(".").sort(),f){for(h=B.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,d=c[f]||[],a=a[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)u=d[o],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&h.teardown.call(e,p,m.handle)!==!1||B.removeEvent(e,f,m.handle),delete c[f])}else for(f in c)B.event.remove(e,f+t[l],n,i,!0);B.isEmptyObject(c)&&(delete m.handle,ot.remove(e,"events"))}},trigger:function(n,i,r,o){var s,a,c,l,u,h,d,f=[r||R],p=q.call(n,"type")?n.type:n,g=q.call(n,"namespace")?n.namespace.split("."):[];if(a=c=r=r||R,3!==r.nodeType&&8!==r.nodeType&&!gt.test(p+B.event.triggered)&&(p.indexOf(".")>=0&&(g=p.split("."),p=g.shift(),g.sort()),u=0>p.indexOf(":")&&"on"+p,n=n[B.expando]?n:new B.Event(p,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=r),i=null==i?[n]:B.makeArray(i,[n]),d=B.event.special[p]||{},o||!d.trigger||d.trigger.apply(r,i)!==!1)){if(!o&&!d.noBubble&&!B.isWindow(r)){for(l=d.delegateType||p,gt.test(l+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),c=a;c===(r.ownerDocument||R)&&f.push(c.defaultView||c.parentWindow||e)}for(s=0;(a=f[s++])&&!n.isPropagationStopped();)n.type=s>1?l:d.bindType||p,h=(ot.get(a,"events")||{})[n.type]&&ot.get(a,"handle"),h&&h.apply(a,i),h=u&&a[u],h&&B.acceptData(a)&&h.apply&&h.apply(a,i)===!1&&n.preventDefault();return n.type=p,o||n.isDefaultPrevented()||d._default&&d._default.apply(f.pop(),i)!==!1||!B.acceptData(r)||u&&B.isFunction(r[p])&&!B.isWindow(r)&&(c=r[u],c&&(r[u]=null),B.event.triggered=p,r[p](),B.event.triggered=t,c&&(r[u]=c)),n.result}},dispatch:function(e){e=B.event.fix(e);var n,i,r,o,s,a=[],c=z.call(arguments),l=(ot.get(this,"events")||{})[e.type]||[],u=B.event.special[e.type]||{};if(c[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=B.event.handlers.call(this,e,l),n=0;(o=a[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,r=((B.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,c),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,r,o,s,a=[],c=n.delegateCount,l=e.target;if(c&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(r=[],i=0;c>i;i++)s=n[i],o=s.selector+" ",r[o]===t&&(r[o]=s.needsContext?B(o,this).index(l)>=0:B.find(o,this,null,[l]).length),r[o]&&r.push(s);r.length&&a.push({elem:l,handlers:r})}return n.length>c&&a.push({elem:this,handlers:n.slice(c)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,o,s=n.button;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||R,r=i.documentElement,o=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[B.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=pt.test(r)?this.mouseHooks:ft.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new B.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=R),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):t},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&B.nodeName(this,"input")?(this.click(),!1):t},_default:function(e){return B.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=B.extend(new B.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?B.event.trigger(r,null,t):B.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},B.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},B.Event=function(e,n){return this instanceof B.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?s:a):this.type=e,n&&B.extend(this,n),this.timeStamp=e&&e.timeStamp||B.now(),this[B.expando]=!0,t):new B.Event(e,n)},B.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=s,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=s,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},B.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){B.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!B.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),B.support.focusinBubbles||B.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){B.event.simulate(t,e.target,B.event.fix(e),!0)};B.event.special[t]={setup:function(){0===n++&&R.addEventListener(e,i,!0)},teardown:function(){0===--n&&R.removeEventListener(e,i,!0)}}}),B.fn.extend({on:function(e,n,i,r,o){var s,c;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(c in e)this.on(c,n,i,e[c],o);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=a;else if(!r)return this;return 1===o&&(s=r,r=function(e){return B().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=B.guid++)),this.each(function(){B.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,B(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=a),this.each(function(){B.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){B.event.trigger(e,t,this)})},triggerHandler:function(e,n){var i=this[0];return i?B.event.trigger(e,n,i,!0):t}});var vt=/^.[^:#\[\.,]*$/,yt=/^(?:parents|prev(?:Until|All))/,bt=B.expr.match.needsContext,wt={children:!0,contents:!0,next:!0,prev:!0};B.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(B(e).filter(function(){for(t=0;r>t;t++)if(B.contains(i[t],this))return!0}));for(t=0;r>t;t++)B.find(e,i[t],n);return n=this.pushStack(r>1?B.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=B(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(B.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(u(this,e||[],!0))},filter:function(e){return this.pushStack(u(this,e||[],!1))},is:function(e){return!!u(this,"string"==typeof e&&bt.test(e)?B(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=bt.test(e)||"string"!=typeof e?B(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&B.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?B.unique(o):o)},index:function(e){return e?"string"==typeof e?F.call(B(e),this[0]):F.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?B(e,t):B.makeArray(e&&e.nodeType?[e]:e),i=B.merge(this.get(),n);return this.pushStack(B.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),B.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return B.dir(e,"parentNode")},parentsUntil:function(e,t,n){return B.dir(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return B.dir(e,"nextSibling")},prevAll:function(e){return B.dir(e,"previousSibling")},nextUntil:function(e,t,n){return B.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return B.dir(e,"previousSibling",n)},siblings:function(e){return B.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return B.sibling(e.firstChild)},contents:function(e){return e.contentDocument||B.merge([],e.childNodes)}},function(e,t){B.fn[e]=function(n,i){var r=B.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=B.filter(i,r)),this.length>1&&(wt[e]||B.unique(r),yt.test(e)&&r.reverse()),this.pushStack(r)}}),B.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?B.find.matchesSelector(i,e)?[i]:[]:B.find.matches(e,B.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,i){for(var r=[],o=i!==t;(e=e[n])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&B(e).is(i))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var xt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,_t=/<([\w:]+)/,Ct=/<|&#?\w+;/,Et=/<(?:script|style|link)/i,St=/^(?:checkbox|radio)$/i,kt=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/^$|\/(?:java|ecma)script/i,Ht=/^true\/(.*)/,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,It={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};It.optgroup=It.option,It.tbody=It.tfoot=It.colgroup=It.caption=It.thead,It.th=It.td,B.fn.extend({text:function(e){return B.access(this,function(e){return e===t?B.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?B.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||B.cleanData(m(n)),n.parentNode&&(t&&B.contains(n.ownerDocument,n)&&p(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(B.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return B.clone(this,e,t)})},html:function(e){return B.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof e&&!Et.test(e)&&!It[(_t.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(xt,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(B.cleanData(m(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=B.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],r=e[t++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),B(this).remove(),r.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=V.apply([],e);var i,r,o,s,a,c,l=0,u=this.length,h=this,p=u-1,g=e[0],v=B.isFunction(g);if(v||!(1>=u||"string"!=typeof g||B.support.checkClone)&&kt.test(g))return this.each(function(i){var r=h.eq(i);v&&(e[0]=g.call(this,i,r.html())),r.domManip(e,t,n)});if(u&&(i=B.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(o=B.map(m(i,"script"),d),s=o.length;u>l;l++)a=i,l!==p&&(a=B.clone(a,!0,!0),s&&B.merge(o,m(a,"script"))),t.call(this[l],a,l);if(s)for(c=o[o.length-1].ownerDocument,B.map(o,f),l=0;s>l;l++)a=o[l],Tt.test(a.type||"")&&!ot.access(a,"globalEval")&&B.contains(c,a)&&(a.src?B._evalUrl(a.src):B.globalEval(a.textContent.replace(Mt,"")))}return this}}),B.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){B.fn[e]=function(e){for(var n,i=[],r=B(e),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),B(r[s])[t](n),L.apply(i,n.get());return this.pushStack(i)}}),B.extend({clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),c=B.contains(e.ownerDocument,e);if(!(B.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||B.isXMLDoc(e)))for(s=m(a),o=m(e),i=0,r=o.length;r>i;i++)v(o[i],s[i]);if(t)if(n)for(o=o||m(e),s=s||m(a),i=0,r=o.length;r>i;i++)g(o[i],s[i]);else g(e,a);return s=m(a,"script"),s.length>0&&p(s,!c&&m(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,o,s,a,c,l,u=0,h=e.length,d=t.createDocumentFragment(),f=[];h>u;u++)if(r=e[u],r||0===r)if("object"===B.type(r))B.merge(f,r.nodeType?[r]:r);else if(Ct.test(r)){for(o=o||d.appendChild(t.createElement("div")),s=(_t.exec(r)||["",""])[1].toLowerCase(),a=It[s]||It._default,o.innerHTML=a[1]+r.replace(xt,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;B.merge(f,o.childNodes),o=d.firstChild,o.textContent=""}else f.push(t.createTextNode(r));for(d.textContent="",u=0;r=f[u++];)if((!i||-1===B.inArray(r,i))&&(c=B.contains(r.ownerDocument,r),o=m(d.appendChild(r),"script"),c&&p(o),n))for(l=0;r=o[l++];)Tt.test(r.type||"")&&n.push(r);return d},cleanData:function(e){for(var n,i,o,s,a,c,l=B.event.special,u=0;(i=e[u])!==t;u++){if(r.accepts(i)&&(a=i[ot.expando],a&&(n=ot.cache[a]))){if(o=Object.keys(n.events||{}),o.length)for(c=0;(s=o[c])!==t;c++)l[s]?B.event.remove(i,s):B.removeEvent(i,s,n.handle);ot.cache[a]&&delete ot.cache[a]}delete rt.cache[i[rt.expando]]}},_evalUrl:function(e){return B.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}});var Rt,At,Ot=/^(none|table(?!-c[ea]).+)/,Pt=/^margin/,Nt=RegExp("^("+U+")(.*)$","i"),Dt=RegExp("^("+U+")(?!px)[a-z%]+$","i"),jt=RegExp("^([+-])=("+U+")","i"),Vt={BODY:"block"},Lt={position:"absolute",visibility:"hidden",display:"block"},zt={letterSpacing:0,fontWeight:400},Ft=["Top","Right","Bottom","Left"],Wt=["Webkit","O","Moz","ms"];B.fn.extend({css:function(e,n){return B.access(this,function(e,n,i){var r,o,s={},a=0;if(B.isArray(n)){for(r=w(e),o=n.length;o>a;a++)s[n[a]]=B.css(e,n[a],!1,r);return s}return i!==t?B.style(e,n,i):B.css(e,n)},e,n,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){b(this)?B(this).show():B(this).hide()})}}),B.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a,c=B.camelCase(n),l=e.style;return n=B.cssProps[c]||(B.cssProps[c]=y(l,c)),a=B.cssHooks[n]||B.cssHooks[c],i===t?a&&"get"in a&&(o=a.get(e,!1,r))!==t?o:l[n]:(s=typeof i,"string"===s&&(o=jt.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(B.css(e,n)),s="number"),null==i||"number"===s&&isNaN(i)||("number"!==s||B.cssNumber[c]||(i+="px"),B.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(l[n]="inherit"),a&&"set"in a&&(i=a.set(e,i,r))===t||(l[n]=i)),t)}},css:function(e,n,i,r){var o,s,a,c=B.camelCase(n);return n=B.cssProps[c]||(B.cssProps[c]=y(e.style,c)),a=B.cssHooks[n]||B.cssHooks[c],a&&"get"in a&&(o=a.get(e,!0,i)),o===t&&(o=Rt(e,n,r)),"normal"===o&&n in zt&&(o=zt[n]),""===i||i?(s=parseFloat(o),i===!0||B.isNumeric(s)?s||0:o):o}}),Rt=function(e,n,i){var r,o,s,a=i||w(e),c=a?a.getPropertyValue(n)||a[n]:t,l=e.style;return a&&(""!==c||B.contains(e.ownerDocument,e)||(c=B.style(e,n)),Dt.test(c)&&Pt.test(n)&&(r=l.width,o=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=c,c=a.width,l.width=r,l.minWidth=o,l.maxWidth=s)),c},B.each(["height","width"],function(e,n){B.cssHooks[n]={get:function(e,i,r){return i?0===e.offsetWidth&&Ot.test(B.css(e,"display"))?B.swap(e,Lt,function(){return E(e,n,r)}):E(e,n,r):t},set:function(e,t,i){var r=i&&w(e);return _(e,t,i?C(e,n,i,B.support.boxSizing&&"border-box"===B.css(e,"boxSizing",!1,r),r):0)}}}),B(function(){B.support.reliableMarginRight||(B.cssHooks.marginRight={get:function(e,n){return n?B.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):t}}),!B.support.pixelPosition&&B.fn.position&&B.each(["top","left"],function(e,n){B.cssHooks[n]={get:function(e,i){return i?(i=Rt(e,n),Dt.test(i)?B(e).position()[n]+"px":i):t}}})}),B.expr&&B.expr.filters&&(B.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},B.expr.filters.visible=function(e){return!B.expr.filters.hidden(e)}),B.each({margin:"",padding:"",border:"Width"},function(e,t){B.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Ft[i]+t]=o[i]||o[i-2]||o[0];return r}},Pt.test(e)||(B.cssHooks[e+t].set=_)});var qt=/%20/g,$t=/\[\]$/,Bt=/\r?\n/g,Ut=/^(?:submit|button|image|reset|file)$/i,Gt=/^(?:input|select|textarea|keygen)/i;B.fn.extend({serialize:function(){return B.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=B.prop(this,"elements");return e?B.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!B(this).is(":disabled")&&Gt.test(this.nodeName)&&!Ut.test(e)&&(this.checked||!St.test(e))}).map(function(e,t){var n=B(this).val();return null==n?null:B.isArray(n)?B.map(n,function(e){return{name:t.name,value:e.replace(Bt,"\r\n")}}):{name:t.name,value:n.replace(Bt,"\r\n")}}).get()}}),B.param=function(e,n){var i,r=[],o=function(e,t){t=B.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=B.ajaxSettings&&B.ajaxSettings.traditional),B.isArray(e)||e.jquery&&!B.isPlainObject(e))B.each(e,function(){o(this.name,this.value)});else for(i in e)T(i,e[i],n,o);return r.join("&").replace(qt,"+")},B.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){B.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),B.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=B:"function"==typeof define&&define.amd&&define("jquery",[],function(){return B}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=B)}(window),function(){var e,t=this,n=t.Backbone,i=[],r=i.push,o=i.slice,s=i.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var a=t._;a||"undefined"==typeof require||(a=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var c=e.Events={on:function(e,t,n){if(!u(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!u(this,"once",e,[t,n])||!t)return this;var i=this,r=a.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,o,s,c,l,h,d;if(!this._events||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:a.keys(this._events),c=0,l=s.length;l>c;c++)if(e=s[c],o=this._events[e]){if(this._events[e]=i=[],t||n)for(h=0,d=o.length;d>h;h++)r=o[h],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&h(n,t),i&&h(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var o in i)i[o].off(t,n,this),r&&delete this._listeners[o];return this}},l=/\s+/,u=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var o=n.split(l),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},h=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},d={listenTo:"on",listenToOnce:"once"};a.each(d,function(e,t){c[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=a.uniqueId("l"));return r[o]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),c.bind=c.on,c.unbind=c.off,a.extend(e,c);var f=e.Model=function(e,t){var n,i=e||{};t||(t={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(t,p)),t.parse&&(i=this.parse(i,t)||{}),(n=a.result(this,"defaults"))&&(i=a.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];a.extend(f.prototype,c,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,r,o,s,c,l,u,h;if(null==e)return this;if("object"==typeof e?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;o=n.unset,c=n.silent,s=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=a.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)t=r[i],a.isEqual(h[i],t)||s.push(i),a.isEqual(u[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete h[i]:h[i]=t;if(!c){s.length&&(this._pending=!0);for(var d=0,f=s.length;f>d;d++)this.trigger("change:"+s[d],this,h[s[d]],n)}if(l)return this;if(!c)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in e)a.isEqual(i[r],t=e[r])||((n||(n={}))[r]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),t.trigger("sync",t,i,e),void 0):!1},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,r,o,s=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=a.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=a.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var c=this,l=n.success;return n.success=function(e){c.attributes=s;var t=c.parse(e,n);return n.wait&&(t=a.extend(i||{},t)),a.isObject(t)&&!c.set(t,n)?!1:(l&&l(c,e,n),c.trigger("sync",c,e,n),void 0)},j(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=i),o=this.sync(r,this,n),i&&n.wait&&(this.attributes=s),o},destroy:function(e){e=e?a.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(r){(e.wait||t.isNew())&&i(),n&&n(t,r,e),t.isNew()||t.trigger("sync",t,r,e)},this.isNew())return e.success(),!1;j(this,e);var r=this.sync("delete",this,e);return e.wait||i(),r},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||D();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},a.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,a.extend(t||{},{validationError:n})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];a.each(g,function(e){f.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),a[e].apply(a,t)}});var m=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(m.prototype,c,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,a.defaults(t||{},y))},remove:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var n,i,r,o;for(n=0,i=e.length;i>n;n++)o=this.get(e[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,t.silent||(t.index=r,o.trigger("remove",o,this,t)),this._removeReference(o));return this},set:function(e,t){t=a.defaults(t||{},v),t.parse&&(e=this.parse(e,t)),a.isArray(e)||(e=e?[e]:[]);var n,i,o,c,l,u=t.at,h=this.comparator&&null==u&&t.sort!==!1,d=a.isString(this.comparator)?this.comparator:null,f=[],p=[],g={};for(n=0,i=e.length;i>n;n++)(o=this._prepareModel(e[n],t))&&((c=this.get(o))?(t.remove&&(g[c.cid]=!0),t.merge&&(c.set(o.attributes,t),h&&!l&&c.hasChanged(d)&&(l=!0))):t.add&&(f.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(t.remove){for(n=0,i=this.length;i>n;++n)g[(o=this.models[n]).cid]||p.push(o);p.length&&this.remove(p,t)}if(f.length&&(h&&(l=!0),this.length+=f.length,null!=u?s.apply(this.models,[u,0].concat(f)):r.apply(this.models,f)),l&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=f.length;i>n;n++)(o=f[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return a.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;
return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=a.isFunction(t)?t:function(e){return e.get(t)};return a.sortedIndex(this.models,e,i,n)},pluck:function(e){return a.invoke(this.models,"get",e)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?a.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(r){t.wait&&n.add(e,t),i&&i(e,r,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(b,function(e){m.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}});var w=["groupBy","countBy","sortBy"];a.each(w,function(e){m.prototype[e]=function(t,n){var i=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,i,n)}});var x=e.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];a.extend(x.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=a.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(a.isFunction(n)||(n=this[e[t]]),n){var i=t.match(_),r=i[1],o=i[2];n=a.bind(n,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,n):this.$el.on(r,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),a.extend(this,a.pick(e,C)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t["class"]=a.result(this,"className"));var n=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,i){var r=E[t];a.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=a.result(n,"url")||D()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var s=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=i.xhr=e.ajax(a.extend(o,i));return n.trigger("request",n,c,i),c};var E={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var S=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,H=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(S.prototype,c,{initialize:function(){},route:function(t,n,i){a.isRegExp(t)||(t=this._routeToRegExp(t)),a.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return e.history.route(t,function(o){var s=r._extractParameters(t,o);i&&i.apply(r,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),e.history.trigger("route",r,n,s)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var e,t=a.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(M,"\\$&").replace(k,"(?:$1)?").replace(T,function(e,t){return t?e:"([^/]+)"}).replace(H,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return a.map(n,function(e){return e?decodeURIComponent(e):null})}});var I=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,O=/msie [\w.]+/,P=/\/$/;I.started=!1,a.extend(I.prototype,c,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(R,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=a.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=O.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(A,"/"),r&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(R,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=a.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!I.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),e.history=new I;var N=function(e,t){var n,i=this;n=e&&a.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},a.extend(n,i,t);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&a.extend(n.prototype,e),n.__super__=i.prototype,n};f.extend=m.extend=S.extend=x.extend=I.extend=N;var D=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}}}.call(this),define("backbone",["lodash","jquery"],function(e){return function(){var t;return t||e.Backbone}}(this)),Backbone.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(Backbone,_),Backbone.Wreqr=function(e,t,n){var i={};return i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},setHandler:function(e,t,n){var i={callback:t,context:n};this._wreqrHandlers[e]=i,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,n),i.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},n.isFunction(this.initialize)&&this.initialize(e)};return n.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),i.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,i){var r=this.storage.getCommands(e);n.each(r.instances,function(e){t.apply(i,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,i=e.storageType||this.storageType;t=n.isFunction(i)?new i:i,this.storage=t}})}(i),i.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(i),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,n),i}(Backbone,Backbone.Marionette,_);var Marionette=function(e,t,n){function i(e){return s.call(e)}function r(e,t){var n=Error(e);throw n.name=t||"Error",n}var o={};t.Marionette=o,o.$=t.$;var s=Array.prototype.slice;return o.extend=t.Model.extend,o.getOption=function(e,t){if(e&&t){var n;return n=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},o.triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi,i=function(i){var r="on"+i.replace(t,e),o=this[r];return this.trigger.apply(this,arguments),n.isFunction(o)?o.apply(this,n.tail(arguments)):void 0};return i}(),o.MonitorDOMRefresh=function(){function e(e){e._isShown=!0,i(e)}function t(e){e._isRendered=!0,i(e)}function i(e){e._isShown&&e._isRendered&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}return function(n){n.listenTo(n,"show",function(){e(n)}),n.listenTo(n,"render",function(){t(n)})}}(),function(e){function t(e,t,i,o){var s=o.split(/\s+/);n.each(s,function(n){var o=e[n];o||r("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,i,o,e)})}function i(e,t,n,i){e.listenTo(t,n,i,e)}function o(e,t,i,r){var o=r.split(/\s+/);n.each(o,function(n){var r=e[n];e.stopListening(t,i,r,e)})}function s(e,t,n,i){e.stopListening(t,n,i,e)}function a(e,t,i,r,o){t&&i&&(n.isFunction(i)&&(i=i.call(e)),n.each(i,function(i,s){n.isFunction(i)?r(e,t,s,i):o(e,t,s,i)}))}e.bindEntityEvents=function(e,n,r){a(e,n,r,i,t)},e.unbindEntityEvents=function(e,t,n){a(e,t,n,s,o)}}(o),o.Callbacks=function(){this._deferred=o.$.Deferred(),this._callbacks=[]},n.extend(o.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(n,i){t&&(n=t),e.call(n,i)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=o.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),o.Controller=function(e){this.triggerMethod=o.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,n.extend(o.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),o.Region=function(e){if(this.options=e||{},this.el=o.getOption(this,"el"),!this.el){var t=Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var n=Array.prototype.slice.apply(arguments);this.initialize.apply(this,n)}},n.extend(o.Region,{buildRegion:function(e,t){var i="string"==typeof e,r="string"==typeof e.selector,o=void 0===e.regionType,s="function"==typeof e;if(!s&&!i&&!r)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var a,c;i&&(a=e),e.selector&&(a=e.selector),s&&(c=e),!s&&o&&(c=t),e.regionType&&(c=e.regionType);var l=new c({el:a});return e.parentEl&&(l.getEl=function(t){var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(t)}),l}}),n.extend(o.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,o.triggerMethod.call(this,"show",e),o.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return o.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),o.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),o.Region.extend=o.extend,o.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var i={};return n.each(e,function(e,r){"string"==typeof e&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var o=this.addRegion(r,e);i[r]=o},this),i},addRegion:function(t,i){var r,o=n.isObject(i),s=n.isString(i),a=!!i.selector;return r=s||o&&a?e.Region.buildRegion(i,e.Region):n.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,r),this.triggerMethod("region:add",t,r),r},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(i,function(e){t.prototype[e]=function(){var t=n.values(this._regions),i=[t].concat(n.toArray(arguments));return n[e].apply(n,i)}}),t}(o),o.TemplateCache=function(e){this.templateId=e},n.extend(o.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new o.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=i(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=o.$(e).html();return t&&0!==t.length||r("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return n.template(e)}}),o.Renderer={render:function(e,t){if(!e){var n=Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}var i;return i="function"==typeof e?e:o.TemplateCache.get(e),i(t)}},o.View=t.View.extend({constructor:function(){n.bindAll(this,"render");var e=Array.prototype.slice.apply(arguments);t.View.prototype.constructor.apply(this,e),o.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:o.triggerMethod,getTemplate:function(){return o.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=this.templateHelpers;return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},configureTriggers:function(){if(this.triggers){var e={},t=n.result(this,"triggers");return n.each(t,function(t,n){e[n]=function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation();var n={view:this,model:this.model,collection:this.collection};this.triggerMethod(t,n)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),o.bindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.bindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var i={},r=this.configureTriggers();n.extend(i,e,r),t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),o.unbindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.unbindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=this.triggerMethod("before:close");e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),o.ItemView=o.View.extend({constructor:function(){o.View.prototype.constructor.apply(this,i(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=o.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),o.View.prototype.close.apply(this,i(arguments)),this.triggerMethod("item:closed"))}}),o.CollectionView=o.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),o.View.prototype.constructor.apply(this,i(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),n=this.collection.indexOf(e);this.addItemView(e,t,n)},onShowCalled:function(){this.children.each(function(e){o.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=o.getOption(this,"emptyView");if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var e=o.getOption(this,"itemView");return e||r("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,i){var r=o.getOption(this,"itemViewOptions");n.isFunction(r)&&(r=r.call(this,e,i));var s=this.buildItemView(e,t,r);this.addChildViewEventForwarding(s),this.triggerMethod("before:item:added",s),this.children.add(s),this.renderItemView(s,i),this._isShown&&o.triggerMethod.call(s,"show"),this.triggerMethod("after:item:added",s)},addChildViewEventForwarding:function(e){var t=o.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var n=i(arguments);n[0]=t+":"+n[0],n.splice(1,0,e),o.triggerMethod.apply(this,n)},this)},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,i){var r=n.extend({model:e},i);return new t(r)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(e,t){e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),o.View.prototype.close.apply(this,i(arguments)))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.prototype.constructor.apply(this,i(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(){var e=o.getOption(this,"itemView")||this.constructor;return e||r("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(o.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return o.Renderer.render(t,e)},appendHtml:function(e,t){var n=this.getItemViewContainer(e);n.append(t.el)},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t;if(e.itemViewContainer){var i=n.result(e,"itemViewContainer");t=e.$(i),0>=t.length&&r("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),o.Layout=o.ItemView.extend({regionType:o.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),o.ItemView.prototype.constructor.call(this,e)},render:function(){this._firstRender?this._firstRender=!1:this.isClosed?this._initializeRegions():this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=o.ItemView.prototype.render.apply(this,e);return t},close:function(){if(!this.isClosed){this.regionManager.close();var e=Array.prototype.slice.apply(arguments);o.ItemView.prototype.close.apply(this,e)}},addRegion:function(e,t){var n={};return n[e]=t,this.addRegions(n)[e]},addRegions:function(e){return this.regions=n.extend(this.regions||{},e),this._buildRegions(e)},removeRegion:function(e){return this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,n={parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new o.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),o.AppRouter=t.Router.extend({constructor:function(e){if(t.Router.prototype.constructor.apply(this,i(arguments)),this.options=e,this.appRoutes){var n=o.getOption(this,"controller");this.processAppRoutes(n,this.appRoutes)}},processAppRoutes:function(e,t){var i=n.keys(t).reverse();n.each(i,function(i){var r=t[i],o=e[r];if(!o)throw Error("Method '"+r+"' was not found on the controller");this.route(i,r,n.bind(o,e))},this)}}),o.Application=function(e){this._initRegionManager(),this._initCallbacks=new o.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=o.triggerMethod},n.extend(o.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},removeRegion:function(e){this._regionManager.removeRegion(e)},module:function(){var e=i(arguments);return e.unshift(this),o.Module.create.apply(o.Module,e)},_initRegionManager:function(){this._regionManager=new o.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),o.Application.extend=o.extend,o.Module=function(e,t){this.moduleName=e,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=o.triggerMethod},n.extend(o.Module.prototype,t.Events,{addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,o.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),o.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var r=n.flatten([this,this.app,t,o,o.$,n,i]);e.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks}}),n.extend(o.Module,{create:function(e,t,r){var o=e,s=i(arguments);s.splice(0,3),t=t.split(".");var a=t.length,c=[];return c[a-1]=r,n.each(t,function(t,n){var i=o;o=this._getModule(i,t,e),this._addModuleDefinition(i,o,c[n],s)},this),o},_getModule:function(e,t,n){var i=e[t];return i||(i=new o.Module(t,n),e[t]=i,e.submodules[t]=i),i},_addModuleDefinition:function(e,t,i,r){var o,s;n.isFunction(i)?(o=i,s=!0):n.isObject(i)?(o=i.define,s=i.startWithParent):s=!0,o&&t.addDefinition(o,r),t.startWithParent=t.startWithParent&&s,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)
}))}}),o}(this,Backbone,_);define("marionette",["backbone"],function(e){return function(){var t;return t||e.Marionette}}(this)),define("core",[],function(){var e=new Marionette.Application;return e.on("initialize:after",function(){Backbone.history.start()}),e.addRegions({modals:"#modals",main:"#main",utility:"#utility"}),e}),function(e){if("function"==typeof bootstrap)bootstrap("simplewebrtc",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("vendor/simplewebrtc",e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeSimpleWebRTC=e}else"undefined"!=typeof window?window.SimpleWebRTC=e():global.SimpleWebRTC=e()}(function(){return function(e,t,n){function i(n,o){if(!t[n]){if(!e[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=t[n]={exports:{}};e[n][0].call(a.exports,function(t){var r=e[n][1][t];return i(r?r:t)},a,a.exports)}return t[n].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t){function n(e){var t,n,s=this,a=e||{},l=this.config={url:"http://signaling.simplewebrtc.com:8888",debug:!1,localVideoEl:"",remoteVideosEl:"",enableDataChannels:!0,autoRequestMedia:!1,autoRemoveVideos:!0,adjustPeerVolume:!0,peerVolumeWhenSpeaking:.25};this.logger=function(){return e.debug?e.logger||console:e.logger||c}();for(t in a)this.config[t]=a[t];this.capabilities=o,r.call(this),n=this.connection=io.connect(this.config.url),n.on("connect",function(){s.emit("connectionReady",n.socket.sessionid),s.sessionReady=!0,s.testReadiness()}),n.on("message",function(e){var t,n=s.webrtc.getPeers(e.from,e.roomType);"offer"===e.type?(t=n.length?n[0]:s.webrtc.createPeer({id:e.from,type:e.roomType,sharemyscreen:"screen"===e.roomType&&!e.broadcaster}),t.handleMessage(e)):n.length&&n.forEach(function(t){t.handleMessage(e)})}),n.on("remove",function(e){e.id!==s.connection.socket.sessionid&&s.webrtc.removePeers(e.id,e.type)}),e.logger=this.logger,e.debug=!1,this.webrtc=new i(e),["mute","unmute","pause","resume"].forEach(function(e){s[e]=s.webrtc[e].bind(s.webrtc)}),this.webrtc.on("*",function(){s.emit.apply(s,arguments)}),l.debug&&this.on("*",this.logger.log.bind(this.logger,"SimpleWebRTC event:")),this.webrtc.on("localStream",function(){s.testReadiness()}),this.webrtc.on("message",function(e){s.connection.emit("message",e)}),this.webrtc.on("peerStreamAdded",this.handlePeerStreamAdded.bind(this)),this.webrtc.on("peerStreamRemoved",this.handlePeerStreamRemoved.bind(this)),this.config.adjustPeerVolume&&(this.webrtc.on("speaking",this.setVolumeForAll.bind(this,this.config.peerVolumeWhenSpeaking)),this.webrtc.on("stoppedSpeaking",this.setVolumeForAll.bind(this,1))),this.config.autoRequestMedia&&this.startLocalVideo()}var i=e("webrtc"),r=e("wildemitter"),o=e("webrtcsupport"),s=e("attachmediastream"),a=e("getscreenmedia"),c=e("mockconsole");n.prototype=Object.create(r.prototype,{constructor:{value:n}}),n.prototype.leaveRoom=function(){this.roomName&&(this.connection.emit("leave",this.roomName),this.webrtc.peers.forEach(function(e){e.end()}),this.getLocalScreen()&&this.stopScreenShare(),this.emit("leftRoom",this.roomName))},n.prototype.handlePeerStreamAdded=function(e){var t=this.getRemoteVideoContainer(),n=s(e.stream);e.videoEl=n,n.id=this.getDomId(e),t&&t.appendChild(n),this.emit("videoAdded",n,e)},n.prototype.handlePeerStreamRemoved=function(e){var t=this.getRemoteVideoContainer(),n=e.videoEl;this.config.autoRemoveVideos&&t&&n&&t.removeChild(n),n&&this.emit("videoRemoved",n,e)},n.prototype.getDomId=function(e){return[e.id,e.type,e.broadcaster?"broadcasting":"incoming"].join("_")},n.prototype.setVolumeForAll=function(e){this.webrtc.peers.forEach(function(t){t.videoEl&&(t.videoEl.volume=e)})},n.prototype.joinRoom=function(e,t){var n=this;this.roomName=e,this.connection.emit("join",e,function(i,r){if(i)n.emit("error",i);else{var o,s,a,c;for(o in r.clients){s=r.clients[o];for(a in s)s[a]&&(c=n.webrtc.createPeer({id:o,type:a}),c.start())}}t&&t(i,r),n.emit("joinedRoom",e)})},n.prototype.getEl=function(e){return"string"==typeof e?document.getElementById(e):e},n.prototype.startLocalVideo=function(){var e=this;this.webrtc.startLocalMedia(null,function(t,n){t?e.emit(t):s(n,e.getLocalVideoContainer(),{muted:!0,mirror:!0})})},n.prototype.stopLocalVideo=function(){this.webrtc.stopLocalMedia()},n.prototype.getLocalVideoContainer=function(){var e=this.getEl(this.config.localVideoEl);if(e&&"VIDEO"===e.tagName)return e;if(e){var t=document.createElement("video");return e.appendChild(t),t}},n.prototype.getRemoteVideoContainer=function(){return this.getEl(this.config.remoteVideosEl)},n.prototype.shareScreen=function(e){var t=this;a(function(n,i){var r=document.createElement("video"),o=t.getRemoteVideoContainer();n?t.emit(n):(t.webrtc.localScreen=i,r.id="localScreen",s(i,r),o&&o.appendChild(r),t.emit("localScreenAdded",r),t.connection.emit("shareScreen"),t.webrtc.peers.forEach(function(e){var n;"video"===e.type&&(n=t.webrtc.createPeer({id:e.id,type:"screen",sharemyscreen:!0,broadcaster:t.connection.socket.sessionid}),n.start())})),e&&e(n,i)})},n.prototype.getLocalScreen=function(){return this.webrtc.localScreen},n.prototype.stopScreenShare=function(){this.connection.emit("unshareScreen");var e=document.getElementById("localScreen"),t=this.getRemoteVideoContainer(),n=this.getLocalScreen();this.config.autoRemoveVideos&&t&&e&&t.removeChild(e),e&&this.emit("videoRemoved",e),n&&n.stop(),this.webrtc.peers.forEach(function(e){e.broadcaster&&e.end()}),delete this.webrtc.localScreen},n.prototype.testReadiness=function(){var e=this;this.webrtc.localStream&&this.sessionReady&&setTimeout(function(){e.emit("readyToCall",e.connection.socket.sessionid)},1e3)},n.prototype.createRoom=function(e,t){2===arguments.length?this.connection.emit("create",e,t):this.connection.emit("create",e)},n.prototype.sendFile=function(){return o.dataChannel?void 0:this.emit("error",new Error("DataChannelNotSupported"))},t.exports=n},{attachmediastream:4,getscreenmedia:6,mockconsole:7,webrtc:2,webrtcsupport:5,wildemitter:3}],3:[function(e,t){function n(){this.callbacks={}}t.exports=n,n.prototype.on=function(e){var t=3===arguments.length,n=t?arguments[1]:void 0,i=t?arguments[2]:arguments[1];return i._groupName=n,(this.callbacks[e]=this.callbacks[e]||[]).push(i),this},n.prototype.once=function(e){function t(){n.off(e,t),o.apply(this,arguments)}var n=this,i=3===arguments.length,r=i?arguments[1]:void 0,o=i?arguments[2]:arguments[1];return this.on(e,r,t),this},n.prototype.releaseGroup=function(e){var t,n,i,r;for(t in this.callbacks)for(r=this.callbacks[t],n=0,i=r.length;i>n;n++)r[n]._groupName===e&&(r.splice(n,1),n--,i--);return this},n.prototype.off=function(e,t){var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(n=i.indexOf(t),i.splice(n,1),this):this},n.prototype.emit=function(e){var t,n,i=[].slice.call(arguments,1),r=this.callbacks[e],o=this.getWildcardCallbacks(e);if(r)for(t=0,n=r.length;n>t&&r[t];++t)r[t].apply(this,i);if(o)for(t=0,n=o.length;n>t&&o[t];++t)o[t].apply(this,[e].concat(i));return this},n.prototype.getWildcardCallbacks=function(e){var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[1].length)===n[1])&&(i=i.concat(this.callbacks[t]));return i}},{}],4:[function(e,t){t.exports=function(e,t,n){var i,r=window.URL,o={autoplay:!0,mirror:!1,muted:!1},s=t||document.createElement("video");if(n)for(i in n)o[i]=n[i];if(o.autoplay&&(s.autoplay="autoplay"),o.muted&&(s.muted=!0),o.mirror&&["","moz","webkit","o","ms"].forEach(function(e){var t=e?e+"Transform":"transform";s.style[t]="scaleX(-1)"}),r&&r.createObjectURL)s.src=r.createObjectURL(e);else if(s.srcObject)s.srcObject=e;else{if(!s.mozSrcObject)return!1;s.mozSrcObject=e}return s}},{}],5:[function(e,t){var n,i=!1,r=!1,o=navigator.userAgent.toLowerCase();-1!==o.indexOf("firefox")?(n="moz",r=!0):-1!==o.indexOf("chrome")&&(n="webkit",i=!0);var s=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,a=window.mozRTCIceCandidate||window.RTCIceCandidate,c=window.mozRTCSessionDescription||window.RTCSessionDescription,l=window.webkitMediaStream||window.MediaStream,u=navigator.userAgent.match("Chrome")&&parseInt(navigator.userAgent.match(/Chrome\/(.*) /)[1],10)>=26,h=window.webkitAudioContext||window.AudioContext;t.exports={support:!!s,dataChannel:i||r||s.prototype&&s.prototype.createDataChannel,prefix:n,webAudio:!(!h||!h.prototype.createMediaStreamSource),mediaStream:!(!l||!l.prototype.removeTrack),screenSharing:!!u,AudioContext:h,PeerConnection:s,SessionDescription:c,IceCandidate:a}},{}],7:[function(e,t){for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),i=n.length,r=function(){},o={};i--;)o[n[i]]=r;t.exports=o},{}],6:[function(e,t){var n=e("getusermedia");t.exports=function(e){var t,i={video:{mandatory:{chromeMediaSource:"screen"}}};return"http:"===window.location.protocol?(t=new Error("NavigatorUserMediaError"),t.name="HTTPS_REQUIRED",e(t)):(n(i,e),void 0)}},{getusermedia:8}],9:[function(e,t){var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;t.exports=function(e,t){var i,r=2===arguments.length,o={video:!0,audio:!0},s="PERMISSION_DENIED",a="CONSTRAINT_NOT_SATISFIED";return r||(t=e,e=o),n?(n.call(navigator,e,function(e){t(null,e)},function(e){var n;"string"==typeof e?(n=new Error("NavigatorUserMediaError"),n.name=e===s?s:a):(n=e,n.name||(e.name=n[s]?s:a)),t(n)}),void 0):(i=new Error("NavigatorUserMediaError"),i.name="NOT_SUPPORTED_ERROR",t(i))}},{}],8:[function(e,t){var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;t.exports=function(e,t){var i,r=2===arguments.length,o={video:!0,audio:!0},s="PERMISSION_DENIED",a="CONSTRAINT_NOT_SATISFIED";return r||(t=e,e=o),n?(n.call(navigator,e,function(e){t(null,e)},function(e){var n;"string"==typeof e?(n=new Error("NavigatorUserMediaError"),n.name=e===s?s:a):(n=e,n.name||(e.name=n[s]?s:a)),t(n)}),void 0):(i=new Error("NavigatorUserMediaError"),i.name="NOT_SUPPORTED_ERROR",t(i))}},{}],2:[function(e,t){function n(e){var t=this,n=e||{};this.config={debug:!1,localVideoEl:"",remoteVideosEl:"",autoRequestMedia:!1,peerConnectionConfig:{iceServers:[{url:"stun:stun.l.google.com:19302"}]},peerConnectionContraints:{optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannels:!0}]},autoAdjustMic:!1,media:{audio:!0,video:!0},detectSpeakingEvents:!0,enableDataChannels:!0};var i;this.screenSharingSupport=r.screenSharing,this.logger=function(){return e.debug?e.logger||console:e.logger||u}();for(i in n)this.config[i]=n[i];r.support||this.logger.error("Your browser doesn't seem to support WebRTC"),this.peers=[],a.call(this),this.config.debug&&this.on("*",function(e,n,i){var r;r=t.config.logger===u?console:t.logger,r.log("event:",e,n,i)})}function i(e){var t=this;if(this.id=e.id,this.parent=e.parent,this.type=e.type||"video",this.oneway=e.oneway||!1,this.sharemyscreen=e.sharemyscreen||!1,this.browserPrefix=e.prefix,this.stream=e.stream,this.channels={},this.pc=new s(this.parent.config.peerConnectionConfig,this.parent.config.peerConnectionContraints),this.pc.on("ice",this.onIceCandidate.bind(this)),this.pc.on("addStream",this.handleRemoteStreamAdded.bind(this)),this.pc.on("addChannel",this.handleDataChannelAdded.bind(this)),this.pc.on("removeStream",this.handleStreamRemoved.bind(this)),this.pc.on("negotiationNeeded",this.emit.bind(this,"negotiationNeeded")),this.logger=this.parent.logger,"screen"===e.type?this.parent.localScreen&&this.sharemyscreen&&(this.logger.log("adding local screen stream to peer connection"),this.pc.addStream(this.parent.localScreen),this.broadcaster=e.broadcaster):this.pc.addStream(this.parent.localStream),this.parent.config.enableDataChannels&&r.dataChannel){try{if(this.reliableChannel=this.getDataChannel("reliable",{reliable:!0}),!this.reliableChannel.reliable)throw Error("Failed to make reliable channel")}catch(n){this.logger.warn("Failed to create reliable data channel."),this.reliableChannel=!1,delete this.channels.reliable}try{if(this.unreliableChannel=this.getDataChannel("unreliable",{reliable:!1,preset:!0}),this.unreliableChannel.unreliable!==!1)throw Error("Failed to make unreliable channel")}catch(n){this.logger.warn("Failed to create unreliable data channel."),this.unreliableChannel=!1,delete this.channels.unreliableChannel}}a.call(this),this.on("*",function(){t.parent.emit.apply(t.parent,arguments)})}var r=e("webrtcsupport"),o=e("getusermedia"),s=e("rtcpeerconnection"),a=e("wildemitter"),c=e("hark"),l=e("mediastream-gain"),u=e("mockconsole");n.prototype=Object.create(a.prototype,{constructor:{value:n}}),n.prototype.createPeer=function(e){var t;return e.parent=this,t=new i(e),this.peers.push(t),t},n.prototype.startLocalMedia=function(e,t){var n=this,i=e||{video:{mandatory:{maxWidth:480,maxHeight:320}},audio:!0};o(i,function(e,r){e||(i.audio&&n.config.detectSpeakingEvents&&n.setupAudioMonitor(r),n.localStream=r,n.config.autoAdjustMic&&(n.gainController=new l(r),n.setMicIfEnabled(.5)),n.emit("localStream",r)),t&&t(e,r)})},n.prototype.stopLocalMedia=function(){this.localStream&&(this.localStream.stop(),this.emit("localStreamStopped"))},n.prototype.mute=function(){this._audioEnabled(!1),this.hardMuted=!0,this.emit("audioOff")},n.prototype.unmute=function(){this._audioEnabled(!0),this.hardMuted=!1,this.emit("audioOn")},n.prototype.setupAudioMonitor=function(e){this.logger.log("Setup audio");var t,n=c(e),i=this;n.on("speaking",function(){i.hardMuted||(i.setMicIfEnabled(1),i.sendToAll("speaking",{}),i.emit("speaking"))}),n.on("stopped_speaking",function(){i.hardMuted||(t&&clearTimeout(t),t=setTimeout(function(){i.setMicIfEnabled(.5),i.sendToAll("stopped_speaking",{}),i.emit("stoppedSpeaking")},1e3))})},n.prototype.setMicIfEnabled=function(e){this.config.autoAdjustMic&&this.gainController.setGain(e)},n.prototype.pauseVideo=function(){this._videoEnabled(!1),this.emit("videoOff")},n.prototype.resumeVideo=function(){this._videoEnabled(!0),this.emit("videoOn")},n.prototype.pause=function(){this._audioEnabled(!1),this.pauseVideo()},n.prototype.resume=function(){this._audioEnabled(!0),this.resumeVideo()},n.prototype._audioEnabled=function(e){this.setMicIfEnabled(e?1:0),this.localStream.getAudioTracks().forEach(function(t){t.enabled=!!e})},n.prototype._videoEnabled=function(e){this.localStream.getVideoTracks().forEach(function(t){t.enabled=!!e})},n.prototype.removePeers=function(e,t){this.getPeers(e,t).forEach(function(e){e.end()})},n.prototype.getPeers=function(e,t){return this.peers.filter(function(n){return!(e&&n.id!==e||t&&n.type!==t)})},n.prototype.sendToAll=function(e,t){this.peers.forEach(function(n){n.send(e,t)})},i.prototype=Object.create(a.prototype,{constructor:{value:i}}),i.prototype.handleMessage=function(e){var t=this;this.logger.log("getting",e.type,e),e.prefix&&(this.browserPrefix=e.prefix),"offer"===e.type?this.pc.answer(e.payload,function(e,n){t.send("answer",n)}):"answer"===e.type?this.pc.handleAnswer(e.payload):"candidate"===e.type?this.pc.processIce(e.payload):"speaking"===e.type?this.parent.emit("speaking",{id:e.from}):"stopped_speaking"===e.type&&this.parent.emit("stopped_speaking",{id:e.from})},i.prototype.send=function(e,t){var n={to:this.id,broadcaster:this.broadcaster,roomType:this.type,type:e,payload:t,prefix:r.prefix};this.logger.log("sending",e,n),this.parent.emit("message",n)},i.prototype._observeDataChannel=function(e){var t=this;e.onclose=this.emit.bind(this,"channelClose",e),e.onerror=this.emit.bind(this,"channelError",e),e.onmessage=function(n){t.emit("message",e.label,n.data,e,n)},e.onopen=this.emit.bind(this,"channelOpen",e)},i.prototype.getDataChannel=function(e,t){if(!r.dataChannel)return this.emit("error",new Error("createDataChannel not supported"));var n=this.channels[e];return t||(t={}),n?n:(n=this.channels[e]=this.pc.createDataChannel(e,t),this._observeDataChannel(n),n)},i.prototype.onIceCandidate=function(e){this.closed||(e?this.send("candidate",e):this.logger.log("End of candidates."))},i.prototype.start=function(){var e=this;this.pc.offer(function(t,n){e.send("offer",n)})},i.prototype.end=function(){this.pc.close(),this.handleStreamRemoved()},i.prototype.handleRemoteStreamAdded=function(e){this.stream?this.logger.warn("Already have a remote stream"):(this.stream=e.stream,this.parent.emit("peerStreamAdded",this))},i.prototype.handleStreamRemoved=function(){this.parent.peers.splice(this.parent.peers.indexOf(this),1),this.closed=!0,this.parent.emit("peerStreamRemoved",this)},i.prototype.handleDataChannelAdded=function(e){this.channels[e.name]=e},t.exports=n},{getusermedia:9,hark:12,"mediastream-gain":11,mockconsole:7,rtcpeerconnection:10,webrtcsupport:5,wildemitter:3}],11:[function(e,t){function n(e){if(this.support=i.webAudio&&i.mediaStream,this.gain=1,this.support){var t=this.context=new i.AudioContext;this.microphone=t.createMediaStreamSource(e),this.gainFilter=t.createGain(),this.destination=t.createMediaStreamDestination(),this.outputStream=this.destination.stream,this.microphone.connect(this.gainFilter),this.gainFilter.connect(this.destination),e.removeTrack(e.getAudioTracks()[0]),e.addTrack(this.outputStream.getAudioTracks()[0])}this.stream=e}var i=e("webrtcsupport");n.prototype.setGain=function(e){this.support&&(this.gainFilter.gain.value=e,this.gain=e)},n.prototype.getGain=function(){return this.gain},n.prototype.off=function(){return this.setGain(0)},n.prototype.on=function(){this.setGain(1)},t.exports=n},{webrtcsupport:13}],13:[function(e,t){var n=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection,i=window.mozRTCIceCandidate||window.RTCIceCandidate,r=window.mozRTCSessionDescription||window.RTCSessionDescription,o=function(){return window.mozRTCPeerConnection?"moz":window.webkitRTCPeerConnection?"webkit":void 0}(),s=window.webkitMediaStream||window.MediaStream,a=navigator.userAgent.match("Chrome")&&parseInt(navigator.userAgent.match(/Chrome\/(.*) /)[1],10)>=26,c=window.webkitAudioContext||window.AudioContext;t.exports={support:!!n,dataChannel:!!(n&&n.prototype&&n.prototype.createDataChannel),prefix:o,webAudio:!(!c||!c.prototype.createMediaStreamSource),mediaStream:!(!s||!s.prototype.removeTrack),screenSharing:a,AudioContext:c,PeerConnection:n,SessionDescription:r,IceCandidate:i}},{}],10:[function(e,t){function n(e,t){var n;this.pc=new r.PeerConnection(e,t),i.call(this),this.pc.onremovestream=this.emit.bind(this,"removeStream"),this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded"),this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange"),this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange"),this.pc.onaddstream=this._onAddStream.bind(this),this.pc.onicecandidate=this._onIce.bind(this),this.pc.ondatachannel=this._onDataChannel.bind(this),this.config={debug:!1,sdpHack:!0};for(n in e)this.config[n]=e[n];this.config.debug&&this.on("*",function(){var t=e.logger||console;t.log("PeerConnection event:",arguments)})}var i=e("wildemitter"),r=e("webrtcsupport");n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype.addStream=function(e){this.localStream=e,this.pc.addStream(e)},n.prototype.processIce=function(e){this.pc.addIceCandidate(new r.IceCandidate(e))},n.prototype.offer=function(e,t){var n=this,i=2===arguments.length,r=i?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},o=i?t:e;this.pc.createOffer(function(e){e.sdp=n._applySdpHack(e.sdp),n.pc.setLocalDescription(e),n.emit("offer",e),o&&o(null,e)},function(e){n.emit("error",e),o&&o(e)},r)},n.prototype.answerAudioOnly=function(e,t){var n={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}};this._answer(e,n,t)},n.prototype.answerBroadcastOnly=function(e,t){var n={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this._answer(e,n,t)},n.prototype.answer=function(e,t,n){var i=3===arguments.length,r=i?n:t,o=i?t:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};this._answer(e,o,r)},n.prototype.handleAnswer=function(e){this.pc.setRemoteDescription(new r.SessionDescription(e))},n.prototype.close=function(){this.pc.close(),this.emit("close")},n.prototype._answer=function(e,t,n){var i=this;this.pc.setRemoteDescription(new r.SessionDescription(e)),this.pc.createAnswer(function(e){e.sdp=i._applySdpHack(e.sdp),i.pc.setLocalDescription(e),i.emit("answer",e),n&&n(null,e)},function(e){i.emit("error",e),n&&n(e)},t)},n.prototype._onIce=function(e){e.candidate?this.emit("ice",e.candidate):this.emit("endOfCandidates")},n.prototype._onDataChannel=function(e){this.emit("addChannel",e.channel)},n.prototype._onAddStream=function(e){this.remoteStream=e.stream,this.emit("addStream",e)},n.prototype._applySdpHack=function(e){if(!this.config.sdpHack)return e;var t=e.split("b=AS:30");return 2===t.length?t[0]+"b=AS:102400"+t[1]:e},n.prototype.createDataChannel=function(e,t){t||(t={});var n,i,o=!!t.reliable,s=t.protocol||"text/plain",a=!(!t.negotiated&&!t.preset);return"moz"===r.prefix?(n=o?{protocol:s,preset:a,stream:e}:{},i=this.pc.createDataChannel(e,n),i.binaryType="blob"):(n=o?{reliable:!0}:{reliable:!1},i=this.pc.createDataChannel(e,n)),i},t.exports=n},{webrtcsupport:5,wildemitter:3}],12:[function(e,t){function n(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var i=0,r=t.length;r>i;i++)t[i]>n&&t[i]<0&&(n=t[i]);return n}var i=e("wildemitter");t.exports=function(e,t){var r=new i;if(!window.webkitAudioContext)return r;var o,s,a,t=t||{},c=t.smoothing||.5,l=t.interval||100,u=t.threshold,h=t.play,d=new webkitAudioContext;a=d.createAnalyser(),a.fftSize=512,a.smoothingTimeConstant=c,s=new Float32Array(a.fftSize),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement?(o=d.createMediaElementSource(e),"undefined"==typeof h&&(h=!0),u=u||-65):(o=d.createMediaStreamSource(e),u=u||-45),o.connect(a),h&&a.connect(d.destination),r.speaking=!1,r.setThreshold=function(e){u=e},r.setInterval=function(e){l=e};var f=function(){setTimeout(function(){var e=n(a,s);r.emit("volume_change",e,u),e>u?r.speaking||(r.speaking=!0,r.emit("speaking")):r.speaking&&(r.speaking=!1,r.emit("stopped_speaking")),f()},l)};return f(),r}},{wildemitter:3}]},{},[1])(1)}),define("connection/models/stream",[],function(){return Backbone.Model.extend({toJSON:function(){var e=_.clone(this.attributes),t=e.videoEl,n=HT.Hexagon.Static.WIDTH,i=HT.Hexagon.Static.HEIGHT,r=n/t.videoWidth,o=i/t.videoHeight,s=e.scale=Math.max(r,o),a=e.height=t.videoHeight*s,c=e.width=t.videoWidth*s;return e.centerX=.5*(c-n),e.centerY=.5*(a-i),e}})}),define("connection/collections/streams",["../models/stream"],function(e){return Backbone.Collection.extend({model:e})}),define("connection/controller",["vendor/simplewebrtc","./collections/streams"],function(e,t){var n=Marionette.Controller.extend({initialize:function(){this.driver=new e({autoRequestMedia:!0,autoRemoveVideos:!1,localVideoEl:document.createElement("div"),remoteVideosEl:document.createElement("div")}),this.driver.on("readyToCall",this.boot.bind(this)),this.driver.on("videoAdded",this.addVideo.bind(this)),this.driver.on("videoRemoved",this.removeVideo.bind(this)),this.collection=new t,this.driver.connection.on("message",function(e){this.trigger("message",e),this.trigger("message:"+e.type,e)}.bind(this))},localVideo:function(){return this.driver.getEl(this.driver.config.localVideoEl).querySelector("video")},boot:function(e){this.collection.add({id:e,local:!0,videoEl:this.localVideo()}),this.driver.resume(),this.driver.joinRoom(window.location.pathname.slice(1))},addVideo:function(e,t){this.collection.add(t),this.trigger("stream:added")},removeVideo:function(e,t){this.collection.remove(t.id),this.trigger("stream:removed")},send:function(e,t){this.driver.webrtc.sendToAll(e,t)}});return n}),define("connection/core",["core","connection/controller"],function(e,t){var n=e.module("Connection"),i=n.controller=new t;return i.on("stream:added",function(){e.vent.trigger("connection:stream:added")}),i.on("stream:added",function(){e.vent.trigger("connection:stream:removed")}),e.reqres.setHandler("connection:streams",function(){return i.collection}),e.commands.setHandler("connection:mute",function(){i.driver.mute()}),e.commands.setHandler("connection:unmute",function(){i.driver.unmute()}),e.commands.setHandler("connection:pause",function(){i.driver.pause()}),e.commands.setHandler("connection:resume",function(){i.driver.resume()}),n}),define("text",{});var Handlebars={};!function(e,t){e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var n=Object.prototype.toString,i="[object Function]",r="[object Object]";e.registerHelper=function(t,i,o){if(n.call(t)===r){if(o||i)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else o&&(i.not=o),this.helpers[t]=i},e.registerPartial=function(t,i){n.call(t)===r?e.Utils.extend(this.partials,t):this.partials[t]=i},e.registerHelper("helperMissing",function(e){if(2===arguments.length)return t;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,r){var o=r.inverse||function(){},s=r.fn,a=n.call(t);return a===i&&(t=t.call(this)),t===!0?s(this):t===!1||null==t?o(this):"[object Array]"===a?t.length>0?e.helpers.each(t,r):o(this):s(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var i=e.logger.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,r){var o,s=r.fn,a=r.inverse,c=0,l="",u=n.call(t);if(u===i&&(t=t.call(this)),r.data&&(o=e.createFrame(r.data)),t&&"object"==typeof t)if(t instanceof Array)for(var h=t.length;h>c;c++)o&&(o.index=c),l+=s(t[c],{data:o});else for(var d in t)t.hasOwnProperty(d)&&(o&&(o.key=d),l+=s(t[d],{data:o}),c++);return 0===c&&(l=a(this)),l}),e.registerHelper("if",function(t,r){var o=n.call(t);return o===i&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?r.inverse(this):r.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(t,r){var o=n.call(t);return o===i&&(t=t.call(this)),e.Utils.isEmpty(t)?void 0:r.fn(t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)});var o=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;t<o.length;t++)this[o[t]]=e[o[t]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,c=/[&<>"'`]/,l=function(e){return s[e]||"&amp;"};e.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():null==t||t===!1?"":(t=t.toString(),c.test(t)?t.replace(a,l):t)},isEmpty:function(e){return e||0===e?"[object Array]"===n.call(e)&&0===e.length?!0:!1:!0}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,i){var r=this.programs[t];return i?r=e.VM.program(t,n,i):r||(r=this.programs[t]=e.VM.program(t,n)),r},merge:function(t,n){var i=t||n;return t&&n&&(i={},e.Utils.extend(i,n),e.Utils.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,r){r=r||{};var o=t.call(n,e,i,r.helpers,r.partials,r.data),s=n.compilerInfo||[],a=s[0]||1,c=e.COMPILER_REVISION;if(a!==c){if(c>a){var l=e.REVISION_CHANGES[c],u=e.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+l+") or downgrade your runtime to an older version ("+u+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return o}},programWithDepth:function(e,t,n){var i=Array.prototype.slice.call(arguments,3),r=function(e,r){return r=r||{},t.apply(this,[e,r.data||n].concat(i))};return r.program=e,r.depth=i.length,r},program:function(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,r,o,s,a){var c={helpers:o,partials:s,data:a};if(n===t)throw new e.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(r,c);if(e.compile)return s[i]=e.compile(n,{data:a!==t}),s[i](r,c);throw new e.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")}},e.template=e.VM.template}(Handlebars),define("Handlebars",function(e){return function(){var t;return t||e.Handlebars}}(this)),define("hbars",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("hbars!presentation/templates/honeycomb",["Handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<canvas class="backdrop__layer background"></canvas>\n<canvas class="backdrop__layer middleground"></canvas>\n<canvas class="backdrop__layer foreground"></canvas>\n<canvas class="backdrop__layer overlay"></canvas>'})}),define("presentation/views/honeycomb",["hbars!../templates/honeycomb"],function(e){return Marionette.ItemView.extend({template:e,ui:{background:".background",middleground:".middleground",foreground:".foreground",overlay:".overlay"},collectionEvents:{add:"videoLoop"},initialize:function(){$(window).on("resize",this.drawTileMap.bind(this))},allLayers:function(){return this.$(".backdrop__layer")},draw:function(e,t){var n=this.getContext("overlay"),i=this.ui.overlay[0].cloneNode(),r=i.getContext("2d");HT.Hexagon.Static.WIDTH,HT.Hexagon.Static.HEIGHT;for(var o=0,s=t.length;s>o;o++){var a=e[o],c=t[o];r.drawImage(c.videoEl,a.x-c.centerX,a.y-c.centerY,c.width,c.height),r.globalCompositeOperation="destination-in",a.draw(r,!1,"#000"),r.globalCompositeOperation="source-over",a.draw(r,"#082631"),n.drawImage(i,0,0)}},videoLoop:function(){var e=this.grid.Hexes.slice(10),t=this.collection.toJSON();cancelAnimationFrame(this.frame);var n=Date.now();this.frame=requestAnimationFrame(function i(){var r=Date.now()-n>1e3/30;this.frame=requestAnimationFrame(i.bind(this)),t.length&&r&&(n=Date.now(),this.draw(e,t))}.bind(this))},drawTileMap:function(){var e=1.2*window.innerWidth,t=1.2*window.innerHeight;this.allLayers().each(function(){$(this).attr({height:t,width:e})}),this.grid=new HT.Grid(e,t),this.cache=this.grid.Cache(),this.getContext("background").drawImage(this.cache,0,0),this.videoLoop()},getContext:function(e){return this.$(".backdrop__layer."+e)[0].getContext("2d")},onDomRefresh:function(){this.drawTileMap()}})}),define("hbars!presentation/templates/utility",["Handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<nav class="actionbar">\n	<a href="/" class="actionbar__logo">\n		<img src="/images/logo.png" alt="DoppelGanger">\n	</a>\n	<ul class="actionbar__nav">\n		<li>\n			<a href="#" class="actionbar__nav__control actionbar__nav__control--mute">\n				<i class="icon">&#xe602;</i>\n				<i class="visually-hidden">Mute Microphone</i>\n			</a>\n		</li>\n		<li>\n			<a href="#" class="actionbar__nav__control actionbar__nav__control--pause">\n				<i class="icon">&#xe603;</i>\n				<i class="visually-hidden">Pause Video</i>\n			</a>\n		</li>\n	</ul>\n</nav>'
})}),define("presentation/views/utility",["hbars!../templates/utility","core"],function(e,t){return Marionette.ItemView.extend({template:e,events:{"click 	.actionbar__nav__control--mute":"toggleMute","click 	.actionbar__nav__control--pause":"togglePause"},ui:{mute:".actionbar__nav__control--mute",pause:".actionbar__nav__control--pause"},toggleMute:function(){var e=this.ui.mute.toggleClass("is-active").hasClass("is-active"),n=e?"mute":"unmute";t.execute("connection:"+n)},togglePause:function(){var e=this.ui.pause.toggleClass("is-active").hasClass("is-active"),n=e?"pause":"resume";t.execute("connection:"+n)}})}),define("hbars!presentation/templates/scene",["Handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="region--utility"></div>\n<div class="region--backdrop"></div>\n<div class="region--videos"></div>'})}),define("presentation/views/scene",["core","./honeycomb","./utility","hbars!../templates/scene"],function(e,t,n,i){return Marionette.Layout.extend({className:"scene",template:i,regions:{backdrop:".region--backdrop",utility:".region--utility",videos:".region--videos"},onDomRefresh:function(){var i=e.request("connection:streams");this.utility.show(new n),this.backdrop.show(new t({collection:i}))}})}),define("presentation/core",["core","./views/scene"],function(e,t){var n=e.module("Presentation");return n.addInitializer(function(){e.main.show(new t({collection:e.request("connection:streams")}))}),n}),require(["core","connection/core","presentation/core"],function(e){e.start()}),define("setup",function(){}),require(["setup"]);