var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,i,r,o,s,a,c,l,u,h,f=t&&t.split("/"),p=g.map,d=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),l=0;l<e.length;l+=1)if(h=e[l],"."===h)e.splice(l,1),l-=1;else if(".."===h){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||d)&&p){for(n=e.split("/"),l=n.length;l>0;l-=1){if(i=n.slice(0,l).join("/"),f)for(u=f.length;u>0;u-=1)if(r=p[f.slice(0,u).join("/")],r&&(r=r[i])){o=r,s=l;break}if(o)break;!a&&d&&d[i]&&(a=d[i],c=l)}!o&&a&&(o=a,s=c),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function i(t,n){return function(){return u.apply(e,y.call(arguments,0).concat([t,n]))}}function r(e){return function(t){return n(t,e)}}function o(e){return function(t){p[e]=t}}function s(n){if(t(d,n)){var i=d[n];delete d[n],m[n]=!0,l.apply(e,i)}if(!t(p,n)&&!t(m,n))throw new Error("No "+n);return p[n]}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return g&&g.config&&g.config[e]||{}}}var l,u,h,f,p={},d={},g={},m={},v=Object.prototype.hasOwnProperty,y=[].slice;h=function(e,t){var i,o=a(e),c=o[0];return e=o[1],c&&(c=n(c,t),i=s(c)),c?e=i&&i.normalize?i.normalize(e,r(t)):n(e,t):(e=n(e,t),o=a(e),c=o[0],e=o[1],c&&(i=s(c))),{f:c?c+"!"+e:e,n:e,pr:c,p:i}},f={require:function(e){return i(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:c(e)}}},l=function(n,r,a,c){var l,u,g,v,y,b,w=[];if(c=c||n,"function"==typeof a){for(r=!r.length&&a.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=h(r[y],c),u=v.f,"require"===u)w[y]=f.require(n);else if("exports"===u)w[y]=f.exports(n),b=!0;else if("module"===u)l=w[y]=f.module(n);else if(t(p,u)||t(d,u)||t(m,u))w[y]=s(u);else{if(!v.p)throw new Error(n+" missing "+u);v.p.load(v.n,i(c,!0),o(u),{}),w[y]=p[u]}g=a.apply(p[n],w),n&&(l&&l.exports!==e&&l.exports!==p[n]?p[n]=l.exports:g===e&&b||(p[n]=g))}else n&&(p[n]=a)},requirejs=require=u=function(t,n,i,r,o){return"string"==typeof t?f[t]?f[t](n):s(h(t,n).f):(t.splice||(g=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},"function"==typeof i&&(i=r,r=o),r?l(e,t,n,i):setTimeout(function(){l(e,t,n,i)},4),u)},u.config=function(e){return g=e,g.deps&&u(g.deps,g.callback),u},requirejs._defined=p,define=function(e,n,i){n.splice||(i=n,n=[]),t(p,e)||t(d,e)||(d[e]=[e,n,i])},define.amd={jQuery:!0}}(),define("vendor/almond",function(){}),function(){var e={};e.Point=function(e,t){this.X=e,this.Y=t},e.Rectangle=function(e,t,n,i){this.X=e,this.Y=t,this.Width=n,this.Height=i},e.Line=function(e,t,n,i){this.X1=e,this.Y1=t,this.X2=n,this.Y2=i},e.Hexagon=function(t,n,i){this.Points=[];var r=null,o=null;e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?(r=(e.Hexagon.Static.WIDTH-e.Hexagon.Static.SIDE)/2,o=e.Hexagon.Static.HEIGHT/2,this.Points.push(new e.Point(r+n,i)),this.Points.push(new e.Point(r+e.Hexagon.Static.SIDE+n,i)),this.Points.push(new e.Point(e.Hexagon.Static.WIDTH+n,o+i)),this.Points.push(new e.Point(r+e.Hexagon.Static.SIDE+n,e.Hexagon.Static.HEIGHT+i)),this.Points.push(new e.Point(r+n,e.Hexagon.Static.HEIGHT+i)),this.Points.push(new e.Point(n,o+i))):(r=e.Hexagon.Static.WIDTH/2,o=(e.Hexagon.Static.HEIGHT-e.Hexagon.Static.SIDE)/2,this.Points.push(new e.Point(r+n,i)),this.Points.push(new e.Point(e.Hexagon.Static.WIDTH+n,o+i)),this.Points.push(new e.Point(e.Hexagon.Static.WIDTH+n,o+e.Hexagon.Static.SIDE+i)),this.Points.push(new e.Point(r+n,e.Hexagon.Static.HEIGHT+i)),this.Points.push(new e.Point(n,o+e.Hexagon.Static.SIDE+i)),this.Points.push(new e.Point(n,o+i))),this.Id=t,this.x=n,this.y=i,this.x1=r,this.y1=o,this.TopLeftPoint=new e.Point(this.x,this.y),this.BottomRightPoint=new e.Point(this.x+e.Hexagon.Static.WIDTH,this.y+e.Hexagon.Static.HEIGHT),this.MidPoint=new e.Point(this.x+e.Hexagon.Static.WIDTH/2,this.y+e.Hexagon.Static.HEIGHT/2),this.P1=new e.Point(n+r,i+o),this.selected=!1},e.Hexagon.prototype.draw=function(e,t,n){e.beginPath(),e.moveTo(this.Points[0].X,this.Points[0].Y);for(var i=1;i<this.Points.length;i++){var r=this.Points[i];e.lineTo(r.X,r.Y)}e.closePath(),e.lineWidth=2,e.strokeStyle=t||"#0c2731",(this.selected||n)&&(e.fillStyle=n||"rgba(0, 0, 0, 0.15)",e.fill()),t!==!1&&e.stroke()},e.Hexagon.prototype.isInBounds=function(t,n){return this.Contains(new e.Point(t,n))},e.Hexagon.prototype.isInHexBounds=function(e){return this.TopLeftPoint.X<e.X&&this.TopLeftPoint.Y<e.Y&&e.X<this.BottomRightPoint.X&&e.Y<this.BottomRightPoint.Y?!0:!1},e.Hexagon.prototype.Contains=function(e){var t=!1;if(this.isInHexBounds(e)){var n,i=0;for(n=0,i=this.Points.length-1;n<this.Points.length;i=n++){var r=this.Points[n],o=this.Points[i];(r.Y<=e.Y&&e.Y<o.Y||o.Y<=e.Y&&e.Y<r.Y)&&e.X<(o.X-r.X)*(e.Y-r.Y)/(o.Y-r.Y)+r.X&&(t=!t)}}return t},e.Hexagon.prototype.isOnScreen=function(e,t){var n=this.MidPoint,i=n.X+(e||0),r=n.Y+(t||0);return 0>i||i>window.innerWidth?!1:0>r||r>window.innerHeight?!1:!0},e.Hexagon.Orientation={Normal:0,Rotated:1},e.Hexagon.Static={HEIGHT:173.20508075688775,WIDTH:200,SIDE:100,ORIENTATION:e.Hexagon.Orientation.Normal,DRAWSTATS:!1},window.HT=e}(),define("vendor/hex/tools",function(){}),function(e){window.findHexWithSideLengthZAndRatio=function(t,n){t=t||50,n=n||1.1547;var i=Math.pow(n,2),r=(1+i)/i,o=t/i,s=(1-4*i)/(4*i)*Math.pow(t,2),a=(-o+Math.sqrt(Math.pow(o,2)-4*r*s))/(2*r),c=(2*a+t)/(2*n),l=2*a+t,u=2*c;e.Hexagon.Static.WIDTH=l,e.Hexagon.Static.HEIGHT=u,e.Hexagon.Static.SIDE=t},window.findHexWithWidthAndHeight=function(t,n){t=t||100,n=n||86.60254037844388;var i=-3,r=-2*t,o=Math.pow(t,2)+Math.pow(n,2),s=(-r-Math.sqrt(Math.pow(r,2)-4*i*o))/(2*i);e.Hexagon.Static.WIDTH=t,e.Hexagon.Static.HEIGHT=n,e.Hexagon.Static.SIDE=s}}(window.HT),define("vendor/hex/calculations",function(){}),function(e){e.Grid=function(t,n){this.Hexes=[],this.width=t,this.height=n;for(var i={},r=0,o=0;o+e.Hexagon.Static.HEIGHT<=n;){var s=0,a=0;1===r%2&&(a=e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?(e.Hexagon.Static.WIDTH-e.Hexagon.Static.SIDE)/2+e.Hexagon.Static.SIDE:e.Hexagon.Static.WIDTH/2,s=1);for(var c=a;c+e.Hexagon.Static.WIDTH<=t;){var l=this.GetHexId(r,s),u=new e.Hexagon(l,c,o),h=s;e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?u.PathCoOrdX=s:(u.PathCoOrdY=r,h=r),this.Hexes.push(u),i[h]||(i[h]=[]),i[h].push(u),s+=2,c+=e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?e.Hexagon.Static.WIDTH+e.Hexagon.Static.SIDE:e.Hexagon.Static.WIDTH}r++,o+=e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?e.Hexagon.Static.HEIGHT/2:(e.Hexagon.Static.HEIGHT-e.Hexagon.Static.SIDE)/2+e.Hexagon.Static.SIDE}for(var f in i){var p=i[f],d=Math.floor(f/2)+f%2;for(var g in p){var m=p[g];e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?m.PathCoOrdY=d++:m.PathCoOrdX=d++}}},e.Grid.Static={Letters:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},e.Grid.prototype.GetHexId=function(t,n){for(var i=t,r="";i>25;)r=e.Grid.Static.Letters[i%26]+r,i-=26;return e.Grid.Static.Letters[i]+r+(n+1)},e.Grid.prototype.GetHexAt=function(e){for(var t in this.Hexes)if(this.Hexes[t].Contains(e))return this.Hexes[t];return null},e.Grid.prototype.GetHexDistance=function(e,t){var n=e.PathCoOrdX-t.PathCoOrdX,i=e.PathCoOrdY-t.PathCoOrdY;return(Math.abs(n)+Math.abs(i)+Math.abs(n-i))/2},e.Grid.prototype.GetHexById=function(e){for(var t in this.Hexes)if(this.Hexes[t].Id===e)return this.Hexes[t];return null},e.Grid.prototype.GetHexByCartesian=function(e,t){for(var n in this.Hexes)if(this.Hexes[n].PathCoOrdX===e&&this.Hexes[n].PathCoOrdY===t)return this.Hexes[n];return null},e.Grid.prototype.Cache=function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.width,e.height=this.height;for(var n in this.Hexes)this.Hexes[n].draw(t);return this.selected&&this.selected.draw(t),e},e.Grid.prototype.select=function(e){for(var t in this.Hexes)this.Hexes[t].selected=!1;e.selected=!0,this.selected=e},e.Grid.prototype.each=function(e,t){var n=0,i=this.Hexes.length;for(i;i>n;n++)e.call(t||this,this.Hexes[n]);return this},e.Grid.prototype.eachOnScreen=function(e,t,n,i){var r=0,o=this.Hexes.length;for(o;o>r;r++)this.Hexes[r].isOnScreen(e,t)&&n.call(i||this,this.Hexes[r])}}(window.HT),define("hex",["vendor/hex/tools","vendor/hex/calculations"],function(){}),function(){function e(e,t,n){for(var i=(n||0)-1,r=e?e.length:0;++i<r;)if(e[i]===t)return i;return-1}function t(t,n){var i=typeof n;if(t=t.cache,"boolean"==i||null==n)return t[n]?0:-1;"number"!=i&&"string"!=i&&(i="object");var r="number"==i?n:w+n;return t=(t=t[i])&&t[r],"object"==i?t&&e(t,n)>-1?0:-1:t?0:-1}function n(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var i="number"==n?e:w+e,r=t[n]||(t[n]={});"object"==n?(r[i]||(r[i]=[])).push(e):r[i]=!0}}function i(e){return e.charCodeAt(0)}function r(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||"undefined"==typeof n)return 1;if(i>n||"undefined"==typeof i)return-1}return e.index-t.index}function o(e){var t=-1,i=e.length,r=e[0],o=e[0|i/2],s=e[i-1];if(r&&"object"==typeof r&&o&&"object"==typeof o&&s&&"object"==typeof s)return!1;var a=c();a["false"]=a["null"]=a["true"]=a.undefined=!1;var l=c();for(l.array=e,l.cache=a,l.push=n;++t<i;)l.push(e[t]);return l}function s(e){return"\\"+et[e]}function a(){return m.pop()||[]}function c(){return v.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function u(){}function h(e){e.length=0,m.length<C&&m.push(e)}function f(e){var t=e.cache;t&&f(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,v.length<C&&v.push(e)}function p(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var i=-1,r=n-t||0,o=Array(0>r?0:r);++i<r;)o[i]=e[t+i];return o}function d(n){function m(e){return e&&"object"==typeof e&&!cr(e)&&Ii.call(e,"__wrapped__")?e:new v(e)}function v(e,t){this.__chain__=!!t,this.__wrapped__=e}function C(e,t,n,i,r){if(n){var o=n(e);if("undefined"!=typeof o)return o}var s=Pt(e);if(!s)return e;var c=$i.call(e);if(!G[c]||!or.nodeClass&&l(e))return e;var u=ir[c];switch(c){case $:case z:return new u(+e);case B:case U:return new u(e);case Y:return o=u(e.source,A.exec(e)),o.lastIndex=e.lastIndex,o}var f=cr(e);if(t){var d=!i;i||(i=a()),r||(r=a());for(var g=i.length;g--;)if(i[g]==e)return r[g];o=f?u(e.length):{}}else o=f?p(e):br({},e);return f&&(Ii.call(e,"index")&&(o.index=e.index),Ii.call(e,"input")&&(o.input=e.input)),t?(i.push(e),r.push(o),(f?yr:Cr)(e,function(e,s){o[s]=C(e,t,n,i,r)}),d&&(h(i),h(r)),o):o}function et(e,t,n){if("function"!=typeof e)return Qn;if("undefined"==typeof t)return e;var i=e.__bindData__||or.funcNames&&!e.name;if("undefined"==typeof i){var r=I&&Oi.call(e);or.funcNames||!r||M.test(r)||(i=!0),(or.funcNames||!i)&&(i=!or.funcDecomp||I.test(r),ar(e,i))}if(i!==!0&&i&&1&i[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return Nn(e,t)}function nt(e,t,n,i){for(var r=(i||0)-1,o=e?e.length:0,s=[];++r<o;){var a=e[r];if(a&&"object"==typeof a&&"number"==typeof a.length&&(cr(a)||mt(a))){t||(a=nt(a,t,n));var c=-1,l=a.length,u=s.length;for(s.length+=l;++c<l;)s[u++]=a[c]}else n||s.push(a)}return s}function it(e,t,n,i,r,o){if(n){var s=n(e,t);if("undefined"!=typeof s)return!!s}if(e===t)return 0!==e||1/e==1/t;var c=typeof e,u=typeof t;if(!(e!==e||e&&Z[c]||t&&Z[u]))return!1;if(null==e||null==t)return e===t;var f=$i.call(e),p=$i.call(t);if(f==F&&(f=X),p==F&&(p=X),f!=p)return!1;switch(f){case $:case z:return+e==+t;case B:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case Y:case U:return e==xi(t)}var d=f==L;if(!d){if(Ii.call(e,"__wrapped__ ")||Ii.call(t,"__wrapped__"))return it(e.__wrapped__||e,t.__wrapped__||t,n,i,r,o);if(f!=X||!or.nodeClass&&(l(e)||l(t)))return!1;var g=!or.argsObject&&mt(e)?bi:e.constructor,m=!or.argsObject&&mt(t)?bi:t.constructor;if(g!=m&&!(Ot(g)&&g instanceof g&&Ot(m)&&m instanceof m))return!1}var v=!r;r||(r=a()),o||(o=a());for(var y=r.length;y--;)if(r[y]==e)return o[y]==t;var b=0;if(s=!0,r.push(e),o.push(t),d){if(y=e.length,b=t.length,s=b==e.length,!s&&!i)return s;for(;b--;){var w=y,x=t[b];if(i)for(;w--&&!(s=it(e[w],x,n,i,r,o)););else if(!(s=it(e[b],x,n,i,r,o)))break}return s}return xr(t,function(t,a,c){return Ii.call(c,a)?(b++,s=Ii.call(e,a)&&it(e[a],t,n,i,r,o)):void 0}),s&&!i&&xr(e,function(e,t,n){return Ii.call(n,t)?s=--b>-1:void 0}),v&&(h(r),h(o)),s}function ot(e,t,n,i,r){(cr(t)?Qt:Cr)(t,function(t,o){var s,a,c=t,l=e[o];if(t&&((a=cr(t))||_r(t))){for(var u=i.length;u--;)if(s=i[u]==t){l=r[u];break}if(!s){var h;n&&(c=n(l,t),(h="undefined"!=typeof c)&&(l=c)),h||(l=a?cr(l)?l:[]:_r(l)?l:{}),i.push(t),r.push(l),h||ot(l,t,n,i,r)}}else n&&(c=n(l,t),"undefined"==typeof c&&(c=t)),"undefined"!=typeof c&&(l=c);e[o]=l})}function at(n,i,r){var s=-1,c=pt(),l=n?n.length:0,u=[],p=!i&&l>=x&&c===e,d=r||p?a():u;if(p){var g=o(d);g?(c=t,d=g):(p=!1,d=r?d:(h(d),u))}for(;++s<l;){var m=n[s],v=r?r(m,s,n):m;(i?!s||d[d.length-1]!==v:c(d,v)<0)&&((r||p)&&d.push(v),u.push(m))}return p?(h(d.array),f(d)):r&&h(d),u}function ct(e){return function(t,n,i){var r={};if(n=m.createCallback(n,i,3),cr(t))for(var o=-1,s=t.length;++o<s;){var a=t[o];e(r,a,n(a,o,t),t)}else yr(t,function(t,i,o){e(r,t,n(t,i,o),o)});return r}}function lt(e,t,n,i,r,o){var s=1&t,a=2&t,c=4&t,l=8&t,u=16&t,h=32&t,f=e;if(!a&&!Ot(e))throw new Ci;u&&!n.length&&(t&=-17,u=n=!1),h&&!i.length&&(t&=-33,h=i=!1);var p=e&&e.__bindData__;if(p)return!s||1&p[1]||(p[4]=r),!s&&1&p[1]&&(t|=8),!c||4&p[1]||(p[5]=o),u&&Ni.apply(p[2]||(p[2]=[]),n),h&&Ni.apply(p[3]||(p[3]=[]),i),p[1]|=t,lt.apply(null,p);if(!s||a||c||h||!(or.fastBind||Wi&&u))g=function(){var p=arguments,d=s?r:this;if((c||u||h)&&(p=er.call(p),u&&zi.apply(p,n),h&&Ni.apply(p,i),c&&p.length<o))return t|=16,lt(e,l?t:-4&t,p,null,r,o);if(a&&(e=d[f]),this instanceof g){d=ht(e.prototype);var m=e.apply(d,p);return Pt(m)?m:d}return e.apply(d,p)};else{if(u){var d=[r];Ni.apply(d,n)}var g=u?Wi.apply(e,d):Wi.call(e,r)}return ar(g,er.call(arguments)),g}function ut(){Q.shadowedProps=j,Q.array=Q.bottom=Q.loop=Q.top="",Q.init="iterable",Q.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)Q[n]=e[n];var i=Q.args;Q.firstArg=/^[^,]+/.exec(i)[0];var r=mi("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+i+") {\n"+sr(Q)+"\n}");return r(et,q,Ei,Ii,b,mt,cr,Vt,Q.keys,Si,Z,rr,U,ki,$i)}function ht(e){return Pt(e)?Bi(e):{}}function ft(e){return dr[e]}function pt(){var t=(t=m.indexOf)===wn?e:t;return t}function dt(e){var t,n;return!e||$i.call(e)!=X||(t=e.constructor,Ot(t)&&!(t instanceof t))||!or.argsClass&&mt(e)||!or.nodeClass&&l(e)?!1:or.ownLast?(xr(e,function(e,t,i){return n=Ii.call(i,t),!1}),n!==!1):(xr(e,function(e,t){n=t}),"undefined"==typeof n||Ii.call(e,n))}function gt(e){return gr[e]}function mt(e){return e&&"object"==typeof e&&"number"==typeof e.length&&$i.call(e)==F||!1}function vt(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=t,t=!1),C(e,t,"function"==typeof n&&et(n,i,1))}function yt(e,t,n){return C(e,!0,"function"==typeof t&&et(t,n,1))}function bt(e,t,n){var i;return t=m.createCallback(t,n,3),Cr(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i}function wt(e,t,n){var i;return t=m.createCallback(t,n,3),Ct(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i}function xt(e,t,n){var i=[];xr(e,function(e,t){i.push(t,e)});var r=i.length;for(t=et(t,n,3);r--&&t(i[r--],i[r],e)!==!1;);return e}function Ct(e,t,n){var i=ur(e),r=i.length;for(t=et(t,n,3);r--;){var o=i[r];if(t(e[o],o,e)===!1)break}return e}function _t(e){var t=[];return xr(e,function(e,n){Ot(e)&&t.push(n)}),t.sort()}function Et(e,t){return e?Ii.call(e,t):!1}function St(e){for(var t=-1,n=ur(e),i=n.length,r={};++t<i;){var o=n[t];r[e[o]]=o}return r}function kt(e){return e===!0||e===!1||$i.call(e)==$}function Tt(e){return e?"object"==typeof e&&$i.call(e)==z:!1}function Ht(e){return e?1===e.nodeType:!1}function At(e){var t=!0;if(!e)return t;var n=$i.call(e),i=e.length;return n==L||n==U||(or.argsClass?n==F:mt(e))||n==X&&"number"==typeof i&&Ot(e.splice)?!i:(Cr(e,function(){return t=!1}),t)}function Mt(e,t,n,i){return it(e,t,"function"==typeof n&&et(n,i,2))}function Rt(e){return Yi(e)&&!Ui(parseFloat(e))}function Ot(e){return"function"==typeof e}function Pt(e){return!(!e||!Z[typeof e])}function It(e){return Nt(e)&&e!=+e}function Dt(e){return null===e}function Nt(e){return"number"==typeof e||$i.call(e)==B}function jt(e){return e&&Z[typeof e]?$i.call(e)==Y:!1}function Vt(e){return"string"==typeof e||$i.call(e)==U}function Ft(e){return"undefined"==typeof e}function Lt(e){var t=arguments,n=2;if(!Pt(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var i=et(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(i=t[--n]);for(var r=er.call(arguments,1,n),o=-1,s=a(),c=a();++o<n;)ot(e,r[o],i,s,c);return h(s),h(c),e}function $t(e,t,n){var i=pt(),r="function"==typeof t,o={};if(r)t=m.createCallback(t,n,3);else var s=nt(arguments,!0,!1,1);return xr(e,function(e,n,a){(r?!t(e,n,a):i(s,n)<0)&&(o[n]=e)}),o}function zt(e){for(var t=-1,n=ur(e),i=n.length,r=fi(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r}function qt(e,t,n){var i={};if("function"!=typeof t)for(var r=-1,o=nt(arguments,!0,!1,1),s=Pt(e)?o.length:0;++r<s;){var a=o[r];a in e&&(i[a]=e[a])}else t=m.createCallback(t,n,3),xr(e,function(e,n,r){t(e,n,r)&&(i[n]=e)});return i}function Wt(e,t,n,i){var r=cr(e);if(t=et(t,i,4),null==n)if(r)n=[];else{var o=e&&e.constructor,s=o&&o.prototype;n=ht(s)}return(r?yr:Cr)(e,function(e,i,r){return t(n,e,i,r)}),n}function Bt(e){for(var t=-1,n=ur(e),i=n.length,r=fi(i);++t<i;)r[t]=e[n[t]];return r}function Xt(e){var t=arguments,n=-1,i=nt(t,!0,!1,1),r=t[2]&&t[2][t[1]]===e?1:i.length,o=fi(r);for(or.unindexedChars&&Vt(e)&&(e=e.split(""));++n<r;)o[n]=e[i[n]];return o}function Yt(e,t,n){var i=-1,r=pt(),o=e?e.length:0,s=!1;return n=(0>n?Ji(0,o+n):n)||0,cr(e)?s=r(e,t,n)>-1:"number"==typeof o?s=(Vt(e)?e.indexOf(t,n):r(e,t,n))>-1:yr(e,function(e){return++i>=n?!(s=e===t):void 0}),s}function Ut(e,t,n){var i=!0;if(t=m.createCallback(t,n,3),cr(e))for(var r=-1,o=e.length;++r<o&&(i=!!t(e[r],r,e)););else yr(e,function(e,n,r){return i=!!t(e,n,r)});return i}function Gt(e,t,n){var i=[];if(t=m.createCallback(t,n,3),cr(e))for(var r=-1,o=e.length;++r<o;){var s=e[r];t(s,r,e)&&i.push(s)}else yr(e,function(e,n,r){t(e,n,r)&&i.push(e)});return i}function Jt(e,t,n){if(t=m.createCallback(t,n,3),!cr(e)){var i;return yr(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}for(var r=-1,o=e.length;++r<o;){var s=e[r];if(t(s,r,e))return s}}function Kt(e,t,n){var i;return t=m.createCallback(t,n,3),Zt(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}function Qt(e,t,n){if(t&&"undefined"==typeof n&&cr(e))for(var i=-1,r=e.length;++i<r&&t(e[i],i,e)!==!1;);else yr(e,t,n);return e}function Zt(e,t,n){var i=e,r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:et(t,n,3),cr(e))for(;r--&&t(e[r],r,e)!==!1;);else{if("number"!=typeof r){var o=ur(e);r=o.length}else or.unindexedChars&&Vt(e)&&(i=e.split(""));yr(e,function(e,n,s){return n=o?o[--r]:--r,t(i[n],n,s)})}return e}function en(e,t){var n=er.call(arguments,2),i=-1,r="function"==typeof t,o=e?e.length:0,s=fi("number"==typeof o?o:0);return Qt(e,function(e){s[++i]=(r?t:e[t]).apply(e,n)}),s}function tn(e,t,n){var i=-1,r=e?e.length:0,o=fi("number"==typeof r?r:0);if(t=m.createCallback(t,n,3),cr(e))for(;++i<r;)o[i]=t(e[i],i,e);else yr(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function nn(e,t,n){var r=-1/0,o=r;if(!t&&cr(e))for(var s=-1,a=e.length;++s<a;){var c=e[s];c>o&&(o=c)}else t=!t&&Vt(e)?i:m.createCallback(t,n,3),yr(e,function(e,n,i){var s=t(e,n,i);s>r&&(r=s,o=e)});return o}function rn(e,t,n){var r=1/0,o=r;if(!t&&cr(e))for(var s=-1,a=e.length;++s<a;){var c=e[s];o>c&&(o=c)}else t=!t&&Vt(e)?i:m.createCallback(t,n,3),yr(e,function(e,n,i){var s=t(e,n,i);r>s&&(r=s,o=e)});return o}function on(e,t,n,i){var r=arguments.length<3;if(t=et(t,i,4),cr(e)){var o=-1,s=e.length;for(r&&(n=e[++o]);++o<s;)n=t(n,e[o],o,e)}else yr(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)});return n}function sn(e,t,n,i){var r=arguments.length<3;return t=et(t,i,4),Zt(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function an(e,t,n){return t=m.createCallback(t,n,3),Gt(e,function(e,n,i){return!t(e,n,i)})}function cn(e,t,n){var i=e?e.length:0;if("number"!=typeof i?e=Bt(e):or.unindexedChars&&Vt(e)&&(e=e.split("")),null==t||n)return e?e[ti(i-1)]:g;var r=ln(e);return r.length=Ki(Ji(0,t),r.length),r}function ln(e){var t=-1,n=e?e.length:0,i=fi("number"==typeof n?n:0);return Qt(e,function(e){var n=ti(++t);i[t]=i[n],i[n]=e}),i}function un(e){var t=e?e.length:0;return"number"==typeof t?t:ur(e).length}function hn(e,t,n){var i;if(t=m.createCallback(t,n,3),cr(e))for(var r=-1,o=e.length;++r<o&&!(i=t(e[r],r,e)););else yr(e,function(e,n,r){return!(i=t(e,n,r))});return!!i}function fn(e,t,n){var i=-1,o=e?e.length:0,s=fi("number"==typeof o?o:0);for(t=m.createCallback(t,n,3),Qt(e,function(e,n,r){var o=s[++i]=c();o.criteria=t(e,n,r),o.index=i,o.value=e}),o=s.length,s.sort(r);o--;){var a=s[o];s[o]=a.value,f(a)}return s}function pn(e){return e&&"number"==typeof e.length?or.unindexedChars&&Vt(e)?e.split(""):p(e):Bt(e)}function dn(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}function gn(n){var i=-1,r=pt(),s=n?n.length:0,a=nt(arguments,!0,!0,1),c=[],l=s>=x&&r===e;if(l){var u=o(a);u?(r=t,a=u):l=!1}for(;++i<s;){var h=n[i];r(a,h)<0&&c.push(h)}return l&&f(a),c}function mn(e,t,n){var i=-1,r=e?e.length:0;for(t=m.createCallback(t,n,3);++i<r;)if(t(e[i],i,e))return i;return-1}function vn(e,t,n){var i=e?e.length:0;for(t=m.createCallback(t,n,3);i--;)if(t(e[i],i,e))return i;return-1}function yn(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=m.createCallback(t,n,3);++o<r&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[0]:g;return p(e,0,Ki(Ji(0,i),r))}function bn(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=i&&i[t]===e?null:t,t=!1),null!=n&&(e=tn(e,n,i)),nt(e,t)}function wn(t,n,i){if("number"==typeof i){var r=t?t.length:0;i=0>i?Ji(0,r+i):i||0}else if(i){var o=An(t,n);return t[o]===n?o:-1}return e(t,n,i)}function xn(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else i=null==t||n?1:t||i;return p(e,0,Ki(Ji(0,r-i),r))}function Cn(n){for(var i=arguments,r=i.length,s=-1,c=a(),l=-1,u=pt(),p=n?n.length:0,d=[],g=a();++s<r;){var m=i[s];c[s]=u===e&&(m?m.length:0)>=x&&o(s?i[s]:g)}e:for(;++l<p;){var v=c[0];if(m=n[l],(v?t(v,m):u(g,m))<0){for(s=r,(v||g).push(m);--s;)if(v=c[s],(v?t(v,m):u(i[s],m))<0)continue e;d.push(m)}}for(;r--;)v=c[r],v&&f(v);return h(c),h(g),d}function _n(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[r-1]:g;return p(e,Ji(0,r-i))}function En(e,t,n){var i=e?e.length:0;for("number"==typeof n&&(i=(0>n?Ji(0,i+n):Ki(n,i-1))+1);i--;)if(e[i]===t)return i;return-1}function Sn(e){for(var t=arguments,n=0,i=t.length,r=e?e.length:0;++n<i;)for(var o=-1,s=t[n];++o<r;)e[o]===s&&(Li.call(e,o--,1),r--);return e}function kn(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var i=-1,r=Ji(0,Ai((t-e)/(n||1))),o=fi(r);++i<r;)o[i]=e,e+=n;return o}function Tn(e,t,n){var i=-1,r=e?e.length:0,o=[];for(t=m.createCallback(t,n,3);++i<r;){var s=e[i];t(s,i,e)&&(o.push(s),Li.call(e,i--,1),r--)}return o}function Hn(e,t,n){if("number"!=typeof t&&null!=t){var i=0,r=-1,o=e?e.length:0;for(t=m.createCallback(t,n,3);++r<o&&t(e[r],r,e);)i++}else i=null==t||n?1:Ji(0,t);return p(e,i)}function An(e,t,n,i){var r=0,o=e?e.length:r;for(n=n?m.createCallback(n,i,1):Qn,t=n(t);o>r;){var s=r+o>>>1;n(e[s])<t?r=s+1:o=s}return r}function Mn(){return at(nt(arguments,!0,!0))}function Rn(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=i&&i[t]===e?null:t,t=!1),null!=n&&(n=m.createCallback(n,i,3)),at(e,t,n)}function On(e){return gn(e,er.call(arguments,1))}function Pn(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?nn(Tr(e,"length")):0,i=fi(0>n?0:n);++t<n;)i[t]=Tr(e,t);return i}function In(e,t){for(var n=-1,i=e?e.length:0,r={};++n<i;){var o=e[n];t?r[o]=t[n]:o&&(r[o[0]]=o[1])}return r}function Dn(e,t){if(!Ot(t))throw new Ci;return function(){return--e<1?t.apply(this,arguments):void 0}}function Nn(e,t){return arguments.length>2?lt(e,17,er.call(arguments,2),null,t):lt(e,1,null,null,t)}function jn(e){for(var t=arguments.length>1?nt(arguments,!0,!1,1):_t(e),n=-1,i=t.length;++n<i;){var r=t[n];e[r]=lt(e[r],1,null,null,e)}return e}function Vn(e,t){return arguments.length>2?lt(t,19,er.call(arguments,2),null,e):lt(t,3,null,null,e)}function Fn(){for(var e=arguments,t=e.length;t--;)if(!Ot(e[t]))throw new Ci;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Ln(e,t,n){var i=typeof e;if(null==e||"function"==i)return et(e,t,n);if("object"!=i)return function(t){return t[e]};var r=ur(e),o=r[0],s=e[o];return 1!=r.length||s!==s||Pt(s)?function(t){for(var n=r.length,i=!1;n--&&(i=it(t[r[n]],e[r[n]],null,!0)););return i}:function(e){var t=e[o];return s===t&&(0!==s||1/s==1/t)}}function $n(e,t){return t="number"==typeof t?t:+t||e.length,lt(e,4,null,null,null,t)}function zn(e,t,n){var i,r,o,s,a,c,l,u=0,h=!1,f=!0;if(!Ot(e))throw new Ci;if(t=Ji(0,t)||0,n===!0){var p=!0;f=!1}else Pt(n)&&(p=n.leading,h="maxWait"in n&&(Ji(t,n.maxWait)||0),f="trailing"in n?n.trailing:f);var d=function(){var n=t-(Di()-s);if(0>=n){r&&Mi(r);var h=l;r=c=l=g,h&&(u=Di(),o=e.apply(a,i))}else c=Fi(d,n)},m=function(){c&&Mi(c),r=c=l=g,(f||h!==t)&&(u=Di(),o=e.apply(a,i))};return function(){if(i=arguments,s=Di(),a=this,l=f&&(c||!p),h===!1)var n=p&&!c;else{r||p||(u=s);var g=h-(s-u);0>=g?(r&&(r=Mi(r)),u=s,o=e.apply(a,i)):r||(r=Fi(m,g))}return c||t===h||(c=Fi(d,t)),n&&(o=e.apply(a,i)),o}}function qn(e){if(!Ot(e))throw new Ci;var t=er.call(arguments,1);return Fi(function(){e.apply(g,t)},1)}function Wn(e,t){if(!Ot(e))throw new Ci;var n=er.call(arguments,2);return Fi(function(){e.apply(g,n)},t)}function Bn(e,t){if(!Ot(e))throw new Ci;var n=function(){var i=n.cache,r=t?t.apply(this,arguments):w+arguments[0];return Ii.call(i,r)?i[r]:i[r]=e.apply(this,arguments)};return n.cache={},n}function Xn(e){var t,n;if(!Ot(e))throw new Ci;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Yn(e){return lt(e,16,er.call(arguments,1))}function Un(e){return lt(e,32,null,er.call(arguments,1))}function Gn(e,t,n){var i=!0,r=!0;if(!Ot(e))throw new Ci;n===!1?i=!1:Pt(n)&&(i="leading"in n?n.leading:i,r="trailing"in n?n.trailing:r),J.leading=i,J.maxWait=t,J.trailing=r;var o=zn(e,t,J);return o}function Jn(e,t){if(!Ot(t))throw new Ci;return function(){var n=[e];return Ni.apply(n,arguments),t.apply(this,n)}}function Kn(e){return null==e?"":xi(e).replace(vr,ft)}function Qn(e){return e}function Zn(e,t){var n=e,i=!t||Ot(n);t||(n=v,t=e,e=m),Qt(_t(t),function(r){var o=e[r]=t[r];i&&(n.prototype[r]=function(){var t=this.__wrapped__,i=[t];Ni.apply(i,arguments);var r=o.apply(e,i);return t&&"object"==typeof t&&t===r?this:(r=new n(r),r.__chain__=this.__chain__,r)})})}function ei(){return n._=Ti,this}function ti(e,t,n){var i=null==e,r=null==t;null==n&&("boolean"==typeof e&&r?(n=e,e=1):r||"boolean"!=typeof t||(n=t,r=!0)),i&&r&&(t=1),e=+e||0,r?(t=e,e=0):t=+t||0;var o=Zi();return n||e%1||t%1?Ki(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t):e+Ri(o*(t-e+1))}function ni(e,t){if(e){var n=e[t];return Ot(n)?e[t]():n}}function ii(e,t,n){var i=m.templateSettings;e||(e=""),n=wr({},n,i);var r,o=wr({},n.imports,i.imports),a=ur(o),c=Bt(o),l=0,u=n.interpolate||P,h="__p += '",f=wi((n.escape||P).source+"|"+u.source+"|"+(u===R?H:P).source+"|"+(n.evaluate||P).source+"|$","g");e.replace(f,function(t,n,i,o,a,c){return i||(i=o),h+=e.slice(l,c).replace(D,s),n&&(h+="' +\n__e("+n+") +\n'"),a&&(r=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=c+t.length,t}),h+="';\n";var p=n.variable,d=p;d||(p="obj",h="with ("+p+") {\n"+h+"\n}\n"),h=(r?h.replace(E,""):h).replace(S,"$1").replace(T,"$1;"),h="function("+p+") {\n"+(d?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+V++ +"]")+"\n*/";try{var y=mi(a,"return "+h+v).apply(g,c)}catch(b){throw b.source=h,b}return t?y(t):(y.source=h,y)}function ri(e,t,n){e=(e=+e)>-1?e:0;var i=-1,r=fi(e);for(t=et(t,n,1);++i<e;)r[i]=t(i);return r}function oi(e){return null==e?"":xi(e).replace(mr,gt)}function si(e){var t=++y;return xi(null==e?"":e)+t}function ai(e){return e=new v(e),e.__chain__=!0,e}function ci(e,t){return t(e),e}function li(){return this.__chain__=!0,this}function ui(){return xi(this.__wrapped__)}function hi(){return this.__wrapped__}n=n?st.defaults(tt.Object(),n,st.pick(tt,N)):tt;var fi=n.Array,pi=n.Boolean,di=n.Date,gi=n.Error,mi=n.Function,vi=n.Math,yi=n.Number,bi=n.Object,wi=n.RegExp,xi=n.String,Ci=n.TypeError,_i=[],Ei=gi.prototype,Si=bi.prototype,ki=xi.prototype,Ti=n._,Hi=wi("^"+xi(Si.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Ai=vi.ceil,Mi=n.clearTimeout,Ri=vi.floor,Oi=mi.prototype.toString,Pi=Hi.test(Pi=bi.getPrototypeOf)&&Pi,Ii=Si.hasOwnProperty,Di=Hi.test(Di=di.now)&&Di||function(){return+new di},Ni=_i.push,ji=Si.propertyIsEnumerable,Vi=n.setImmediate,Fi=n.setTimeout,Li=_i.splice,$i=Si.toString,zi=_i.unshift,qi=function(){try{var e={},t=Hi.test(t=bi.defineProperty)&&t,n=t(e,e,e)&&t}catch(i){}return n}(),Wi=Hi.test(Wi=$i.bind)&&Wi,Bi=Hi.test(Bi=bi.create)&&Bi,Xi=Hi.test(Xi=fi.isArray)&&Xi,Yi=n.isFinite,Ui=n.isNaN,Gi=Hi.test(Gi=bi.keys)&&Gi,Ji=vi.max,Ki=vi.min,Qi=n.parseInt,Zi=vi.random,er=_i.slice,tr=Hi.test(n.attachEvent),nr=Wi&&!/\n|true/.test(Wi+tr),ir={};ir[L]=fi,ir[$]=pi,ir[z]=di,ir[W]=mi,ir[X]=bi,ir[B]=yi,ir[Y]=wi,ir[U]=xi;var rr={};rr[L]=rr[z]=rr[B]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},rr[$]=rr[U]={constructor:!0,toString:!0,valueOf:!0},rr[q]=rr[W]=rr[Y]={constructor:!0,toString:!0},rr[X]={constructor:!0},function(){for(var e=j.length;e--;){var t=j[e];for(var n in rr)Ii.call(rr,n)&&!Ii.call(rr[n],t)&&(rr[n][t]=!1)}}(),v.prototype=m.prototype;var or=m.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},i=[];e.prototype={valueOf:1,y:1};for(var r in new e)i.push(r);for(r in arguments);or.argsClass=$i.call(arguments)==F,or.argsObject=arguments.constructor==bi&&!(arguments instanceof fi),or.enumErrorProps=ji.call(Ei,"message")||ji.call(Ei,"name"),or.enumPrototypes=ji.call(e,"prototype"),or.fastBind=Wi&&!nr,or.funcDecomp=!Hi.test(n.WinRTError)&&I.test(d),or.funcNames="string"==typeof mi.name,or.nonEnumArgs=0!=r,or.nonEnumShadows=!/valueOf/.test(i),or.ownLast="x"!=i[0],or.spliceObjects=(_i.splice.call(t,0,1),!t[0]),or.unindexedChars="xx"!="x"[0]+bi("x")[0];try{or.nodeClass=!($i.call(document)==X&&!({toString:0}+""))}catch(o){or.nodeClass=!0}}(1),m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:R,variable:"",imports:{_:m}};var sr=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",or.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):or.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),or.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),or.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");
var n=[];if(or.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),or.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",or.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||or.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"};Bi||(ht=function(e){if(Pt(e)){u.prototype=e;var t=new u;u.prototype=null}return t||{}});var ar=qi?function(e,t){K.value=t,qi(e,"__bindData__",K)}:u;or.argsClass||(mt=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ii.call(e,"callee")||!1});var cr=Xi||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&$i.call(e)==L||!1},lr=ut({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),ur=Gi?function(e){return Pt(e)?or.enumPrototypes&&"function"==typeof e||or.nonEnumArgs&&e.length&&mt(e)?lr(e):Gi(e):[]}:lr,hr={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:ur,loop:"if (callback(iterable[index], index, collection) === false) return result"},fr={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:ur,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},pr={top:"if (!objectTypes[typeof iterable]) return result;\n"+hr.top,array:!1},dr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gr=St(dr),mr=wi("("+ur(gr).join("|")+")","g"),vr=wi("["+ur(dr).join("")+"]","g"),yr=ut(hr),br=ut(fr,{top:fr.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),wr=ut(fr),xr=ut(hr,pr,{useHas:!1}),Cr=ut(hr,pr);Ot(/x/)&&(Ot=function(e){return"function"==typeof e&&$i.call(e)==W});var _r=Pi?function(e){if(!e||$i.call(e)!=X||!or.argsClass&&mt(e))return!1;var t=e.valueOf,n="function"==typeof t&&(n=Pi(t))&&Pi(n);return n?e==n||Pi(e)==n:dt(e)}:dt,Er=ct(function(e,t,n){Ii.call(e,n)?e[n]++:e[n]=1}),Sr=ct(function(e,t,n){(Ii.call(e,n)?e[n]:e[n]=[]).push(t)}),kr=ct(function(e,t,n){e[n]=t}),Tr=tn,Hr=Gt;nr&&rt&&"function"==typeof Vi&&(qn=function(e){if(!Ot(e))throw new Ci;return Vi.apply(n,arguments)});var Ar=8==Qi(_+"08")?Qi:function(e,t){return Qi(Vt(e)?e.replace(O,""):e,t||0)};return m.after=Dn,m.assign=br,m.at=Xt,m.bind=Nn,m.bindAll=jn,m.bindKey=Vn,m.chain=ai,m.compact=dn,m.compose=Fn,m.countBy=Er,m.createCallback=Ln,m.curry=$n,m.debounce=zn,m.defaults=wr,m.defer=qn,m.delay=Wn,m.difference=gn,m.filter=Gt,m.flatten=bn,m.forEach=Qt,m.forEachRight=Zt,m.forIn=xr,m.forInRight=xt,m.forOwn=Cr,m.forOwnRight=Ct,m.functions=_t,m.groupBy=Sr,m.indexBy=kr,m.initial=xn,m.intersection=Cn,m.invert=St,m.invoke=en,m.keys=ur,m.map=tn,m.max=nn,m.memoize=Bn,m.merge=Lt,m.min=rn,m.omit=$t,m.once=Xn,m.pairs=zt,m.partial=Yn,m.partialRight=Un,m.pick=qt,m.pluck=Tr,m.pull=Sn,m.range=kn,m.reject=an,m.remove=Tn,m.rest=Hn,m.shuffle=ln,m.sortBy=fn,m.tap=ci,m.throttle=Gn,m.times=ri,m.toArray=pn,m.transform=Wt,m.union=Mn,m.uniq=Rn,m.values=Bt,m.where=Hr,m.without=On,m.wrap=Jn,m.zip=Pn,m.zipObject=In,m.collect=tn,m.drop=Hn,m.each=Qt,m.eachRight=Zt,m.extend=br,m.methods=_t,m.object=In,m.select=Gt,m.tail=Hn,m.unique=Rn,m.unzip=Pn,Zn(m),m.clone=vt,m.cloneDeep=yt,m.contains=Yt,m.escape=Kn,m.every=Ut,m.find=Jt,m.findIndex=mn,m.findKey=bt,m.findLast=Kt,m.findLastIndex=vn,m.findLastKey=wt,m.has=Et,m.identity=Qn,m.indexOf=wn,m.isArguments=mt,m.isArray=cr,m.isBoolean=kt,m.isDate=Tt,m.isElement=Ht,m.isEmpty=At,m.isEqual=Mt,m.isFinite=Rt,m.isFunction=Ot,m.isNaN=It,m.isNull=Dt,m.isNumber=Nt,m.isObject=Pt,m.isPlainObject=_r,m.isRegExp=jt,m.isString=Vt,m.isUndefined=Ft,m.lastIndexOf=En,m.mixin=Zn,m.noConflict=ei,m.parseInt=Ar,m.random=ti,m.reduce=on,m.reduceRight=sn,m.result=ni,m.runInContext=d,m.size=un,m.some=hn,m.sortedIndex=An,m.template=ii,m.unescape=oi,m.uniqueId=si,m.all=Ut,m.any=hn,m.detect=Jt,m.findWhere=Jt,m.foldl=on,m.foldr=sn,m.include=Yt,m.inject=on,Cr(m,function(e,t){m.prototype[t]||(m.prototype[t]=function(){var t=[this.__wrapped__],n=this.__chain__;Ni.apply(t,arguments);var i=e.apply(m,t);return n?new v(i,n):i})}),m.first=yn,m.last=_n,m.sample=cn,m.take=yn,m.head=yn,Cr(m,function(e,t){var n="sample"!==t;m.prototype[t]||(m.prototype[t]=function(t,i){var r=this.__chain__,o=e(this.__wrapped__,t,i);return r||null!=t&&(!i||n&&"function"==typeof t)?new v(o,r):o})}),m.VERSION="2.2.1",m.prototype.chain=li,m.prototype.toString=ui,m.prototype.value=hi,m.prototype.valueOf=hi,yr(["join","pop","shift"],function(e){var t=_i[e];m.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new v(n,e):n}}),yr(["push","reverse","sort","unshift"],function(e){var t=_i[e];m.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),yr(["concat","slice","splice"],function(e){var t=_i[e];m.prototype[e]=function(){return new v(t.apply(this.__wrapped__,arguments),this.__chain__)}}),or.spliceObjects||yr(["pop","shift","splice"],function(e){var t=_i[e],n="splice"==e;m.prototype[e]=function(){var e=this.__chain__,i=this.__wrapped__,r=t.apply(i,arguments);return 0===i.length&&delete i[0],e||n?new v(r,e):r}}),m}var g,m=[],v=[],y=0,b={},w=+new Date+"",x=75,C=40,_=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",E=/\b__p \+= '';/g,S=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,A=/\w*$/,M=/^function[ \n\r\t]+\w/,R=/<%=([\s\S]+?)%>/g,O=RegExp("^["+_+"]*0+(?=.$)"),P=/($^)/,I=/\bthis\b/,D=/['\n\r\t\u2028\u2029\\]/g,N=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],j=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],V=0,F="[object Arguments]",L="[object Array]",$="[object Boolean]",z="[object Date]",q="[object Error]",W="[object Function]",B="[object Number]",X="[object Object]",Y="[object RegExp]",U="[object String]",G={};G[W]=!1,G[F]=G[L]=G[$]=G[z]=G[B]=G[X]=G[Y]=G[U]=!0;var J={leading:!1,maxWait:0,trailing:!1},K={configurable:!1,enumerable:!1,value:null,writable:!1},Q={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},Z={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},et={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},tt=Z[typeof window]&&window||this,nt=Z[typeof exports]&&exports&&!exports.nodeType&&exports,it=Z[typeof module]&&module&&!module.nodeType&&module,rt=it&&it.exports===nt&&nt,ot=Z[typeof global]&&global;!ot||ot.global!==ot&&ot.window!==ot||(tt=ot);var st=d();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(tt._=st,define("lodash",[],function(){return st})):nt&&it?rt?(it.exports=st)._=st:nt._=st:tt._=st}.call(this),function(e,t){function n(e){var t=e.length,n=X.type(e);return X.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=rt[e]={};return X.each(e.match(U)||[],function(e,n){t[n]=!0}),t}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=X.expando+Math.random()}function o(e,n,i){var r;if(i===t&&1===e.nodeType)if(r="data-"+n.replace(ct,"-$1").toLowerCase(),i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:at.test(i)?JSON.parse(i):i}catch(o){}ot.set(e,n,i)}else i=t;return i}function s(){return!0}function a(){return!1}function c(){try{return O.activeElement}catch(e){}}function l(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e,t,n){if(X.isFunction(t))return X.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return X.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(yt.test(t))return X.filter(t,e,n);t=X.filter(t,e)}return X.grep(e,function(e){return z.call(t,e)>=0!==n})}function h(e,t){return X.nodeName(e,"table")&&X.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function f(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=At.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function d(e,t){for(var n=e.length,i=0;n>i;i++)st.set(e[i],"globalEval",!t||st.get(t[i],"globalEval"))}function g(e,t){var n,i,r,o,s,a,c,l;if(1===t.nodeType){if(st.hasData(e)&&(o=st.access(e),s=st.set(t,o),l=o.events)){delete s.handle,s.events={};for(r in l)for(n=0,i=l[r].length;i>n;n++)X.event.add(t,r,l[r][n])}ot.hasData(e)&&(a=ot.access(e),c=X.extend({},a),ot.set(t,c))}}function m(e,n){var i=e.getElementsByTagName?e.getElementsByTagName(n||"*"):e.querySelectorAll?e.querySelectorAll(n||"*"):[];return n===t||n&&X.nodeName(e,n)?X.merge([e],i):i}function v(e,t){var n=t.nodeName.toLowerCase();"input"===n&&kt.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function y(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=qt.length;r--;)if(t=qt[r]+n,t in e)return t;return i}function b(e,t){return e=t||e,"none"===X.css(e,"display")||!X.contains(e.ownerDocument,e)}function w(t){return e.getComputedStyle(t,null)}function x(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=st.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&b(i)&&(o[s]=st.access(i,"olddisplay",S(i.nodeName)))):o[s]||(r=b(i),(n&&"none"!==n||!r)&&st.set(i,"olddisplay",r?n:X.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function C(e,t,n){var i=Nt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function _(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=X.css(e,n+zt[o],!0,r)),i?("content"===n&&(s-=X.css(e,"padding"+zt[o],!0,r)),"margin"!==n&&(s-=X.css(e,"border"+zt[o]+"Width",!0,r))):(s+=X.css(e,"padding"+zt[o],!0,r),"padding"!==n&&(s+=X.css(e,"border"+zt[o]+"Width",!0,r)));return s}function E(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=w(e),s=X.support.boxSizing&&"border-box"===X.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=Ot(e,t,o),(0>r||null==r)&&(r=e.style[t]),jt.test(r))return r;i=s&&(X.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+_(e,t,n||(s?"border":"content"),i,o)+"px"}function S(e){var t=O,n=Ft[e];return n||(n=k(e,t),"none"!==n&&n||(Pt=(Pt||X("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=k(e,t),Pt.detach()),Ft[e]=n),n}function k(e,t){var n=X(t.createElement(e)).appendTo(t.body),i=X.css(n[0],"display");return n.remove(),i}function T(e,t,n,i){var r;if(X.isArray(t))X.each(t,function(t,r){n||Bt.test(e)?i(e,r):T(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==X.type(t))i(e,t);else for(r in t)T(e+"["+r+"]",t[r],n,i)}function H(e){return X.isWindow(e)?e:9===e.nodeType&&e.defaultView}var A,M,R=typeof t,O=(e.location,e.document),P=O.documentElement,I=e.jQuery,D=e.$,N={},j=[],V="2.0.3 -sizzle,-wrap,-ajax,-ajax/script,-ajax/jsonp,-ajax/xhr,-effects,-deprecated",F=j.concat,L=j.push,$=j.slice,z=j.indexOf,q=N.toString,W=N.hasOwnProperty,B=V.trim,X=function(e,t){return new X.fn.init(e,t,A)},Y=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=/\S+/g,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/^-ms-/,Q=/-([\da-z])/gi,Z=function(e,t){return t.toUpperCase()},et=function(){O.removeEventListener("DOMContentLoaded",et,!1),e.removeEventListener("load",et,!1),X.ready()};X.fn=X.prototype={jquery:V,constructor:X,init:function(e,n,i){var r,o;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:G.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1]){if(n=n instanceof X?n[0]:n,X.merge(this,X.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:O,!0)),J.test(r[1])&&X.isPlainObject(n))for(r in n)X.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return o=O.getElementById(r[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=O,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):X.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),X.makeArray(e,this))},selector:"",length:0,toArray:function(){return $.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=X.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return X.each(this,e,t)},ready:function(e){return X.ready.promise().done(e),this},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(X.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:L,sort:[].sort,splice:[].splice},X.fn.init.prototype=X.fn,X.extend=X.fn.extend=function(){var e,n,i,r,o,s,a=arguments[0]||{},c=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},c=2),"object"==typeof a||X.isFunction(a)||(a={}),l===c&&(a=this,--c);l>c;c++)if(null!=(e=arguments[c]))for(n in e)i=a[n],r=e[n],a!==r&&(u&&r&&(X.isPlainObject(r)||(o=X.isArray(r)))?(o?(o=!1,s=i&&X.isArray(i)?i:[]):s=i&&X.isPlainObject(i)?i:{},a[n]=X.extend(u,s,r)):r!==t&&(a[n]=r));return a},X.extend({expando:"jQuery"+(V+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===X&&(e.$=D),t&&e.jQuery===X&&(e.jQuery=I),X},isReady:!1,readyWait:1,holdReady:function(e){e?X.readyWait++:X.ready(!0)},ready:function(e){(e===!0?--X.readyWait:X.isReady)||(X.isReady=!0,e!==!0&&--X.readyWait>0||(M.resolveWith(O,[X]),X.fn.trigger&&X(O).trigger("ready").off("ready")))},isFunction:function(e){return"function"===X.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?N[q.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==X.type(e)||e.nodeType||X.isWindow(e))return!1;try{if(e.constructor&&!W.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||O;var i=J.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=X.buildFragment([e],t,r),r&&X(r).remove(),X.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var n,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,n=i.parseFromString(e,"text/xml")}catch(r){n=t}return(!n||n.getElementsByTagName("parsererror").length)&&X.error("Invalid XML: "+e),n},noop:function(){},globalEval:function(e){var t,n=eval;e=X.trim(e),e&&(1===e.indexOf("use strict")?(t=O.createElement("script"),t.text=e,O.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(K,"ms-").replace(Q,Z)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":B.call(e)},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?X.merge(i,"string"==typeof e?[e]:e):L.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:z.call(t,e,n)},merge:function(e,n){var i=n.length,r=e.length,o=0;if("number"==typeof i)for(;i>o;o++)e[r++]=n[o];else for(;n[o]!==t;)e[r++]=n[o++];return e.length=r,e},grep:function(e,t,n){var i,r=[],o=0,s=e.length;for(n=!!n;s>o;o++)i=!!t(e[o],o),n!==i&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),c=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&(c[c.length]=r);else for(o in e)r=t(e[o],o,i),null!=r&&(c[c.length]=r);return F.apply([],c)},guid:1,proxy:function(e,n){var i,r,o;return"string"==typeof n&&(i=e[n],n=e,e=i),X.isFunction(e)?(r=$.call(arguments,2),o=function(){return e.apply(n||this,r.concat($.call(arguments)))},o.guid=e.guid=e.guid||X.guid++,o):t},access:function(e,n,i,r,o,s,a){var c=0,l=e.length,u=null==i;if("object"===X.type(i)){o=!0;for(c in i)X.access(e,n,c,i[c],!0,s,a)}else if(r!==t&&(o=!0,X.isFunction(r)||(a=!0),u&&(a?(n.call(e,r),n=null):(u=n,n=function(e,t,n){return u.call(X(e),n)})),n))for(;l>c;c++)n(e[c],i,a?r:r.call(e[c],c,n(e[c],i)));return o?e:u?n.call(e):l?n(e[0],i):s},now:Date.now,swap:function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r}}),X.ready.promise=function(t){return M||(M=X.Deferred(),"complete"===O.readyState?setTimeout(X.ready):(O.addEventListener("DOMContentLoaded",et,!1),e.addEventListener("load",et,!1))),M.promise(t)},X.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){N["[object "+t+"]"]=t.toLowerCase()}),A=X(O);var tt,nt=P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector,it=function(e,t){if(e===t)return tt=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n?e===O||X.contains(O,e)?-1:t===O||X.contains(O,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1};X.extend({find:function(e,t,n,i){var r,o,s=0;if(n=n||[],t=t||O,!e||"string"!=typeof e)return n;if(1!==(o=t.nodeType)&&9!==o)return[];if(i)for(;r=i[s++];)X.find.matchesSelector(r,e)&&n.push(r);else X.merge(n,t.querySelectorAll(e));return n},unique:function(e){var t,n=[],i=0,r=0;if(tt=!1,e.sort(it),tt){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},text:function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r)return e.textContent;if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=X.text(t);return n},contains:function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!n.contains(i))},isXMLDoc:function(e){return"HTML"!==(e.ownerDocument||e).documentElement.nodeName},expr:{attrHandle:{},match:{bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]/}}}),X.extend(X.find,{matches:function(e,t){return X.find(e,null,null,t)},matchesSelector:function(e,t){return nt.call(e,t)},attr:function(e,t){return e.getAttribute(t)}});var rt={};X.Callbacks=function(e){e="string"==typeof e?rt[e]||i(e):X.extend({},e);var n,r,o,s,a,c,l=[],u=!e.once&&[],h=function(t){for(n=e.memory&&t,r=!0,c=s||0,s=0,a=l.length,o=!0;l&&a>c;c++)if(l[c].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}o=!1,l&&(u?u.length&&h(u.shift()):n?l=[]:f.disable())},f={add:function(){if(l){var t=l.length;!function i(t){X.each(t,function(t,n){var r=X.type(n);"function"===r?e.unique&&f.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),o?a=l.length:n&&(s=t,h(n))}return this},remove:function(){return l&&X.each(arguments,function(e,t){for(var n;(n=X.inArray(t,l,n))>-1;)l.splice(n,1),o&&(a>=n&&a--,c>=n&&c--)}),this},has:function(e){return e?X.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=n=t,this},disabled:function(){return!l},lock:function(){return u=t,n||f.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||r&&!u||(t=t||[],t=[e,t.slice?t.slice():t],o?u.push(t):h(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},X.extend({Deferred:function(e){var t=[["resolve","done",X.Callbacks("once memory"),"resolved"],["reject","fail",X.Callbacks("once memory"),"rejected"],["notify","progress",X.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return X.Deferred(function(n){X.each(t,function(t,o){var s=o[0],a=X.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&X.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?X.extend(e,i):i}},r={};return i.pipe=i.then,X.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=$.call(arguments),s=o.length,a=1!==s||e&&X.isFunction(e.promise)?s:0,c=1===a?e:X.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?$.call(arguments):r,i===t?c.notifyWith(n,i):--a||c.resolveWith(n,i)}};if(s>1)for(t=Array(s),n=Array(s),i=Array(s);s>r;r++)o[r]&&X.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(c.reject).progress(l(r,n,t)):--a;return a||c.resolveWith(i,o),c.promise()}}),X.support=function(t){var n=O.createElement("input"),i=O.createDocumentFragment(),r=O.createElement("div"),o=O.createElement("select"),s=o.appendChild(O.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=s.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!s.disabled,n=O.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),t.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===r.style.backgroundClip,X(function(){var n,i,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=O.getElementsByTagName("body")[0];s&&(n=O.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",X.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===r.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(r,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(O.createElement("div")),i.style.cssText=r.style.cssText=o,i.style.marginRight=i.style.width="0",r.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),s.removeChild(n))}),t):t}({});var ot,st,at=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ct=/([A-Z])/g;r.uid=1,r.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},r.prototype={key:function(e){if(!r.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=r.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,X.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(X.isEmptyObject(o))X.extend(this.cache[r],t);else for(i in t)o[i]=t[i];return o},get:function(e,n){var i=this.cache[this.key(e)];return n===t?i:i[n]},access:function(e,n,i){var r;return n===t||n&&"string"==typeof n&&i===t?(r=this.get(e,n),r!==t?r:this.get(e,X.camelCase(n))):(this.set(e,n,i),i!==t?i:n)},remove:function(e,n){var i,r,o,s=this.key(e),a=this.cache[s];if(n===t)this.cache[s]={};else{X.isArray(n)?r=n.concat(n.map(X.camelCase)):(o=X.camelCase(n),n in a?r=[n,o]:(r=o,r=r in a?[r]:r.match(U)||[])),i=r.length;for(;i--;)delete a[r[i]]}},hasData:function(e){return!X.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},ot=new r,st=new r,X.extend({acceptData:r.accepts,hasData:function(e){return ot.hasData(e)||st.hasData(e)},data:function(e,t,n){return ot.access(e,t,n)},removeData:function(e,t){ot.remove(e,t)},_data:function(e,t,n){return st.access(e,t,n)},_removeData:function(e,t){st.remove(e,t)}}),X.fn.extend({data:function(e,n){var i,r,s=this[0],a=0,c=null;if(e===t){if(this.length&&(c=ot.get(s),1===s.nodeType&&!st.get(s,"hasDataAttrs"))){for(i=s.attributes;i.length>a;a++)r=i[a].name,0===r.indexOf("data-")&&(r=X.camelCase(r.slice(5)),o(s,r,c[r]));st.set(s,"hasDataAttrs",!0)}return c}return"object"==typeof e?this.each(function(){ot.set(this,e)}):X.access(this,function(n){var i,r=X.camelCase(e);if(s&&n===t){if(i=ot.get(s,e),i!==t)return i;if(i=ot.get(s,r),i!==t)return i;if(i=o(s,r,t),i!==t)return i}else this.each(function(){var i=ot.get(this,r);ot.set(this,r,n),-1!==e.indexOf("-")&&i!==t&&ot.set(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ot.remove(this,e)})}}),X.extend({queue:function(e,n,i){var r;return e?(n=(n||"fx")+"queue",r=st.get(e,n),i&&(!r||X.isArray(i)?r=st.access(e,n,X.makeArray(i)):r.push(i)),r||[]):t},dequeue:function(e,t){t=t||"fx";var n=X.queue(e,t),i=n.length,r=n.shift(),o=X._queueHooks(e,t),s=function(){X.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return st.get(e,n)||st.access(e,n,{empty:X.Callbacks("once memory").add(function(){st.remove(e,[t+"queue",n])})})}}),X.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),i>arguments.length?X.queue(this[0],e):n===t?this:this.each(function(){var t=X.queue(this,e,n);X._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&X.dequeue(this,e)})},dequeue:function(e){return this.each(function(){X.dequeue(this,e)})},delay:function(e,t){return e=X.fx?X.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,o=X.Deferred(),s=this,a=this.length,c=function(){--r||o.resolveWith(s,[s])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)i=st.get(s[a],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(c));return c(),o.promise(n)}});var lt,ut,ht=/[\t\r\n\f]/g,ft=/\r/g,pt=/^(?:input|select|textarea|button)$/i;X.fn.extend({attr:function(e,t){return X.access(this,X.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){X.removeAttr(this,e)})},prop:function(e,t){return X.access(this,X.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[X.propFix[e]||e]})},addClass:function(e){var t,n,i,r,o,s=0,a=this.length,c="string"==typeof e&&e;if(X.isFunction(e))return this.each(function(t){X(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(U)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ht," "):" ")){for(o=0;r=t[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=X.trim(i)}return this},removeClass:function(e){var t,n,i,r,o,s=0,a=this.length,c=0===arguments.length||"string"==typeof e&&e;if(X.isFunction(e))return this.each(function(t){X(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(U)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ht," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=e?X.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):X.isFunction(e)?this.each(function(n){X(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=X(this),o=e.match(U)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===R||"boolean"===n)&&(this.className&&st.set(this,"__className__",this.className),this.className=this.className||e===!1?"":st.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ht," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,o=this[0];return arguments.length?(r=X.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=r?e.call(this,i,X(this).val()):e,null==o?o="":"number"==typeof o?o+="":X.isArray(o)&&(o=X.map(o,function(e){return null==e?"":e+""})),n=X.valHooks[this.type]||X.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))})):o?(n=X.valHooks[o.type]||X.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(ft,""):null==i?"":i)):void 0}}),X.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,c=0>r?a:o?r:0;a>c;c++)if(n=i[c],!(!n.selected&&c!==r||(X.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&X.nodeName(n.parentNode,"optgroup"))){if(t=X(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=X.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=X.inArray(X(i).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,i){var r,o,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?typeof e.getAttribute===R?X.prop(e,n,i):(1===s&&X.isXMLDoc(e)||(n=n.toLowerCase(),r=X.attrHooks[n]||(X.expr.match.bool.test(n)?ut:lt)),i===t?r&&"get"in r&&null!==(o=r.get(e,n))?o:(o=X.find.attr(e,n),null==o?t:o):null!==i?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):(X.removeAttr(e,n),t)):void 0
},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(U);if(o&&1===e.nodeType)for(;n=o[r++];)i=X.propFix[n]||n,X.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!X.support.radioValue&&"radio"===t&&X.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,i){var r,o,s,a=e.nodeType;return e&&3!==a&&8!==a&&2!==a?(s=1!==a||!X.isXMLDoc(e),s&&(n=X.propFix[n]||n,o=X.propHooks[n]),i!==t?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]):void 0},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||pt.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),ut={set:function(e,t,n){return t===!1?X.removeAttr(e,n):e.setAttribute(n,n),n}},X.each(X.expr.match.bool.source.match(/\w+/g),function(e,n){var i=X.expr.attrHandle[n]||X.find.attr;X.expr.attrHandle[n]=function(e,n,r){var o=X.expr.attrHandle[n],s=r?t:(X.expr.attrHandle[n]=t)!=i(e,n,r)?n.toLowerCase():null;return X.expr.attrHandle[n]=o,s}}),X.support.optSelected||(X.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),X.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){X.propFix[this.toLowerCase()]=this}),X.each(["radio","checkbox"],function(){X.valHooks[this]={set:function(e,n){return X.isArray(n)?e.checked=X.inArray(X(e).val(),n)>=0:t}},X.support.checkOn||(X.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var dt=/^key/,gt=/^(?:mouse|contextmenu)|click/,mt=/^(?:focusinfocus|focusoutblur)$/,vt=/^([^.]*)(?:\.(.+)|)$/;X.event={global:{},add:function(e,n,i,r,o){var s,a,c,l,u,h,f,p,d,g,m,v=st.get(e);if(v){for(i.handler&&(s=i,i=s.handler,o=s.selector),i.guid||(i.guid=X.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(e){return typeof X===R||e&&X.event.triggered===e.type?t:X.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=(n||"").match(U)||[""],u=n.length;u--;)c=vt.exec(n[u])||[],d=m=c[1],g=(c[2]||"").split(".").sort(),d&&(f=X.event.special[d]||{},d=(o?f.delegateType:f.bindType)||d,f=X.event.special[d]||{},h=X.extend({type:d,origType:m,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&X.expr.match.needsContext.test(o),namespace:g.join(".")},s),(p=l[d])||(p=l[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,g,a)!==!1||e.addEventListener&&e.addEventListener(d,a,!1)),f.add&&(f.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,h):p.push(h),X.event.global[d]=!0);e=null}},remove:function(e,t,n,i,r){var o,s,a,c,l,u,h,f,p,d,g,m=st.hasData(e)&&st.get(e);if(m&&(c=m.events)){for(t=(t||"").match(U)||[""],l=t.length;l--;)if(a=vt.exec(t[l])||[],p=g=a[1],d=(a[2]||"").split(".").sort(),p){for(h=X.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,f=c[p]||[],a=a[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)u=f[o],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,h.remove&&h.remove.call(e,u));s&&!f.length&&(h.teardown&&h.teardown.call(e,d,m.handle)!==!1||X.removeEvent(e,p,m.handle),delete c[p])}else for(p in c)X.event.remove(e,p+t[l],n,i,!0);X.isEmptyObject(c)&&(delete m.handle,st.remove(e,"events"))}},trigger:function(n,i,r,o){var s,a,c,l,u,h,f,p=[r||O],d=W.call(n,"type")?n.type:n,g=W.call(n,"namespace")?n.namespace.split("."):[];if(a=c=r=r||O,3!==r.nodeType&&8!==r.nodeType&&!mt.test(d+X.event.triggered)&&(d.indexOf(".")>=0&&(g=d.split("."),d=g.shift(),g.sort()),u=0>d.indexOf(":")&&"on"+d,n=n[X.expando]?n:new X.Event(d,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=r),i=null==i?[n]:X.makeArray(i,[n]),f=X.event.special[d]||{},o||!f.trigger||f.trigger.apply(r,i)!==!1)){if(!o&&!f.noBubble&&!X.isWindow(r)){for(l=f.delegateType||d,mt.test(l+d)||(a=a.parentNode);a;a=a.parentNode)p.push(a),c=a;c===(r.ownerDocument||O)&&p.push(c.defaultView||c.parentWindow||e)}for(s=0;(a=p[s++])&&!n.isPropagationStopped();)n.type=s>1?l:f.bindType||d,h=(st.get(a,"events")||{})[n.type]&&st.get(a,"handle"),h&&h.apply(a,i),h=u&&a[u],h&&X.acceptData(a)&&h.apply&&h.apply(a,i)===!1&&n.preventDefault();return n.type=d,o||n.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),i)!==!1||!X.acceptData(r)||u&&X.isFunction(r[d])&&!X.isWindow(r)&&(c=r[u],c&&(r[u]=null),X.event.triggered=d,r[d](),X.event.triggered=t,c&&(r[u]=c)),n.result}},dispatch:function(e){e=X.event.fix(e);var n,i,r,o,s,a=[],c=$.call(arguments),l=(st.get(this,"events")||{})[e.type]||[],u=X.event.special[e.type]||{};if(c[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=X.event.handlers.call(this,e,l),n=0;(o=a[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,r=((X.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,c),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,r,o,s,a=[],c=n.delegateCount,l=e.target;if(c&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(r=[],i=0;c>i;i++)s=n[i],o=s.selector+" ",r[o]===t&&(r[o]=s.needsContext?X(o,this).index(l)>=0:X.find(o,this,null,[l]).length),r[o]&&r.push(s);r.length&&a.push({elem:l,handlers:r})}return n.length>c&&a.push({elem:this,handlers:n.slice(c)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,o,s=n.button;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||O,r=i.documentElement,o=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[X.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=gt.test(r)?this.mouseHooks:dt.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new X.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=O),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):t},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&X.nodeName(this,"input")?(this.click(),!1):t},_default:function(e){return X.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=X.extend(new X.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?X.event.trigger(r,null,t):X.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},X.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},X.Event=function(e,n){return this instanceof X.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?s:a):this.type=e,n&&X.extend(this,n),this.timeStamp=e&&e.timeStamp||X.now(),this[X.expando]=!0,t):new X.Event(e,n)},X.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=s,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=s,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},X.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){X.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!X.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),X.support.focusinBubbles||X.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){X.event.simulate(t,e.target,X.event.fix(e),!0)};X.event.special[t]={setup:function(){0===n++&&O.addEventListener(e,i,!0)},teardown:function(){0===--n&&O.removeEventListener(e,i,!0)}}}),X.fn.extend({on:function(e,n,i,r,o){var s,c;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(c in e)this.on(c,n,i,e[c],o);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=a;else if(!r)return this;return 1===o&&(s=r,r=function(e){return X().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=X.guid++)),this.each(function(){X.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,X(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=a),this.each(function(){X.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){X.event.trigger(e,t,this)})},triggerHandler:function(e,n){var i=this[0];return i?X.event.trigger(e,n,i,!0):t}});var yt=/^.[^:#\[\.,]*$/,bt=/^(?:parents|prev(?:Until|All))/,wt=X.expr.match.needsContext,xt={children:!0,contents:!0,next:!0,prev:!0};X.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(X(e).filter(function(){for(t=0;r>t;t++)if(X.contains(i[t],this))return!0}));for(t=0;r>t;t++)X.find(e,i[t],n);return n=this.pushStack(r>1?X.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=X(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(X.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(u(this,e||[],!0))},filter:function(e){return this.pushStack(u(this,e||[],!1))},is:function(e){return!!u(this,"string"==typeof e&&wt.test(e)?X(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=wt.test(e)||"string"!=typeof e?X(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&X.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?X.unique(o):o)},index:function(e){return e?"string"==typeof e?z.call(X(e),this[0]):z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?X(e,t):X.makeArray(e&&e.nodeType?[e]:e),i=X.merge(this.get(),n);return this.pushStack(X.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),X.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return X.dir(e,"parentNode")},parentsUntil:function(e,t,n){return X.dir(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return X.dir(e,"nextSibling")},prevAll:function(e){return X.dir(e,"previousSibling")},nextUntil:function(e,t,n){return X.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return X.dir(e,"previousSibling",n)},siblings:function(e){return X.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return X.sibling(e.firstChild)},contents:function(e){return e.contentDocument||X.merge([],e.childNodes)}},function(e,t){X.fn[e]=function(n,i){var r=X.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=X.filter(i,r)),this.length>1&&(xt[e]||X.unique(r),bt.test(e)&&r.reverse()),this.pushStack(r)}}),X.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?X.find.matchesSelector(i,e)?[i]:[]:X.find.matches(e,X.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,i){for(var r=[],o=i!==t;(e=e[n])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&X(e).is(i))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Ct=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,_t=/<([\w:]+)/,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,kt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ht=/^$|\/(?:java|ecma)script/i,At=/^true\/(.*)/,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Rt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Rt.optgroup=Rt.option,Rt.tbody=Rt.tfoot=Rt.colgroup=Rt.caption=Rt.thead,Rt.th=Rt.td,X.fn.extend({text:function(e){return X.access(this,function(e){return e===t?X.text(this):this.empty().append((this[0]&&this[0].ownerDocument||O).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?X.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||X.cleanData(m(n)),n.parentNode&&(t&&X.contains(n.ownerDocument,n)&&d(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(X.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return X.clone(this,e,t)})},html:function(e){return X.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof e&&!St.test(e)&&!Rt[(_t.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ct,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(X.cleanData(m(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=X.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],r=e[t++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),X(this).remove(),r.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=F.apply([],e);var i,r,o,s,a,c,l=0,u=this.length,h=this,d=u-1,g=e[0],v=X.isFunction(g);if(v||!(1>=u||"string"!=typeof g||X.support.checkClone)&&Tt.test(g))return this.each(function(i){var r=h.eq(i);v&&(e[0]=g.call(this,i,r.html())),r.domManip(e,t,n)});if(u&&(i=X.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(o=X.map(m(i,"script"),f),s=o.length;u>l;l++)a=i,l!==d&&(a=X.clone(a,!0,!0),s&&X.merge(o,m(a,"script"))),t.call(this[l],a,l);if(s)for(c=o[o.length-1].ownerDocument,X.map(o,p),l=0;s>l;l++)a=o[l],Ht.test(a.type||"")&&!st.access(a,"globalEval")&&X.contains(c,a)&&(a.src?X._evalUrl(a.src):X.globalEval(a.textContent.replace(Mt,"")))}return this}}),X.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){X.fn[e]=function(e){for(var n,i=[],r=X(e),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),X(r[s])[t](n),L.apply(i,n.get());return this.pushStack(i)}}),X.extend({clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),c=X.contains(e.ownerDocument,e);if(!(X.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||X.isXMLDoc(e)))for(s=m(a),o=m(e),i=0,r=o.length;r>i;i++)v(o[i],s[i]);if(t)if(n)for(o=o||m(e),s=s||m(a),i=0,r=o.length;r>i;i++)g(o[i],s[i]);else g(e,a);return s=m(a,"script"),s.length>0&&d(s,!c&&m(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,o,s,a,c,l,u=0,h=e.length,f=t.createDocumentFragment(),p=[];h>u;u++)if(r=e[u],r||0===r)if("object"===X.type(r))X.merge(p,r.nodeType?[r]:r);else if(Et.test(r)){for(o=o||f.appendChild(t.createElement("div")),s=(_t.exec(r)||["",""])[1].toLowerCase(),a=Rt[s]||Rt._default,o.innerHTML=a[1]+r.replace(Ct,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;X.merge(p,o.childNodes),o=f.firstChild,o.textContent=""}else p.push(t.createTextNode(r));for(f.textContent="",u=0;r=p[u++];)if((!i||-1===X.inArray(r,i))&&(c=X.contains(r.ownerDocument,r),o=m(f.appendChild(r),"script"),c&&d(o),n))for(l=0;r=o[l++];)Ht.test(r.type||"")&&n.push(r);return f},cleanData:function(e){for(var n,i,o,s,a,c,l=X.event.special,u=0;(i=e[u])!==t;u++){if(r.accepts(i)&&(a=i[st.expando],a&&(n=st.cache[a]))){if(o=Object.keys(n.events||{}),o.length)for(c=0;(s=o[c])!==t;c++)l[s]?X.event.remove(i,s):X.removeEvent(i,s,n.handle);st.cache[a]&&delete st.cache[a]}delete ot.cache[i[ot.expando]]}},_evalUrl:function(e){return X.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}});var Ot,Pt,It=/^(none|table(?!-c[ea]).+)/,Dt=/^margin/,Nt=RegExp("^("+Y+")(.*)$","i"),jt=RegExp("^("+Y+")(?!px)[a-z%]+$","i"),Vt=RegExp("^([+-])=("+Y+")","i"),Ft={BODY:"block"},Lt={position:"absolute",visibility:"hidden",display:"block"},$t={letterSpacing:0,fontWeight:400},zt=["Top","Right","Bottom","Left"],qt=["Webkit","O","Moz","ms"];X.fn.extend({css:function(e,n){return X.access(this,function(e,n,i){var r,o,s={},a=0;if(X.isArray(n)){for(r=w(e),o=n.length;o>a;a++)s[n[a]]=X.css(e,n[a],!1,r);return s}return i!==t?X.style(e,n,i):X.css(e,n)},e,n,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){b(this)?X(this).show():X(this).hide()})}}),X.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ot(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a,c=X.camelCase(n),l=e.style;return n=X.cssProps[c]||(X.cssProps[c]=y(l,c)),a=X.cssHooks[n]||X.cssHooks[c],i===t?a&&"get"in a&&(o=a.get(e,!1,r))!==t?o:l[n]:(s=typeof i,"string"===s&&(o=Vt.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(X.css(e,n)),s="number"),null==i||"number"===s&&isNaN(i)||("number"!==s||X.cssNumber[c]||(i+="px"),X.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(l[n]="inherit"),a&&"set"in a&&(i=a.set(e,i,r))===t||(l[n]=i)),t)}},css:function(e,n,i,r){var o,s,a,c=X.camelCase(n);return n=X.cssProps[c]||(X.cssProps[c]=y(e.style,c)),a=X.cssHooks[n]||X.cssHooks[c],a&&"get"in a&&(o=a.get(e,!0,i)),o===t&&(o=Ot(e,n,r)),"normal"===o&&n in $t&&(o=$t[n]),""===i||i?(s=parseFloat(o),i===!0||X.isNumeric(s)?s||0:o):o}}),Ot=function(e,n,i){var r,o,s,a=i||w(e),c=a?a.getPropertyValue(n)||a[n]:t,l=e.style;return a&&(""!==c||X.contains(e.ownerDocument,e)||(c=X.style(e,n)),jt.test(c)&&Dt.test(n)&&(r=l.width,o=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=c,c=a.width,l.width=r,l.minWidth=o,l.maxWidth=s)),c},X.each(["height","width"],function(e,n){X.cssHooks[n]={get:function(e,i,r){return i?0===e.offsetWidth&&It.test(X.css(e,"display"))?X.swap(e,Lt,function(){return E(e,n,r)}):E(e,n,r):t},set:function(e,t,i){var r=i&&w(e);return C(e,t,i?_(e,n,i,X.support.boxSizing&&"border-box"===X.css(e,"boxSizing",!1,r),r):0)}}}),X(function(){X.support.reliableMarginRight||(X.cssHooks.marginRight={get:function(e,n){return n?X.swap(e,{display:"inline-block"},Ot,[e,"marginRight"]):t}}),!X.support.pixelPosition&&X.fn.position&&X.each(["top","left"],function(e,n){X.cssHooks[n]={get:function(e,i){return i?(i=Ot(e,n),jt.test(i)?X(e).position()[n]+"px":i):t}}})}),X.expr&&X.expr.filters&&(X.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},X.expr.filters.visible=function(e){return!X.expr.filters.hidden(e)}),X.each({margin:"",padding:"",border:"Width"},function(e,t){X.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+zt[i]+t]=o[i]||o[i-2]||o[0];return r}},Dt.test(e)||(X.cssHooks[e+t].set=C)});var Wt=/%20/g,Bt=/\[\]$/,Xt=/\r?\n/g,Yt=/^(?:submit|button|image|reset|file)$/i,Ut=/^(?:input|select|textarea|keygen)/i;X.fn.extend({serialize:function(){return X.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=X.prop(this,"elements");return e?X.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!X(this).is(":disabled")&&Ut.test(this.nodeName)&&!Yt.test(e)&&(this.checked||!kt.test(e))}).map(function(e,t){var n=X(this).val();return null==n?null:X.isArray(n)?X.map(n,function(e){return{name:t.name,value:e.replace(Xt,"\r\n")}}):{name:t.name,value:n.replace(Xt,"\r\n")}}).get()}}),X.param=function(e,n){var i,r=[],o=function(e,t){t=X.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=X.ajaxSettings&&X.ajaxSettings.traditional),X.isArray(e)||e.jquery&&!X.isPlainObject(e))X.each(e,function(){o(this.name,this.value)});else for(i in e)T(i,e[i],n,o);return r.join("&").replace(Wt,"+")},X.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){X.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),X.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),X.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){X.offset.setOffset(this,e,t)});var n,i,r=this[0],o={top:0,left:0},s=r&&r.ownerDocument;return s?(n=s.documentElement,X.contains(n,r)?(typeof r.getBoundingClientRect!==R&&(o=r.getBoundingClientRect()),i=H(s),{top:o.top+i.pageYOffset-n.clientTop,left:o.left+i.pageXOffset-n.clientLeft}):o):void 0},X.offset={setOffset:function(e,t,n){var i,r,o,s,a,c,l,u=X.css(e,"position"),h=X(e),f={};"static"===u&&(e.style.position="relative"),a=h.offset(),o=X.css(e,"top"),c=X.css(e,"left"),l=("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1,l?(i=h.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(c)||0),X.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+r),"using"in t?t.using.call(e,f):h.css(f)}},X.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===X.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),X.nodeName(e[0],"html")||(i=e.offset()),i.top+=X.css(e[0],"borderTopWidth",!0),i.left+=X.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-X.css(n,"marginTop",!0),left:t.left-i.left-X.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||P;e&&!X.nodeName(e,"html")&&"static"===X.css(e,"position");)e=e.offsetParent;return e||P})}}),X.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var r="pageYOffset"===i;X.fn[n]=function(o){return X.access(this,function(n,o,s){var a=H(n);return s===t?a?a[i]:n[o]:(a?a.scrollTo(r?e.pageXOffset:s,r?s:e.pageYOffset):n[o]=s,t)},n,o,arguments.length,null)}}),X.each({Height:"height",Width:"width"},function(e,n){X.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){X.fn[r]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return X.access(this,function(n,i,r){var o;return X.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):r===t?X.css(n,i,a):X.style(n,i,r,a)},n,s?r:t,s,null)}})}),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=X:"function"==typeof define&&define.amd&&define("jquery",[],function(){return X}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=X)}(window),function(){var e,t=this,n=t.Backbone,i=[],r=i.push,o=i.slice,s=i.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var a=t._;a||"undefined"==typeof require||(a=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var c=e.Events={on:function(e,t,n){if(!u(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!u(this,"once",e,[t,n])||!t)return this;var i=this,r=a.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,o,s,c,l,h,f;if(!this._events||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:a.keys(this._events),c=0,l=s.length;l>c;c++)if(e=s[c],o=this._events[e]){if(this._events[e]=i=[],t||n)for(h=0,f=o.length;f>h;h++)r=o[h],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&h(n,t),i&&h(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var o in i)i[o].off(t,n,this),r&&delete this._listeners[o];return this}},l=/\s+/,u=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var o=n.split(l),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},h=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},f={listenTo:"on",listenToOnce:"once"};a.each(f,function(e,t){c[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=a.uniqueId("l"));return r[o]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),c.bind=c.on,c.unbind=c.off,a.extend(e,c);var p=e.Model=function(e,t){var n,i=e||{};t||(t={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(t,d)),t.parse&&(i=this.parse(i,t)||{}),(n=a.result(this,"defaults"))&&(i=a.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];a.extend(p.prototype,c,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,r,o,s,c,l,u,h;if(null==e)return this;if("object"==typeof e?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;o=n.unset,c=n.silent,s=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=a.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)t=r[i],a.isEqual(h[i],t)||s.push(i),a.isEqual(u[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete h[i]:h[i]=t;if(!c){s.length&&(this._pending=!0);for(var f=0,p=s.length;p>f;f++)this.trigger("change:"+s[f],this,h[s[f]],n)}if(l)return this;if(!c)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in e)a.isEqual(i[r],t=e[r])||((n||(n={}))[r]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),t.trigger("sync",t,i,e),void 0):!1},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,r,o,s=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=a.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=a.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var c=this,l=n.success;return n.success=function(e){c.attributes=s;var t=c.parse(e,n);return n.wait&&(t=a.extend(i||{},t)),a.isObject(t)&&!c.set(t,n)?!1:(l&&l(c,e,n),c.trigger("sync",c,e,n),void 0)},j(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=i),o=this.sync(r,this,n),i&&n.wait&&(this.attributes=s),o},destroy:function(e){e=e?a.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(r){(e.wait||t.isNew())&&i(),n&&n(t,r,e),t.isNew()||t.trigger("sync",t,r,e)},this.isNew())return e.success(),!1;j(this,e);var r=this.sync("delete",this,e);return e.wait||i(),r},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||N();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},a.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,a.extend(t||{},{validationError:n})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];a.each(g,function(e){p.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),a[e].apply(a,t)}});var m=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(m.prototype,c,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)
})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,a.defaults(t||{},y))},remove:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var n,i,r,o;for(n=0,i=e.length;i>n;n++)o=this.get(e[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,t.silent||(t.index=r,o.trigger("remove",o,this,t)),this._removeReference(o));return this},set:function(e,t){t=a.defaults(t||{},v),t.parse&&(e=this.parse(e,t)),a.isArray(e)||(e=e?[e]:[]);var n,i,o,c,l,u=t.at,h=this.comparator&&null==u&&t.sort!==!1,f=a.isString(this.comparator)?this.comparator:null,p=[],d=[],g={};for(n=0,i=e.length;i>n;n++)(o=this._prepareModel(e[n],t))&&((c=this.get(o))?(t.remove&&(g[c.cid]=!0),t.merge&&(c.set(o.attributes,t),h&&!l&&c.hasChanged(f)&&(l=!0))):t.add&&(p.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(t.remove){for(n=0,i=this.length;i>n;++n)g[(o=this.models[n]).cid]||d.push(o);d.length&&this.remove(d,t)}if(p.length&&(h&&(l=!0),this.length+=p.length,null!=u?s.apply(this.models,[u,0].concat(p)):r.apply(this.models,p)),l&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=p.length;i>n;n++)(o=p[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return a.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=a.isFunction(t)?t:function(e){return e.get(t)};return a.sortedIndex(this.models,e,i,n)},pluck:function(e){return a.invoke(this.models,"get",e)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?a.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(r){t.wait&&n.add(e,t),i&&i(e,r,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(b,function(e){m.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}});var w=["groupBy","countBy","sortBy"];a.each(w,function(e){m.prototype[e]=function(t,n){var i=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,i,n)}});var x=e.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},C=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];a.extend(x.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=a.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(a.isFunction(n)||(n=this[e[t]]),n){var i=t.match(C),r=i[1],o=i[2];n=a.bind(n,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,n):this.$el.on(r,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),a.extend(this,a.pick(e,_)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t["class"]=a.result(this,"className"));var n=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,i){var r=E[t];a.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=a.result(n,"url")||N()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var s=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=i.xhr=e.ajax(a.extend(o,i));return n.trigger("request",n,c,i),c};var E={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var S=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,H=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(S.prototype,c,{initialize:function(){},route:function(t,n,i){a.isRegExp(t)||(t=this._routeToRegExp(t)),a.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return e.history.route(t,function(o){var s=r._extractParameters(t,o);i&&i.apply(r,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),e.history.trigger("route",r,n,s)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var e,t=a.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(k,"(?:$1)?").replace(T,function(e,t){return t?e:"([^/]+)"}).replace(H,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return a.map(n,function(e){return e?decodeURIComponent(e):null})}});var M=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,P=/msie [\w.]+/,I=/\/$/;M.started=!1,a.extend(M.prototype,c,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(I,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(R,"")},start:function(t){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=a.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=P.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(O,"/"),r&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(R,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=a.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!M.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),e.history=new M;var D=function(e,t){var n,i=this;n=e&&a.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},a.extend(n,i,t);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&a.extend(n.prototype,e),n.__super__=i.prototype,n};p.extend=m.extend=S.extend=x.extend=M.extend=D;var N=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}}}.call(this),define("backbone",["lodash","jquery"],function(e){return function(){var t;return t||e.Backbone}}(this)),Backbone.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(Backbone,_),Backbone.Wreqr=function(e,t,n){var i={};return i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},setHandler:function(e,t,n){var i={callback:t,context:n};this._wreqrHandlers[e]=i,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,n),i.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},n.isFunction(this.initialize)&&this.initialize(e)};return n.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),i.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,i){var r=this.storage.getCommands(e);n.each(r.instances,function(e){t.apply(i,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,i=e.storageType||this.storageType;t=n.isFunction(i)?new i:i,this.storage=t}})}(i),i.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(i),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,n),i}(Backbone,Backbone.Marionette,_);var Marionette=function(e,t,n){function i(e){return s.call(e)}function r(e,t){var n=Error(e);throw n.name=t||"Error",n}var o={};t.Marionette=o,o.$=t.$;var s=Array.prototype.slice;return o.extend=t.Model.extend,o.getOption=function(e,t){if(e&&t){var n;return n=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},o.triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi,i=function(i){var r="on"+i.replace(t,e),o=this[r];return this.trigger.apply(this,arguments),n.isFunction(o)?o.apply(this,n.tail(arguments)):void 0};return i}(),o.MonitorDOMRefresh=function(){function e(e){e._isShown=!0,i(e)}function t(e){e._isRendered=!0,i(e)}function i(e){e._isShown&&e._isRendered&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}return function(n){n.listenTo(n,"show",function(){e(n)}),n.listenTo(n,"render",function(){t(n)})}}(),function(e){function t(e,t,i,o){var s=o.split(/\s+/);n.each(s,function(n){var o=e[n];o||r("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,i,o,e)})}function i(e,t,n,i){e.listenTo(t,n,i,e)}function o(e,t,i,r){var o=r.split(/\s+/);n.each(o,function(n){var r=e[n];e.stopListening(t,i,r,e)})}function s(e,t,n,i){e.stopListening(t,n,i,e)}function a(e,t,i,r,o){t&&i&&(n.isFunction(i)&&(i=i.call(e)),n.each(i,function(i,s){n.isFunction(i)?r(e,t,s,i):o(e,t,s,i)}))}e.bindEntityEvents=function(e,n,r){a(e,n,r,i,t)},e.unbindEntityEvents=function(e,t,n){a(e,t,n,s,o)}}(o),o.Callbacks=function(){this._deferred=o.$.Deferred(),this._callbacks=[]},n.extend(o.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(n,i){t&&(n=t),e.call(n,i)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=o.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),o.Controller=function(e){this.triggerMethod=o.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,n.extend(o.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),o.Region=function(e){if(this.options=e||{},this.el=o.getOption(this,"el"),!this.el){var t=Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var n=Array.prototype.slice.apply(arguments);this.initialize.apply(this,n)}},n.extend(o.Region,{buildRegion:function(e,t){var i="string"==typeof e,r="string"==typeof e.selector,o=void 0===e.regionType,s="function"==typeof e;if(!s&&!i&&!r)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var a,c;i&&(a=e),e.selector&&(a=e.selector),s&&(c=e),!s&&o&&(c=t),e.regionType&&(c=e.regionType);var l=new c({el:a});return e.parentEl&&(l.getEl=function(t){var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(t)}),l}}),n.extend(o.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,o.triggerMethod.call(this,"show",e),o.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return o.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),o.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),o.Region.extend=o.extend,o.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var i={};return n.each(e,function(e,r){"string"==typeof e&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var o=this.addRegion(r,e);i[r]=o},this),i},addRegion:function(t,i){var r,o=n.isObject(i),s=n.isString(i),a=!!i.selector;return r=s||o&&a?e.Region.buildRegion(i,e.Region):n.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,r),this.triggerMethod("region:add",t,r),r},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(i,function(e){t.prototype[e]=function(){var t=n.values(this._regions),i=[t].concat(n.toArray(arguments));return n[e].apply(n,i)}}),t}(o),o.TemplateCache=function(e){this.templateId=e},n.extend(o.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new o.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=i(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=o.$(e).html();return t&&0!==t.length||r("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return n.template(e)}}),o.Renderer={render:function(e,t){if(!e){var n=Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}var i;return i="function"==typeof e?e:o.TemplateCache.get(e),i(t)}},o.View=t.View.extend({constructor:function(){n.bindAll(this,"render");var e=Array.prototype.slice.apply(arguments);t.View.prototype.constructor.apply(this,e),o.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:o.triggerMethod,getTemplate:function(){return o.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=this.templateHelpers;return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},configureTriggers:function(){if(this.triggers){var e={},t=n.result(this,"triggers");return n.each(t,function(t,n){e[n]=function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation();var n={view:this,model:this.model,collection:this.collection};this.triggerMethod(t,n)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),o.bindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.bindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var i={},r=this.configureTriggers();n.extend(i,e,r),t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),o.unbindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.unbindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=this.triggerMethod("before:close");e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),o.ItemView=o.View.extend({constructor:function(){o.View.prototype.constructor.apply(this,i(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=o.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),o.View.prototype.close.apply(this,i(arguments)),this.triggerMethod("item:closed"))}}),o.CollectionView=o.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),o.View.prototype.constructor.apply(this,i(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),n=this.collection.indexOf(e);this.addItemView(e,t,n)},onShowCalled:function(){this.children.each(function(e){o.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=o.getOption(this,"emptyView");if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var e=o.getOption(this,"itemView");return e||r("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,i){var r=o.getOption(this,"itemViewOptions");n.isFunction(r)&&(r=r.call(this,e,i));var s=this.buildItemView(e,t,r);this.addChildViewEventForwarding(s),this.triggerMethod("before:item:added",s),this.children.add(s),this.renderItemView(s,i),this._isShown&&o.triggerMethod.call(s,"show"),this.triggerMethod("after:item:added",s)},addChildViewEventForwarding:function(e){var t=o.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var n=i(arguments);n[0]=t+":"+n[0],n.splice(1,0,e),o.triggerMethod.apply(this,n)},this)},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,i){var r=n.extend({model:e},i);return new t(r)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(e,t){e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),o.View.prototype.close.apply(this,i(arguments)))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.prototype.constructor.apply(this,i(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(){var e=o.getOption(this,"itemView")||this.constructor;return e||r("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(o.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return o.Renderer.render(t,e)},appendHtml:function(e,t){var n=this.getItemViewContainer(e);n.append(t.el)},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t;if(e.itemViewContainer){var i=n.result(e,"itemViewContainer");t=e.$(i),0>=t.length&&r("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),o.Layout=o.ItemView.extend({regionType:o.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),o.ItemView.prototype.constructor.call(this,e)},render:function(){this._firstRender?this._firstRender=!1:this.isClosed?this._initializeRegions():this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=o.ItemView.prototype.render.apply(this,e);return t},close:function(){if(!this.isClosed){this.regionManager.close();var e=Array.prototype.slice.apply(arguments);o.ItemView.prototype.close.apply(this,e)}},addRegion:function(e,t){var n={};return n[e]=t,this.addRegions(n)[e]},addRegions:function(e){return this.regions=n.extend(this.regions||{},e),this._buildRegions(e)},removeRegion:function(e){return this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,n={parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new o.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),o.AppRouter=t.Router.extend({constructor:function(e){if(t.Router.prototype.constructor.apply(this,i(arguments)),this.options=e,this.appRoutes){var n=o.getOption(this,"controller");this.processAppRoutes(n,this.appRoutes)}},processAppRoutes:function(e,t){var i=n.keys(t).reverse();n.each(i,function(i){var r=t[i],o=e[r];if(!o)throw Error("Method '"+r+"' was not found on the controller");this.route(i,r,n.bind(o,e))},this)}}),o.Application=function(e){this._initRegionManager(),this._initCallbacks=new o.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=o.triggerMethod},n.extend(o.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)
},addRegions:function(e){return this._regionManager.addRegions(e)},removeRegion:function(e){this._regionManager.removeRegion(e)},module:function(){var e=i(arguments);return e.unshift(this),o.Module.create.apply(o.Module,e)},_initRegionManager:function(){this._regionManager=new o.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),o.Application.extend=o.extend,o.Module=function(e,t){this.moduleName=e,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=o.triggerMethod},n.extend(o.Module.prototype,t.Events,{addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,o.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),o.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var r=n.flatten([this,this.app,t,o,o.$,n,i]);e.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks}}),n.extend(o.Module,{create:function(e,t,r){var o=e,s=i(arguments);s.splice(0,3),t=t.split(".");var a=t.length,c=[];return c[a-1]=r,n.each(t,function(t,n){var i=o;o=this._getModule(i,t,e),this._addModuleDefinition(i,o,c[n],s)},this),o},_getModule:function(e,t,n){var i=e[t];return i||(i=new o.Module(t,n),e[t]=i,e.submodules[t]=i),i},_addModuleDefinition:function(e,t,i,r){var o,s;n.isFunction(i)?(o=i,s=!0):n.isObject(i)?(o=i.define,s=i.startWithParent):s=!0,o&&t.addDefinition(o,r),t.startWithParent=t.startWithParent&&s,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),o}(this,Backbone,_);define("marionette",["backbone"],function(e){return function(){var t;return t||e.Marionette}}(this)),define("core",[],function(){var e=new Marionette.Application;return e.on("initialize:after",function(){Backbone.history.start()}),e.addRegions({modals:"#modals",main:"#main",utility:"#utility"}),e}),function(e){if("function"==typeof bootstrap)bootstrap("simplewebrtc",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("vendor/simplewebrtc",e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeSimpleWebRTC=e}else"undefined"!=typeof window?window.SimpleWebRTC=e():global.SimpleWebRTC=e()}(function(){return function(e,t,n){function i(n,o){if(!t[n]){if(!e[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=t[n]={exports:{}};e[n][0].call(a.exports,function(t){var r=e[n][1][t];return i(r?r:t)},a,a.exports)}return t[n].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t){function n(e){var t,n,s=this,a=e||{},l=this.config={url:"http://signaling.simplewebrtc.com:8888",debug:!1,localVideoEl:"",remoteVideosEl:"",enableDataChannels:!0,autoRequestMedia:!1,autoRemoveVideos:!0,adjustPeerVolume:!0,peerVolumeWhenSpeaking:.25};this.logger=function(){return e.debug?e.logger||console:e.logger||c}();for(t in a)this.config[t]=a[t];this.capabilities=o,r.call(this),n=this.connection=io.connect(this.config.url),n.on("connect",function(){s.emit("connectionReady",n.socket.sessionid),s.sessionReady=!0,s.testReadiness()}),n.on("message",function(e){var t,n=s.webrtc.getPeers(e.from,e.roomType);"offer"===e.type?(t=n.length?n[0]:s.webrtc.createPeer({id:e.from,type:e.roomType,sharemyscreen:"screen"===e.roomType&&!e.broadcaster}),t.handleMessage(e)):n.length&&n.forEach(function(t){t.handleMessage(e)})}),n.on("remove",function(e){e.id!==s.connection.socket.sessionid&&s.webrtc.removePeers(e.id,e.type)}),e.logger=this.logger,e.debug=!1,this.webrtc=new i(e),["mute","unmute","pause","resume"].forEach(function(e){s[e]=s.webrtc[e].bind(s.webrtc)}),this.webrtc.on("*",function(){s.emit.apply(s,arguments)}),l.debug&&this.on("*",this.logger.log.bind(this.logger,"SimpleWebRTC event:")),this.webrtc.on("localStream",function(){s.testReadiness()}),this.webrtc.on("message",function(e){s.connection.emit("message",e)}),this.webrtc.on("peerStreamAdded",this.handlePeerStreamAdded.bind(this)),this.webrtc.on("peerStreamRemoved",this.handlePeerStreamRemoved.bind(this)),this.config.adjustPeerVolume&&(this.webrtc.on("speaking",this.setVolumeForAll.bind(this,this.config.peerVolumeWhenSpeaking)),this.webrtc.on("stoppedSpeaking",this.setVolumeForAll.bind(this,1))),this.config.autoRequestMedia&&this.startLocalVideo()}var i=e("webrtc"),r=e("wildemitter"),o=e("webrtcsupport"),s=e("attachmediastream"),a=e("getscreenmedia"),c=e("mockconsole");n.prototype=Object.create(r.prototype,{constructor:{value:n}}),n.prototype.leaveRoom=function(){this.roomName&&(this.connection.emit("leave",this.roomName),this.webrtc.peers.forEach(function(e){e.end()}),this.getLocalScreen()&&this.stopScreenShare(),this.emit("leftRoom",this.roomName))},n.prototype.handlePeerStreamAdded=function(e){var t=this.getRemoteVideoContainer(),n=s(e.stream);e.videoEl=n,n.id=this.getDomId(e),t&&t.appendChild(n),this.emit("videoAdded",n,e)},n.prototype.handlePeerStreamRemoved=function(e){var t=this.getRemoteVideoContainer(),n=e.videoEl;this.config.autoRemoveVideos&&t&&n&&t.removeChild(n),n&&this.emit("videoRemoved",n,e)},n.prototype.getDomId=function(e){return[e.id,e.type,e.broadcaster?"broadcasting":"incoming"].join("_")},n.prototype.setVolumeForAll=function(e){this.webrtc.peers.forEach(function(t){t.videoEl&&(t.videoEl.volume=e)})},n.prototype.joinRoom=function(e,t){var n=this;this.roomName=e,this.connection.emit("join",e,function(i,r){if(i)n.emit("error",i);else{var o,s,a,c;for(o in r.clients){s=r.clients[o];for(a in s)s[a]&&(c=n.webrtc.createPeer({id:o,type:a}),c.start())}}t&&t(i,r),n.emit("joinedRoom",e)})},n.prototype.getEl=function(e){return"string"==typeof e?document.getElementById(e):e},n.prototype.startLocalVideo=function(){var e=this;this.webrtc.startLocalMedia(null,function(t,n){t?e.emit(t):s(n,e.getLocalVideoContainer(),{muted:!0,mirror:!0})})},n.prototype.stopLocalVideo=function(){this.webrtc.stopLocalMedia()},n.prototype.getLocalVideoContainer=function(){var e=this.getEl(this.config.localVideoEl);if(e&&"VIDEO"===e.tagName)return e;if(e){var t=document.createElement("video");return e.appendChild(t),t}},n.prototype.getRemoteVideoContainer=function(){return this.getEl(this.config.remoteVideosEl)},n.prototype.shareScreen=function(e){var t=this;a(function(n,i){var r=document.createElement("video"),o=t.getRemoteVideoContainer();n?t.emit(n):(t.webrtc.localScreen=i,r.id="localScreen",s(i,r),o&&o.appendChild(r),t.emit("localScreenAdded",r),t.connection.emit("shareScreen"),t.webrtc.peers.forEach(function(e){var n;"video"===e.type&&(n=t.webrtc.createPeer({id:e.id,type:"screen",sharemyscreen:!0,broadcaster:t.connection.socket.sessionid}),n.start())})),e&&e(n,i)})},n.prototype.getLocalScreen=function(){return this.webrtc.localScreen},n.prototype.stopScreenShare=function(){this.connection.emit("unshareScreen");var e=document.getElementById("localScreen"),t=this.getRemoteVideoContainer(),n=this.getLocalScreen();this.config.autoRemoveVideos&&t&&e&&t.removeChild(e),e&&this.emit("videoRemoved",e),n&&n.stop(),this.webrtc.peers.forEach(function(e){e.broadcaster&&e.end()}),delete this.webrtc.localScreen},n.prototype.testReadiness=function(){var e=this;this.webrtc.localStream&&this.sessionReady&&setTimeout(function(){e.emit("readyToCall",e.connection.socket.sessionid)},1e3)},n.prototype.createRoom=function(e,t){2===arguments.length?this.connection.emit("create",e,t):this.connection.emit("create",e)},n.prototype.sendFile=function(){return o.dataChannel?void 0:this.emit("error",new Error("DataChannelNotSupported"))},t.exports=n},{attachmediastream:4,getscreenmedia:6,mockconsole:7,webrtc:2,webrtcsupport:5,wildemitter:3}],3:[function(e,t){function n(){this.callbacks={}}t.exports=n,n.prototype.on=function(e){var t=3===arguments.length,n=t?arguments[1]:void 0,i=t?arguments[2]:arguments[1];return i._groupName=n,(this.callbacks[e]=this.callbacks[e]||[]).push(i),this},n.prototype.once=function(e){function t(){n.off(e,t),o.apply(this,arguments)}var n=this,i=3===arguments.length,r=i?arguments[1]:void 0,o=i?arguments[2]:arguments[1];return this.on(e,r,t),this},n.prototype.releaseGroup=function(e){var t,n,i,r;for(t in this.callbacks)for(r=this.callbacks[t],n=0,i=r.length;i>n;n++)r[n]._groupName===e&&(r.splice(n,1),n--,i--);return this},n.prototype.off=function(e,t){var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(n=i.indexOf(t),i.splice(n,1),this):this},n.prototype.emit=function(e){var t,n,i=[].slice.call(arguments,1),r=this.callbacks[e],o=this.getWildcardCallbacks(e);if(r)for(t=0,n=r.length;n>t&&r[t];++t)r[t].apply(this,i);if(o)for(t=0,n=o.length;n>t&&o[t];++t)o[t].apply(this,[e].concat(i));return this},n.prototype.getWildcardCallbacks=function(e){var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[1].length)===n[1])&&(i=i.concat(this.callbacks[t]));return i}},{}],4:[function(e,t){t.exports=function(e,t,n){var i,r=window.URL,o={autoplay:!0,mirror:!1,muted:!1},s=t||document.createElement("video");if(n)for(i in n)o[i]=n[i];if(o.autoplay&&(s.autoplay="autoplay"),o.muted&&(s.muted=!0),o.mirror&&["","moz","webkit","o","ms"].forEach(function(e){var t=e?e+"Transform":"transform";s.style[t]="scaleX(-1)"}),r&&r.createObjectURL)s.src=r.createObjectURL(e);else if(s.srcObject)s.srcObject=e;else{if(!s.mozSrcObject)return!1;s.mozSrcObject=e}return s}},{}],5:[function(e,t){var n,i=!1,r=!1,o=navigator.userAgent.toLowerCase();-1!==o.indexOf("firefox")?(n="moz",r=!0):-1!==o.indexOf("chrome")&&(n="webkit",i=!0);var s=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,a=window.mozRTCIceCandidate||window.RTCIceCandidate,c=window.mozRTCSessionDescription||window.RTCSessionDescription,l=window.webkitMediaStream||window.MediaStream,u=navigator.userAgent.match("Chrome")&&parseInt(navigator.userAgent.match(/Chrome\/(.*) /)[1],10)>=26,h=window.webkitAudioContext||window.AudioContext;t.exports={support:!!s,dataChannel:i||r||s.prototype&&s.prototype.createDataChannel,prefix:n,webAudio:!(!h||!h.prototype.createMediaStreamSource),mediaStream:!(!l||!l.prototype.removeTrack),screenSharing:!!u,AudioContext:h,PeerConnection:s,SessionDescription:c,IceCandidate:a}},{}],7:[function(e,t){for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),i=n.length,r=function(){},o={};i--;)o[n[i]]=r;t.exports=o},{}],6:[function(e,t){var n=e("getusermedia");t.exports=function(e){var t,i={video:{mandatory:{chromeMediaSource:"screen"}}};return"http:"===window.location.protocol?(t=new Error("NavigatorUserMediaError"),t.name="HTTPS_REQUIRED",e(t)):(n(i,e),void 0)}},{getusermedia:8}],9:[function(e,t){var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;t.exports=function(e,t){var i,r=2===arguments.length,o={video:!0,audio:!0},s="PERMISSION_DENIED",a="CONSTRAINT_NOT_SATISFIED";return r||(t=e,e=o),n?(n.call(navigator,e,function(e){t(null,e)},function(e){var n;"string"==typeof e?(n=new Error("NavigatorUserMediaError"),n.name=e===s?s:a):(n=e,n.name||(e.name=n[s]?s:a)),t(n)}),void 0):(i=new Error("NavigatorUserMediaError"),i.name="NOT_SUPPORTED_ERROR",t(i))}},{}],8:[function(e,t){var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;t.exports=function(e,t){var i,r=2===arguments.length,o={video:!0,audio:!0},s="PERMISSION_DENIED",a="CONSTRAINT_NOT_SATISFIED";return r||(t=e,e=o),n?(n.call(navigator,e,function(e){t(null,e)},function(e){var n;"string"==typeof e?(n=new Error("NavigatorUserMediaError"),n.name=e===s?s:a):(n=e,n.name||(e.name=n[s]?s:a)),t(n)}),void 0):(i=new Error("NavigatorUserMediaError"),i.name="NOT_SUPPORTED_ERROR",t(i))}},{}],2:[function(e,t){function n(e){var t=this,n=e||{};this.config={debug:!1,localVideoEl:"",remoteVideosEl:"",autoRequestMedia:!1,peerConnectionConfig:{iceServers:[{url:"stun:stun.l.google.com:19302"}]},peerConnectionContraints:{optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannels:!0}]},autoAdjustMic:!1,media:{audio:!0,video:!0},detectSpeakingEvents:!0,enableDataChannels:!0};var i;this.screenSharingSupport=r.screenSharing,this.logger=function(){return e.debug?e.logger||console:e.logger||u}();for(i in n)this.config[i]=n[i];r.support||this.logger.error("Your browser doesn't seem to support WebRTC"),this.peers=[],a.call(this),this.config.debug&&this.on("*",function(e,n,i){var r;r=t.config.logger===u?console:t.logger,r.log("event:",e,n,i)})}function i(e){var t=this;if(this.id=e.id,this.parent=e.parent,this.type=e.type||"video",this.oneway=e.oneway||!1,this.sharemyscreen=e.sharemyscreen||!1,this.browserPrefix=e.prefix,this.stream=e.stream,this.channels={},this.pc=new s(this.parent.config.peerConnectionConfig,this.parent.config.peerConnectionContraints),this.pc.on("ice",this.onIceCandidate.bind(this)),this.pc.on("addStream",this.handleRemoteStreamAdded.bind(this)),this.pc.on("addChannel",this.handleDataChannelAdded.bind(this)),this.pc.on("removeStream",this.handleStreamRemoved.bind(this)),this.pc.on("negotiationNeeded",this.emit.bind(this,"negotiationNeeded")),this.logger=this.parent.logger,"screen"===e.type?this.parent.localScreen&&this.sharemyscreen&&(this.logger.log("adding local screen stream to peer connection"),this.pc.addStream(this.parent.localScreen),this.broadcaster=e.broadcaster):this.pc.addStream(this.parent.localStream),this.parent.config.enableDataChannels&&r.dataChannel){try{if(this.reliableChannel=this.getDataChannel("reliable",{reliable:!0}),!this.reliableChannel.reliable)throw Error("Failed to make reliable channel")}catch(n){this.logger.warn("Failed to create reliable data channel."),this.reliableChannel=!1,delete this.channels.reliable}try{if(this.unreliableChannel=this.getDataChannel("unreliable",{reliable:!1,preset:!0}),this.unreliableChannel.unreliable!==!1)throw Error("Failed to make unreliable channel")}catch(n){this.logger.warn("Failed to create unreliable data channel."),this.unreliableChannel=!1,delete this.channels.unreliableChannel}}a.call(this),this.on("*",function(){t.parent.emit.apply(t.parent,arguments)})}var r=e("webrtcsupport"),o=e("getusermedia"),s=e("rtcpeerconnection"),a=e("wildemitter"),c=e("hark"),l=e("mediastream-gain"),u=e("mockconsole");n.prototype=Object.create(a.prototype,{constructor:{value:n}}),n.prototype.createPeer=function(e){var t;return e.parent=this,t=new i(e),this.peers.push(t),t},n.prototype.startLocalMedia=function(e,t){var n=this,i=e||{video:{mandatory:{maxWidth:480,maxHeight:320}},audio:!0};o(i,function(e,r){e||(i.audio&&n.config.detectSpeakingEvents&&n.setupAudioMonitor(r),n.localStream=r,n.config.autoAdjustMic&&(n.gainController=new l(r),n.setMicIfEnabled(.5)),n.emit("localStream",r)),t&&t(e,r)})},n.prototype.stopLocalMedia=function(){this.localStream&&(this.localStream.stop(),this.emit("localStreamStopped"))},n.prototype.mute=function(){this._audioEnabled(!1),this.hardMuted=!0,this.emit("audioOff")},n.prototype.unmute=function(){this._audioEnabled(!0),this.hardMuted=!1,this.emit("audioOn")},n.prototype.setupAudioMonitor=function(e){this.logger.log("Setup audio");var t,n=c(e),i=this;n.on("speaking",function(){i.hardMuted||(i.setMicIfEnabled(1),i.sendToAll("speaking",{}),i.emit("speaking"))}),n.on("stopped_speaking",function(){i.hardMuted||(t&&clearTimeout(t),t=setTimeout(function(){i.setMicIfEnabled(.5),i.sendToAll("stopped_speaking",{}),i.emit("stoppedSpeaking")},1e3))})},n.prototype.setMicIfEnabled=function(e){this.config.autoAdjustMic&&this.gainController.setGain(e)},n.prototype.pauseVideo=function(){this._videoEnabled(!1),this.emit("videoOff")},n.prototype.resumeVideo=function(){this._videoEnabled(!0),this.emit("videoOn")},n.prototype.pause=function(){this._audioEnabled(!1),this.pauseVideo()},n.prototype.resume=function(){this._audioEnabled(!0),this.resumeVideo()},n.prototype._audioEnabled=function(e){this.setMicIfEnabled(e?1:0),this.localStream.getAudioTracks().forEach(function(t){t.enabled=!!e})},n.prototype._videoEnabled=function(e){this.localStream.getVideoTracks().forEach(function(t){t.enabled=!!e})},n.prototype.removePeers=function(e,t){this.getPeers(e,t).forEach(function(e){e.end()})},n.prototype.getPeers=function(e,t){return this.peers.filter(function(n){return!(e&&n.id!==e||t&&n.type!==t)})},n.prototype.sendToAll=function(e,t){this.peers.forEach(function(n){n.send(e,t)})},i.prototype=Object.create(a.prototype,{constructor:{value:i}}),i.prototype.handleMessage=function(e){var t=this;this.logger.log("getting",e.type,e),e.prefix&&(this.browserPrefix=e.prefix),"offer"===e.type?this.pc.answer(e.payload,function(e,n){t.send("answer",n)}):"answer"===e.type?this.pc.handleAnswer(e.payload):"candidate"===e.type?this.pc.processIce(e.payload):"speaking"===e.type?this.parent.emit("speaking",{id:e.from}):"stopped_speaking"===e.type&&this.parent.emit("stopped_speaking",{id:e.from})},i.prototype.send=function(e,t){var n={to:this.id,broadcaster:this.broadcaster,roomType:this.type,type:e,payload:t,prefix:r.prefix};this.logger.log("sending",e,n),this.parent.emit("message",n)},i.prototype._observeDataChannel=function(e){var t=this;e.onclose=this.emit.bind(this,"channelClose",e),e.onerror=this.emit.bind(this,"channelError",e),e.onmessage=function(n){t.emit("message",e.label,n.data,e,n)},e.onopen=this.emit.bind(this,"channelOpen",e)},i.prototype.getDataChannel=function(e,t){if(!r.dataChannel)return this.emit("error",new Error("createDataChannel not supported"));var n=this.channels[e];return t||(t={}),n?n:(n=this.channels[e]=this.pc.createDataChannel(e,t),this._observeDataChannel(n),n)},i.prototype.onIceCandidate=function(e){this.closed||(e?this.send("candidate",e):this.logger.log("End of candidates."))},i.prototype.start=function(){var e=this;this.pc.offer(function(t,n){e.send("offer",n)})},i.prototype.end=function(){this.pc.close(),this.handleStreamRemoved()},i.prototype.handleRemoteStreamAdded=function(e){this.stream?this.logger.warn("Already have a remote stream"):(this.stream=e.stream,this.parent.emit("peerStreamAdded",this))},i.prototype.handleStreamRemoved=function(){this.parent.peers.splice(this.parent.peers.indexOf(this),1),this.closed=!0,this.parent.emit("peerStreamRemoved",this)},i.prototype.handleDataChannelAdded=function(e){this.channels[e.name]=e},t.exports=n},{getusermedia:9,hark:12,"mediastream-gain":11,mockconsole:7,rtcpeerconnection:10,webrtcsupport:5,wildemitter:3}],11:[function(e,t){function n(e){if(this.support=i.webAudio&&i.mediaStream,this.gain=1,this.support){var t=this.context=new i.AudioContext;this.microphone=t.createMediaStreamSource(e),this.gainFilter=t.createGain(),this.destination=t.createMediaStreamDestination(),this.outputStream=this.destination.stream,this.microphone.connect(this.gainFilter),this.gainFilter.connect(this.destination),e.removeTrack(e.getAudioTracks()[0]),e.addTrack(this.outputStream.getAudioTracks()[0])}this.stream=e}var i=e("webrtcsupport");n.prototype.setGain=function(e){this.support&&(this.gainFilter.gain.value=e,this.gain=e)},n.prototype.getGain=function(){return this.gain},n.prototype.off=function(){return this.setGain(0)},n.prototype.on=function(){this.setGain(1)},t.exports=n},{webrtcsupport:13}],13:[function(e,t){var n=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection,i=window.mozRTCIceCandidate||window.RTCIceCandidate,r=window.mozRTCSessionDescription||window.RTCSessionDescription,o=function(){return window.mozRTCPeerConnection?"moz":window.webkitRTCPeerConnection?"webkit":void 0}(),s=window.webkitMediaStream||window.MediaStream,a=navigator.userAgent.match("Chrome")&&parseInt(navigator.userAgent.match(/Chrome\/(.*) /)[1],10)>=26,c=window.webkitAudioContext||window.AudioContext;t.exports={support:!!n,dataChannel:!!(n&&n.prototype&&n.prototype.createDataChannel),prefix:o,webAudio:!(!c||!c.prototype.createMediaStreamSource),mediaStream:!(!s||!s.prototype.removeTrack),screenSharing:a,AudioContext:c,PeerConnection:n,SessionDescription:r,IceCandidate:i}},{}],10:[function(e,t){function n(e,t){var n;this.pc=new r.PeerConnection(e,t),i.call(this),this.pc.onremovestream=this.emit.bind(this,"removeStream"),this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded"),this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange"),this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange"),this.pc.onaddstream=this._onAddStream.bind(this),this.pc.onicecandidate=this._onIce.bind(this),this.pc.ondatachannel=this._onDataChannel.bind(this),this.config={debug:!1,sdpHack:!0};for(n in e)this.config[n]=e[n];this.config.debug&&this.on("*",function(){var t=e.logger||console;t.log("PeerConnection event:",arguments)})}var i=e("wildemitter"),r=e("webrtcsupport");n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype.addStream=function(e){this.localStream=e,this.pc.addStream(e)},n.prototype.processIce=function(e){this.pc.addIceCandidate(new r.IceCandidate(e))},n.prototype.offer=function(e,t){var n=this,i=2===arguments.length,r=i?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},o=i?t:e;this.pc.createOffer(function(e){e.sdp=n._applySdpHack(e.sdp),n.pc.setLocalDescription(e),n.emit("offer",e),o&&o(null,e)},function(e){n.emit("error",e),o&&o(e)},r)},n.prototype.answerAudioOnly=function(e,t){var n={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}};this._answer(e,n,t)},n.prototype.answerBroadcastOnly=function(e,t){var n={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this._answer(e,n,t)},n.prototype.answer=function(e,t,n){var i=3===arguments.length,r=i?n:t,o=i?t:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};this._answer(e,o,r)},n.prototype.handleAnswer=function(e){this.pc.setRemoteDescription(new r.SessionDescription(e))},n.prototype.close=function(){this.pc.close(),this.emit("close")},n.prototype._answer=function(e,t,n){var i=this;this.pc.setRemoteDescription(new r.SessionDescription(e)),this.pc.createAnswer(function(e){e.sdp=i._applySdpHack(e.sdp),i.pc.setLocalDescription(e),i.emit("answer",e),n&&n(null,e)},function(e){i.emit("error",e),n&&n(e)},t)},n.prototype._onIce=function(e){e.candidate?this.emit("ice",e.candidate):this.emit("endOfCandidates")},n.prototype._onDataChannel=function(e){this.emit("addChannel",e.channel)},n.prototype._onAddStream=function(e){this.remoteStream=e.stream,this.emit("addStream",e)},n.prototype._applySdpHack=function(e){if(!this.config.sdpHack)return e;var t=e.split("b=AS:30");return 2===t.length?t[0]+"b=AS:102400"+t[1]:e},n.prototype.createDataChannel=function(e,t){t||(t={});var n,i,o=!!t.reliable,s=t.protocol||"text/plain",a=!(!t.negotiated&&!t.preset);return"moz"===r.prefix?(n=o?{protocol:s,preset:a,stream:e}:{},i=this.pc.createDataChannel(e,n),i.binaryType="blob"):(n=o?{reliable:!0}:{reliable:!1},i=this.pc.createDataChannel(e,n)),i},t.exports=n},{webrtcsupport:5,wildemitter:3}],12:[function(e,t){function n(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var i=0,r=t.length;r>i;i++)t[i]>n&&t[i]<0&&(n=t[i]);return n}var i=e("wildemitter");t.exports=function(e,t){var r=new i;if(!window.webkitAudioContext)return r;var o,s,a,t=t||{},c=t.smoothing||.5,l=t.interval||100,u=t.threshold,h=t.play,f=new webkitAudioContext;a=f.createAnalyser(),a.fftSize=512,a.smoothingTimeConstant=c,s=new Float32Array(a.fftSize),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement?(o=f.createMediaElementSource(e),"undefined"==typeof h&&(h=!0),u=u||-65):(o=f.createMediaStreamSource(e),u=u||-45),o.connect(a),h&&a.connect(f.destination),r.speaking=!1,r.setThreshold=function(e){u=e},r.setInterval=function(e){l=e};var p=function(){setTimeout(function(){var e=n(a,s);r.emit("volume_change",e,u),e>u?r.speaking||(r.speaking=!0,r.emit("speaking")):r.speaking&&(r.speaking=!1,r.emit("stopped_speaking")),p()},l)};return p(),r}},{wildemitter:3}]},{},[1])(1)}),define("connection/models/stream",[],function(){return Backbone.Model.extend({toJSON:function(e,t){var n=_.clone(this.attributes),i=n.videoEl,r=e,o=t,s=r/i.videoWidth,a=o/i.videoHeight,c=n.scale=Math.max(s,a),t=n.height=i.videoHeight*c,e=n.width=i.videoWidth*c;return n.centerX=.5*(e-r),n.centerY=.5*(t-o),n}})}),define("connection/collections/streams",["../models/stream"],function(e){return Backbone.Collection.extend({model:e})}),define("connection/controller",["vendor/simplewebrtc","./collections/streams"],function(e,t){var n=Marionette.Controller.extend({initialize:function(){this.driver=new e({autoRequestMedia:!0,autoRemoveVideos:!1,localVideoEl:document.createElement("div"),remoteVideosEl:document.createElement("div")}),this.driver.on("readyToCall",this.boot.bind(this)),this.driver.on("videoAdded",this.addVideo.bind(this)),this.driver.on("videoRemoved",this.removeVideo.bind(this)),this.collection=new t,this.driver.connection.on("message",function(e){this.trigger("message",e),this.trigger("message:"+e.type,e)}.bind(this))},localVideo:function(){return this.driver.getEl(this.driver.config.localVideoEl).querySelector("video")},boot:function(e){this.collection.add({id:e,local:!0,videoEl:this.localVideo()}),this.driver.resume(),this.driver.joinRoom(window.location.pathname.slice(1))},addVideo:function(e,t){this.collection.add(t),this.trigger("stream:added")},removeVideo:function(e,t){this.collection.remove(t.id),this.trigger("stream:removed")},send:function(e,t){this.driver.webrtc.sendToAll(e,t)}});return n}),define("connection/core",["core","connection/controller"],function(e,t){var n=e.module("Connection"),i=n.controller=new t;return i.on("stream:added",function(){e.vent.trigger("connection:stream:added")}),i.on("stream:added",function(){e.vent.trigger("connection:stream:removed")}),e.reqres.setHandler("connection:streams",function(){return i.collection}),e.commands.setHandler("connection:mute",function(){i.driver.mute()}),e.commands.setHandler("connection:unmute",function(){i.driver.unmute()}),e.commands.setHandler("connection:pause",function(){i.driver.pause()}),e.commands.setHandler("connection:resume",function(){i.driver.resume()}),n}),define("text",{});var Handlebars={};!function(e,t){e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var n=Object.prototype.toString,i="[object Function]",r="[object Object]";e.registerHelper=function(t,i,o){if(n.call(t)===r){if(o||i)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else o&&(i.not=o),this.helpers[t]=i},e.registerPartial=function(t,i){n.call(t)===r?e.Utils.extend(this.partials,t):this.partials[t]=i},e.registerHelper("helperMissing",function(e){if(2===arguments.length)return t;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,r){var o=r.inverse||function(){},s=r.fn,a=n.call(t);return a===i&&(t=t.call(this)),t===!0?s(this):t===!1||null==t?o(this):"[object Array]"===a?t.length>0?e.helpers.each(t,r):o(this):s(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var i=e.logger.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,r){var o,s=r.fn,a=r.inverse,c=0,l="",u=n.call(t);if(u===i&&(t=t.call(this)),r.data&&(o=e.createFrame(r.data)),t&&"object"==typeof t)if(t instanceof Array)for(var h=t.length;h>c;c++)o&&(o.index=c),l+=s(t[c],{data:o});else for(var f in t)t.hasOwnProperty(f)&&(o&&(o.key=f),l+=s(t[f],{data:o}),c++);return 0===c&&(l=a(this)),l}),e.registerHelper("if",function(t,r){var o=n.call(t);return o===i&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?r.inverse(this):r.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(t,r){var o=n.call(t);return o===i&&(t=t.call(this)),e.Utils.isEmpty(t)?void 0:r.fn(t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)});var o=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;t<o.length;t++)this[o[t]]=e[o[t]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,c=/[&<>"'`]/,l=function(e){return s[e]||"&amp;"};e.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():null==t||t===!1?"":(t=t.toString(),c.test(t)?t.replace(a,l):t)},isEmpty:function(e){return e||0===e?"[object Array]"===n.call(e)&&0===e.length?!0:!1:!0}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,i){var r=this.programs[t];return i?r=e.VM.program(t,n,i):r||(r=this.programs[t]=e.VM.program(t,n)),r},merge:function(t,n){var i=t||n;return t&&n&&(i={},e.Utils.extend(i,n),e.Utils.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,r){r=r||{};var o=t.call(n,e,i,r.helpers,r.partials,r.data),s=n.compilerInfo||[],a=s[0]||1,c=e.COMPILER_REVISION;if(a!==c){if(c>a){var l=e.REVISION_CHANGES[c],u=e.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+l+") or downgrade your runtime to an older version ("+u+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return o}},programWithDepth:function(e,t,n){var i=Array.prototype.slice.call(arguments,3),r=function(e,r){return r=r||{},t.apply(this,[e,r.data||n].concat(i))};return r.program=e,r.depth=i.length,r},program:function(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,r,o,s,a){var c={helpers:o,partials:s,data:a};if(n===t)throw new e.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(r,c);if(e.compile)return s[i]=e.compile(n,{data:a!==t}),s[i](r,c);throw new e.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")}},e.template=e.VM.template}(Handlebars),define("Handlebars",function(e){return function(){var t;return t||e.Handlebars}}(this)),define("hbars",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("hbars!halloween/templates/scene",["Handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<ul class="scene">\n	<li class="layer" data-depth="0"><img src="/images/halloween/background.jpg"></li>\n   	<li class="layer" data-depth="0.10"><img src="/images/halloween/witch_moon.png"></li>\n	<li class="layer" data-depth="0.20"><img src="/images/halloween/hill.png"></li>\n	<li class="layer" data-depth="0.10"><img src="/images/halloween/trees.png"></li>\n	<li class="layer" data-depth="0.40"><img src="/images/halloween/hill_front.png"></li>\n	<li class="layer layer--ghoul" data-depth="0.80">\n		<img src="/images/halloween/ghoul.png">\n		<img class="mask" src="/images/halloween/ghoul_mask.png"/>\n		<canvas class="ghoul__canvas" width="181" height="202"></canvas>\n	</li>\n</ul>'
})}),function(e,t,n,i){function r(t,n){this.element=t,this.$context=e(t).data("api",this),this.$layers=this.$context.find(".layer");var i={calibrateX:this.$context.data("calibrate-x")||null,calibrateY:this.$context.data("calibrate-y")||null,invertX:this.$context.data("invert-x")||null,invertY:this.$context.data("invert-y")||null,limitX:parseFloat(this.$context.data("limit-x"))||null,limitY:parseFloat(this.$context.data("limit-y"))||null,scalarX:parseFloat(this.$context.data("scalar-x"))||null,scalarY:parseFloat(this.$context.data("scalar-y"))||null,frictionX:parseFloat(this.$context.data("friction-x"))||null,frictionY:parseFloat(this.$context.data("friction-y"))||null};for(var r in i)null===i[r]&&delete i[r];e.extend(this,a,n,i),this.calibrationTimer=null,this.calibrationFlag=!0,this.enabled=!1,this.depths=[],this.raf=null,this.ox=0,this.oy=0,this.ow=0,this.oh=0,this.cx=0,this.cy=0,this.ix=0,this.iy=0,this.mx=0,this.my=0,this.vx=0,this.vy=0,this.onMouseMove=this.onMouseMove.bind(this),this.onDeviceOrientation=this.onDeviceOrientation.bind(this),this.onOrientationTimer=this.onOrientationTimer.bind(this),this.onCalibrationTimer=this.onCalibrationTimer.bind(this),this.onAnimationFrame=this.onAnimationFrame.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.initialise()}var o="parallax",s=30,a={calibrationThreshold:100,calibrationDelay:500,supportDelay:500,calibrateX:!1,calibrateY:!0,invertX:!0,invertY:!0,limitX:!1,limitY:!1,scalarX:10,scalarY:10,frictionX:.1,frictionY:.1};r.prototype.transformSupport=function(e){for(var r=n.createElement("div"),o=!1,s=null,a=!1,c=null,l=null,u=0,h=this.vendors.length;h>u;u++)if(null!==this.vendors[u]?(c=this.vendors[u][0]+"transform",l=this.vendors[u][1]+"Transform"):(c="transform",l="transform"),r.style[l]!==i){o=!0;break}switch(e){case"2D":a=o;break;case"3D":o&&(n.body.appendChild(r),r.style[l]="translate3d(1px,1px,1px)",s=t.getComputedStyle(r).getPropertyValue(c),a=s!==i&&s.length>0&&"none"!==s,n.body.removeChild(r))}return a},r.prototype.ww=null,r.prototype.wh=null,r.prototype.hw=null,r.prototype.hh=null,r.prototype.portrait=null,r.prototype.desktop=!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i),r.prototype.vendors=[null,["-webkit-","webkit"],["-moz-","Moz"],["-o-","O"],["-ms-","ms"]],r.prototype.motionSupport=!!t.DeviceMotionEvent,r.prototype.orientationSupport=!!t.DeviceOrientationEvent,r.prototype.orientationStatus=0,r.prototype.transform2DSupport=r.prototype.transformSupport("2D"),r.prototype.transform3DSupport=r.prototype.transformSupport("3D"),r.prototype.initialise=function(){"static"===this.$context.css("position")&&this.$context.css({position:"relative"}),this.$layers.css({position:"absolute",display:"block",height:"100%",width:"100%",left:0,top:0}),this.$layers.first().css({position:"relative"}),this.$layers.each(e.proxy(function(t,n){this.depths.push(e(n).data("depth")||0)},this)),this.accelerate(this.$context),this.accelerate(this.$layers),this.updateDimensions(),this.enable(),this.queueCalibration(this.calibrationDelay)},r.prototype.updateDimensions=function(){this.ox=this.$context.offset().left,this.oy=this.$context.offset().top,this.ow=this.$context.width(),this.oh=this.$context.height(),this.ww=t.innerWidth,this.wh=t.innerHeight,this.hw=this.ww/2,this.hh=this.wh/2},r.prototype.queueCalibration=function(e){clearTimeout(this.calibrationTimer),this.calibrationTimer=setTimeout(this.onCalibrationTimer,e)},r.prototype.enable=function(){this.enabled||(this.enabled=!0,this.orientationSupport?(this.portrait=null,t.addEventListener("deviceorientation",this.onDeviceOrientation),setTimeout(this.onOrientationTimer,this.supportDelay)):(this.cx=0,this.cy=0,this.portrait=!1,t.addEventListener("mousemove",this.onMouseMove)),t.addEventListener("resize",this.onWindowResize),this.raf=requestAnimationFrame(this.onAnimationFrame))},r.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.orientationSupport?t.removeEventListener("deviceorientation",this.onDeviceOrientation):t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("resize",this.onWindowResize),cancelAnimationFrame(this.raf))},r.prototype.calibrate=function(e,t){this.calibrateX=e===i?this.calibrateX:e,this.calibrateY=t===i?this.calibrateY:t},r.prototype.invert=function(e,t){this.invertX=e===i?this.invertX:e,this.invertY=t===i?this.invertY:t},r.prototype.friction=function(e,t){this.frictionX=e===i?this.frictionX:e,this.frictionY=t===i?this.frictionY:t},r.prototype.scalar=function(e,t){this.scalarX=e===i?this.scalarX:e,this.scalarY=t===i?this.scalarY:t},r.prototype.limit=function(e,t){this.limitX=e===i?this.limitX:e,this.limitY=t===i?this.limitY:t},r.prototype.clamp=function(e,t,n){return e=Math.max(e,t),e=Math.min(e,n)},r.prototype.css=function(t,n,r){for(var o=null,s=0,a=this.vendors.length;a>s;s++)if(o=null!==this.vendors[s]?e.camelCase(this.vendors[s][1]+"-"+n):n,t.style[o]!==i){t.style[o]=r;break}},r.prototype.accelerate=function(e){for(var t=0,n=e.length;n>t;t++){var i=e[t];this.css(i,"transform","translate3d(0,0,0)"),this.css(i,"transform-style","preserve-3d"),this.css(i,"backface-visibility","hidden")}},r.prototype.setPosition=function(e,t,n){t+="%",n+="%",this.transform3DSupport?this.css(e,"transform","translate3d("+t+","+n+",0)"):this.transform2DSupport?this.css(e,"transform","translate("+t+","+n+")"):(e.style.left=t,e.style.top=n)},r.prototype.onOrientationTimer=function(){this.orientationSupport&&0===this.orientationStatus&&(this.disable(),this.orientationSupport=!1,this.enable())},r.prototype.onCalibrationTimer=function(){this.calibrationFlag=!0},r.prototype.onWindowResize=function(){this.updateDimensions()},r.prototype.onAnimationFrame=function(){var e=this.ix-this.cx,t=this.iy-this.cy;(Math.abs(e)>this.calibrationThreshold||Math.abs(t)>this.calibrationThreshold)&&this.queueCalibration(0),this.portrait?(this.mx=(this.calibrateX?t:this.iy)*this.scalarX,this.my=(this.calibrateY?e:this.ix)*this.scalarY):(this.mx=(this.calibrateX?e:this.ix)*this.scalarX,this.my=(this.calibrateY?t:this.iy)*this.scalarY),isNaN(parseFloat(this.limitX))||(this.mx=this.clamp(this.mx,-this.limitX,this.limitX)),isNaN(parseFloat(this.limitY))||(this.my=this.clamp(this.my,-this.limitY,this.limitY)),this.vx+=(this.mx-this.vx)*this.frictionX,this.vy+=(this.my-this.vy)*this.frictionY;for(var n=0,i=this.$layers.length;i>n;n++){var r=this.depths[n],o=this.$layers[n],s=this.vx*r*(this.invertX?-1:1),a=this.vy*r*(this.invertY?-1:1);this.setPosition(o,s,a)}this.raf=requestAnimationFrame(this.onAnimationFrame)},r.prototype.onDeviceOrientation=function(e){if(!this.desktop&&null!==e.beta&&null!==e.gamma){this.orientationStatus=1;var n=(e.beta||0)/s,i=(e.gamma||0)/s,r=t.innerHeight>t.innerWidth;this.portrait!==r&&(this.portrait=r,this.calibrationFlag=!0),this.calibrationFlag&&(this.calibrationFlag=!1,this.cx=n,this.cy=i),this.ix=n,this.iy=i}},r.prototype.onMouseMove=function(e){this.ix=(e.pageX-this.hw)/this.hw,this.iy=(e.pageY-this.hh)/this.hh};var c={enable:r.prototype.enable,disable:r.prototype.disable,calibrate:r.prototype.calibrate,friction:r.prototype.friction,invert:r.prototype.invert,scalar:r.prototype.scalar,limit:r.prototype.limit};e.fn[o]=function(t){var n=arguments;return this.each(function(){var i=e(this),s=i.data(o);s||(s=new r(this,t),i.data(o,s)),c[t]&&s[t].apply(s,Array.prototype.slice.call(n,1))})}}(window.jQuery||window.Zepto,window,document),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;t.length>n&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=window.setTimeout(function(){t(n+i)},i);return e=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),define("vendor/jquery.parallax",function(e){return function(){var t;return t||e.Parallax}}(this)),define("halloween/views/scene",["hbars!../templates/scene","vendor/jquery.parallax"],function(e){return Marionette.ItemView.extend({template:e,ui:{scene:".scene",layers:".layer"},onDomRefresh:function(){this.videoLoop()},draw:function(){var e=this.$(".mask"),t=this.$("canvas");this.collection.each(function(n,i){var r=t.get(i),o=e.get(i),s=r.getContext("2d"),a=n.toJSON(o.width,o.height);r.width=r.width,s.save(),s.drawImage(a.videoEl,a.centerX,a.centerY,a.width,a.height),s.globalCompositeOperation="destination-in",s.drawImage(o,0,0),s.restore()},this)},videoLoop:function(){cancelAnimationFrame(this.frame);var e=Date.now();this.frame=requestAnimationFrame(function t(){var n=Date.now()-e>1e3/30;this.frame=requestAnimationFrame(t.bind(this)),n&&(e=Date.now(),this.draw())}.bind(this))}})}),define("halloween/core",["core","./views/scene"],function(e,t){var n=e.module("Presentation");return n.addInitializer(function(){e.main.show(new t({collection:e.request("connection:streams")}))}),n}),require(["core","connection/core","halloween/core"],function(e){e.start()}),define("setup",function(){}),require(["setup"]);